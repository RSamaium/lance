{"version":3,"file":"lance-gg.js","sources":["../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/regex.js","../../node_modules/uuid/dist/esm-browser/validate.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/md5.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../node_modules/uuid/dist/esm-browser/sha1.js","../../src/GameWorld.js","../../node_modules/type/value/is.js","../../node_modules/type/object/is.js","../../node_modules/type/prototype/is.js","../../node_modules/type/function/is.js","../../node_modules/type/plain-function/is.js","../../node_modules/es5-ext/object/assign/is-implemented.js","../../node_modules/es5-ext/object/keys/is-implemented.js","../../node_modules/es5-ext/function/noop.js","../../node_modules/es5-ext/object/is-value.js","../../node_modules/es5-ext/object/keys/shim.js","../../node_modules/es5-ext/object/keys/index.js","../../node_modules/es5-ext/object/valid-value.js","../../node_modules/es5-ext/object/assign/shim.js","../../node_modules/es5-ext/object/assign/index.js","../../node_modules/es5-ext/object/normalize-options.js","../../node_modules/es5-ext/string/#/contains/is-implemented.js","../../node_modules/es5-ext/string/#/contains/shim.js","../../node_modules/es5-ext/string/#/contains/index.js","../../node_modules/d/index.js","../../node_modules/es5-ext/object/valid-callable.js","../../node_modules/event-emitter/index.js","../../src/game/Timer.js","../../src/lib/Trace.js","../../src/GameEngine.js","../../src/physics/PhysicsEngine.js","../../src/lib/Utils.js","../../src/serialize/BaseTypes.js","../../src/serialize/Serializable.js","../../src/serialize/TwoVector.js","../../src/physics/SimplePhysics/HSHG.js","../../src/physics/SimplePhysics/HSHGCollisionDetection.js","../../src/physics/SimplePhysics/BruteForceCollisionDetection.js","../../src/physics/SimplePhysicsEngine.js","../../src/physics/CannonPhysicsEngine.js","../../src/serialize/ThreeVector.js","../../src/serialize/Quaternion.js","../../src/serialize/GameObject.js","../../src/lib/MathUtils.js","../../src/serialize/DynamicObject.js","../../src/serialize/PhysicalObject2D.js","../../src/serialize/PhysicalObject3D.js","../../src/lib/lib.js","../../node_modules/parseuri/index.js","../../node_modules/ms/index.js","../../node_modules/debug/src/common.js","../../node_modules/debug/src/browser.js","../../node_modules/socket.io-client/build/url.js","../../node_modules/has-cors/index.js","../../node_modules/engine.io-client/lib/globalThis.browser.js","../../node_modules/engine.io-client/lib/xmlhttprequest.js","../../node_modules/engine.io-parser/lib/commons.js","../../node_modules/engine.io-parser/lib/encodePacket.browser.js","../../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../../node_modules/engine.io-parser/lib/decodePacket.browser.js","../../node_modules/engine.io-parser/lib/index.js","../../node_modules/component-emitter/index.js","../../node_modules/engine.io-client/lib/transport.js","../../node_modules/parseqs/index.js","../../node_modules/yeast/index.js","../../node_modules/engine.io-client/lib/transports/polling.js","../../node_modules/engine.io-client/lib/util.js","../../node_modules/engine.io-client/lib/transports/polling-xhr.js","../../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../../node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js","../../node_modules/engine.io-client/lib/transports/websocket.js","../../node_modules/engine.io-client/lib/transports/index.js","../../node_modules/engine.io-client/lib/socket.js","../../node_modules/engine.io-client/lib/index.js","../../node_modules/socket.io-parser/dist/is-binary.js","../../node_modules/socket.io-parser/dist/binary.js","../../node_modules/socket.io-parser/dist/index.js","../../node_modules/socket.io-client/build/on.js","../../node_modules/socket.io-client/build/socket.js","../../node_modules/backo2/index.js","../../node_modules/socket.io-client/build/manager.js","../../node_modules/socket.io-client/build/index.js","../../src/lib/Scheduler.js","../../src/syncStrategies/SyncStrategy.js","../../src/syncStrategies/InterpolateStrategy.js","../../src/syncStrategies/ExtrapolateStrategy.js","../../src/syncStrategies/FrameSyncStrategy.js","../../src/Synchronizer.js","../../src/serialize/Serializer.js","../../src/network/NetworkMonitor.js","../../src/network/NetworkedEventFactory.js","../../src/network/NetworkedEventCollection.js","../../src/network/NetworkTransmitter.js","../../src/ClientEngine.js","../../src/controls/KeyboardControls.js","../../src/render/Renderer.js","../../src/render/aframe/system.js","../../src/render/AFrameRenderer.js","../../node_modules/mkdirp/index.js","../../src/ServerEngine.js"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","/**\n * This class implements a singleton game world instance, created by Lance.\n * It represents an instance of the game world, and includes all the game objects.\n * It is the state of the game.\n */\nimport { v4 as uuidv4 } from 'uuid';\n\nclass GameWorld {\n\n    /**\n     * Constructor of the World instance.  Invoked by Lance on startup.\n     *\n     * @hideconstructor\n     */\n    constructor() {\n        this.stepCount = 0;\n        this.objects = {};\n        this.playerCount = 0;\n        this.idCount = 0;\n        this.groups = new Map()\n    }\n\n    get size() {\n        return Object.keys(this.objects).length\n    }\n\n    /**\n     * Gets a new, fresh and unused id that can be used for a new object\n     * @private\n     * @return {Number} the new id\n     */\n    getNewId() {\n        return uuidv4();\n    }\n\n    /**\n     * Returns all the game world objects which match a criteria\n     * @param {Object} query The query object\n     * @param {Object} [query.id] object id\n     * @param {Object} [query.playerId] player id\n     * @param {Class} [query.instanceType] matches whether `object instanceof instanceType`\n     * @param {Array} [query.components] An array of component names\n     * @param {Boolean} [query.returnSingle] Return the first object matched\n     * @return {Array | Object} All game objects which match all the query parameters, or the first match if returnSingle was specified\n     */\n    queryObjects(query) {\n        let queriedObjects = [];\n\n        // todo this is currently a somewhat inefficient implementation for API testing purposes.\n        // It should be implemented with cached dictionaries like in nano-ecs\n        this.forEachObject((id, object) => {\n            let conditions = [];\n\n            // object id condition\n            conditions.push(!('id' in query) || query.id !== null && object.id === query.id);\n\n            // player id condition\n            conditions.push(!('playerId' in query) || query.playerId !== null && object.playerId === query.playerId);\n\n            // instance type conditio\n            conditions.push(!('instanceType' in query) || query.instanceType !== null && object instanceof query.instanceType);\n\n            // components conditions\n            if ('components' in query) {\n                query.components.forEach(componentClass => {\n                    conditions.push(object.hasComponent(componentClass));\n                });\n            }\n\n            // all conditions are true, object is qualified for the query\n            if (conditions.every(value => value)) {\n                queriedObjects.push(object);\n                if (query.returnSingle) return false;\n            }\n        });\n\n        // return a single object or null\n        if (query.returnSingle) {\n            return queriedObjects.length > 0 ? queriedObjects[0] : null;\n        }\n\n        return queriedObjects;\n    }\n\n    /**\n     * Returns The first game object encountered which matches a criteria.\n     * Syntactic sugar for {@link queryObjects} with `returnSingle: true`\n     * @param {Object} query See queryObjects\n     * @return {Object} The game object, if found\n     */\n    queryObject(query) {\n        return this.queryObjects(Object.assign(query, {\n            returnSingle: true\n        }));\n    }\n\n    has(id) {\n        return !!this.objects[id]\n    }\n\n    getObject(id) {\n        if (typeof id != 'string') {\n            id = id.id\n        }\n        return this.objects[id]\n    }\n\n    getObjectsOfGroup(groupName) {\n        return this.groups.get(groupName).collections.map(id => this.getObject(id))\n    }\n\n    /**\n     * Add an object to the game world\n     * @private\n     * @param {Object} object object to add\n     */\n    addObject(object) {\n        this.objects[object.id] = object;\n    }\n\n    addObjectInGroup(object, groupName) {\n        if (!this.groups.has(groupName)) {\n            this.addGroup(groupName)\n        }\n        this.groups.get(groupName).collections.push(object.id)\n    }\n\n    /**\n     * Remove an object from the game world\n     * @private\n     * @param {number} id id of the object to remove\n     */\n    removeObject(id) {\n        const groupsDeleted = []\n        this.groups.forEach((group) => {\n            const isDeleted = this.removeObjectOfGroup(group.groupName, id)\n            if (isDeleted) groupsDeleted.push(group.groupName)\n        })\n        delete this.objects[id];\n        return groupsDeleted\n    }\n\n    /**\n     * World object iterator.\n     * Invoke callback(objId, obj) for each object\n     *\n     * @param {function} callback function receives id and object. If callback returns false, the iteration will cease\n     */\n    forEachObject(callback) {\n        for (let id of Object.keys(this.objects)) {\n            let returnValue = callback(id, this.objects[id]);  // TODO: the key should be Number(id)\n            if (returnValue === false) break;\n        }\n    }\n\n    forEach(callback) {\n        for (let id in this.objects) {\n            callback(this.objects[id], id)\n        }\n    }\n\n    addGroup(groupName, options = {}) {\n        if (this.groups.has(groupName)) {\n            const meta = this.groups.get(groupName)\n            this.groups.set(groupName, {\n                ...meta,\n                ...options\n            })\n        }\n        else {\n            this.groups.set(groupName, {\n                collections: [],\n                requestImmediateSync: false,\n                requestFullSync: false,\n                syncCounter: 0,\n                groupName,\n                ...options\n            })\n        }\n        if (this.onAddGroup) this.onAddGroup(groupName)\n    }\n\n    removeGroup(groupName) {\n        this.groups.delete(groupName)\n        if (this.onRemoveGroup) this.onRemoveGroup(groupName)\n    }\n\n    removeObjectOfGroup(groupName, id) {\n        const group = this.groups.get(groupName)\n        let isDeleted = false\n        const collections = group.collections.filter(objId => {\n            if (objId != id) {\n                return true\n            }\n            else {\n                isDeleted = true\n                return false\n            }\n        })\n        if (collections.length == 0) {\n            this.removeGroup(groupName)\n        }\n        else {\n            this.groups.set(groupName, {\n                ...group,\n                collections\n            }) \n        }\n        return isDeleted\n    }\n\n}\n\nexport default GameWorld;\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn (obj.foo + obj.bar + obj.trzy) === \"razdwatrzy\";\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) {\n return (val !== _undefined) && (val !== null);\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src /*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? Object.assign\n\t: require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1 /*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn (str.contains(\"dwa\") === true) && (str.contains(\"foo\") === false);\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? String.prototype.contains\n\t: require(\"./shim\");\n","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","// TODO: needs documentation\n// I think the API could be simpler\n//   - Timer.run(waitSteps, cb)\n//   - Timer.repeat(waitSteps, count, cb) // count=null=>forever\n//   - Timer.cancel(cb)\nexport default class Timer {\n\n    constructor() {\n        this.currentTime = 0;\n        this.isActive = false;\n        this.idCounter = 0;\n\n        this.events = {};\n    }\n\n    play() {\n        this.isActive = true;\n    }\n\n    tick() {\n        let event;\n        let eventId;\n\n        if (this.isActive) {\n            this.currentTime++;\n\n            for (eventId in this.events) {\n                event = this.events[eventId];\n                if (event) {\n\n                    if (event.type == 'repeat') {\n                        if ((this.currentTime - event.startOffset) % event.time == 0) {\n                            event.callback.apply(event.thisContext, event.args);\n                        }\n                    }\n                    if (event.type == 'single') {\n                        if ((this.currentTime - event.startOffset) % event.time == 0) {\n                            event.callback.apply(event.thisContext, event.args);\n                            event.destroy();\n                        }\n                    }\n\n                }\n\n            }\n        }\n    }\n\n    destroyEvent(eventId) {\n        delete this.events[eventId];\n    }\n\n    loop(time, callback) {\n        let timerEvent = new TimerEvent(this,\n            TimerEvent.TYPES.repeat,\n            time,\n            callback\n        );\n\n        this.events[timerEvent.id] = timerEvent;\n\n        return timerEvent;\n    }\n\n    add(time, callback, thisContext, args) {\n        let timerEvent = new TimerEvent(this,\n            TimerEvent.TYPES.single,\n            time,\n            callback,\n            thisContext,\n            args\n        );\n\n        this.events[timerEvent.id] = timerEvent;\n        return timerEvent;\n    }\n\n    // todo implement timer delete all events\n\n    destroy(id) {\n        delete this.events[id];\n    }\n}\n\n// timer event\nclass TimerEvent {\n    constructor(timer, type, time, callback, thisContext, args) {\n        this.id = ++timer.idCounter;\n        this.timer = timer;\n        this.type = type;\n        this.time = time;\n        this.callback = callback;\n        this.startOffset = timer.currentTime;\n        this.thisContext = thisContext;\n        this.args = args;\n\n        this.destroy = function() {\n            this.timer.destroy(this.id);\n        };\n    }\n}\n\nTimerEvent.TYPES = {\n    repeat: 'repeat',\n    single: 'single'\n};\n","/**\n * Tracing Services.\n * Use the trace functions to trace game state.  Turn on tracing by\n * specifying the minimum trace level which should be recorded.  For\n * example, setting traceLevel to Trace.TRACE_INFO will cause info,\n * warn, and error traces to be recorded.\n */\nclass Trace {\n\n    constructor(options) {\n\n        this.options = Object.assign({\n            traceLevel: this.TRACE_DEBUG\n        }, options);\n\n        this.traceBuffer = [];\n        this.step = 'initializing';\n\n        // syntactic sugar functions\n        this.error = this.trace.bind(this, Trace.TRACE_ERROR);\n        this.warn = this.trace.bind(this, Trace.TRACE_WARN);\n        this.info = this.trace.bind(this, Trace.TRACE_INFO);\n        this.debug = this.trace.bind(this, Trace.TRACE_DEBUG);\n        this.trace = this.trace.bind(this, Trace.TRACE_ALL);\n    }\n\n    /**\n     * Include all trace levels.\n     * @memberof Trace\n     * @member {Number} TRACE_ALL\n     */\n    static get TRACE_ALL() { return 0; }\n\n     /**\n      * Include debug traces and higher.\n      * @memberof Trace\n      * @member {Number} TRACE_DEBUG\n      */\n    static get TRACE_DEBUG() { return 1; }\n\n     /**\n      * Include info traces and higher.\n      * @memberof Trace\n      * @member {Number} TRACE_INFO\n      */\n    static get TRACE_INFO() { return 2; }\n\n     /**\n      * Include warn traces and higher.\n      * @memberof Trace\n      * @member {Number} TRACE_WARN\n      */\n    static get TRACE_WARN() { return 3; }\n\n     /**\n      * Include error traces and higher.\n      * @memberof Trace\n      * @member {Number} TRACE_ERROR\n      */\n    static get TRACE_ERROR() { return 4; }\n\n     /**\n      * Disable all tracing.\n      * @memberof Trace\n      * @member {Number} TRACE_NONE\n      */\n    static get TRACE_NONE() { return 1000; }\n\n    trace(level, dataCB) {\n\n         // all traces must be functions which return strings\n        if (typeof dataCB !== 'function') {\n            throw new Error(`Lance trace was called but instead of passing a function, it received a [${typeof dataCB}]`);\n        }\n\n        if (level < this.options.traceLevel)\n            return;\n\n        this.traceBuffer.push({ data: dataCB(), level, step: this.step, time: new Date() });\n    }\n\n    rotate() {\n        let buffer = this.traceBuffer;\n        this.traceBuffer = [];\n        return buffer;\n    }\n\n    get length() {\n        return this.traceBuffer.length;\n    }\n\n    setStep(s) {\n        this.step = s;\n    }\n}\n\nexport default Trace;\n","import GameWorld from './GameWorld';\nimport EventEmitter from 'event-emitter';\nimport Timer from './game/Timer';\nimport Trace from './lib/Trace';\n\n/**\n * The GameEngine contains the game logic.  Extend this class\n * to implement game mechanics.  The GameEngine derived\n * instance runs once on the server, where the final decisions\n * are always taken, and one instance will run on each client as well,\n * where the client emulates what it expects to be happening\n * on the server.\n *\n * The game engine's logic must listen to user inputs and\n * act on these inputs to change the game state.  For example,\n * the game engine listens to controller/keyboard inputs to infer\n * movement for the player/ship/first-person.  The game engine listens\n * to clicks, button-presses to infer firing, etc..\n *\n * Note that the game engine runs on both the server and on the\n * clients - but the server decisions always have the final say,\n * and therefore clients must resolve server updates which conflict\n * with client-side predictions.\n */\nclass GameEngine {\n\n    /**\n      * Create a game engine instance.  This needs to happen\n      * once on the server, and once on each client.\n      *\n      * @param {Object} options - options object\n      * @param {Number} options.traceLevel - the trace level.\n      */\n    constructor(options) {\n\n        // place the game engine in the LANCE globals\n        const isServerSide = (typeof window === 'undefined');\n        const glob = isServerSide ? global : window;\n        glob.LANCE = { gameEngine: this };\n\n        // set options\n        const defaultOpts = { traceLevel: Trace.TRACE_NONE };\n        if (!isServerSide) defaultOpts.clientIDSpace = 1000000;\n        this.options = Object.assign(defaultOpts, options);\n\n        /**\n         * client's player ID, as a string. If running on the client, this is set at runtime by the clientEngine\n         * @member {String}\n         */\n        this.playerId = NaN;\n\n        // set up event emitting and interface\n        let eventEmitter = this.options.eventEmitter;\n        if (typeof eventEmitter === 'undefined')\n            eventEmitter = new EventEmitter();\n\n        /**\n         * Register a handler for an event\n         *\n         * @method on\n         * @memberof GameEngine\n         * @instance\n         * @param {String} eventName - name of the event\n         * @param {Function} eventHandler - handler function\n         */\n        this.on = eventEmitter.on;\n\n        /**\n         * Register a handler for an event, called just once (if at all)\n         *\n         * @method once\n         * @memberof GameEngine\n         * @instance\n         * @param {String} eventName - name of the event\n         * @param {Function} eventHandler - handler function\n         */\n        this.once = eventEmitter.once;\n\n        /**\n         * Remove a handler\n         *\n         * @method removeListener\n         * @memberof GameEngine\n         * @instance\n         * @param {String} eventName - name of the event\n         * @param {Function} eventHandler - handler function\n         */\n        this.removeListener = eventEmitter.off;\n        this.off = eventEmitter.off;\n\n        this.emit = eventEmitter.emit;\n\n        // set up trace\n        this.trace = new Trace({ traceLevel: this.options.traceLevel });\n    }\n\n    findLocalShadow(serverObj) {\n\n        for (let localId of Object.keys(this.world.objects)) {\n            if (localId < this.options.clientIDSpace) continue;\n            let localObj = this.world.objects[localId];\n            if (localObj.hasOwnProperty('inputId') && localObj.inputId === serverObj.inputId)\n                return localObj;\n        }\n\n        return null;\n    }\n\n    initWorld(worldSettings) {\n\n        this.world = new GameWorld();\n\n        // on the client we have a different ID space\n        if (this.options.clientIDSpace) {\n            this.world.idCount = this.options.clientIDSpace;\n        }\n\n        /**\n        * The worldSettings defines the game world constants, such\n        * as width, height, depth, etc. such that all other classes\n        * can reference these values.\n        * @member {Object} worldSettings\n        * @memberof GameEngine\n        */\n        this.worldSettings = Object.assign({}, worldSettings);\n    }\n\n    /**\n      * Start the game. This method runs on both server\n      * and client. Extending the start method is useful\n      * for setting up the game's worldSettings attribute,\n      * and registering methods on the event handler.\n      */\n    start() {\n        this.trace.info(() => '========== game engine started ==========');\n        this.initWorld();\n\n        // create the default timer\n        this.timer = new Timer();\n        this.timer.play();\n        this.on('postStep', (step, isReenact) => {\n            if (!isReenact) this.timer.tick();\n        });\n\n        this.emit('start', { timestamp: (new Date()).getTime() });\n    }\n\n    /**\n      * Single game step.\n      *\n      * @param {Boolean} isReenact - is this step a re-enactment of the past.\n      * @param {Number} t - the current time (optional)\n      * @param {Number} dt - elapsed time since last step was called.  (optional)\n      * @param {Boolean} physicsOnly - do a physics step only, no game logic\n      */\n    step(isReenact, t, dt, physicsOnly) {\n        // physics-only step\n        if (physicsOnly) {\n            if (dt) dt /= 1000; // physics engines work in seconds\n            this.physicsEngine.step(dt, objectFilter);\n            return;\n        }\n\n        // emit preStep event\n        if (isReenact === undefined)\n            throw new Error('game engine does not forward argument isReenact to super class');\n\n        isReenact = Boolean(isReenact);\n        let step = ++this.world.stepCount;\n        let clientIDSpace = this.options.clientIDSpace;\n        this.emit('preStep', { step, isReenact, dt });\n\n        // skip physics for shadow objects during re-enactment\n        function objectFilter(o) {\n            return !isReenact || o.id < clientIDSpace;\n        }\n\n        // physics step\n        if (this.physicsEngine && !this.ignorePhysics) {\n            if (dt) dt /= 1000; // physics engines work in seconds\n            this.physicsEngine.step(dt, objectFilter);\n        }\n\n        // for each object\n        // - apply incremental bending\n        // - refresh object positions after physics\n        this.world.forEachObject((id, o) => {\n            if (typeof o.refreshFromPhysics === 'function')\n                o.refreshFromPhysics();\n            this.trace.trace(() => `object[${id}] after ${isReenact ? 'reenact' : 'step'} : ${o.toString()}`);\n        });\n\n        // emit postStep event\n        this.emit('postStep', { step, isReenact });\n    }\n\n    /**\n     * Add object to the game world.\n     * On the client side, the object may not be created, if the server copy\n     * of this object is already in the game world.  This could happen when the client\n     * is using delayed-input, and the RTT is very low.\n     *\n     * @param {Object} object - the object.\n     * @return {Object} the final object.\n     */\n    addObjectToWorld(object) {\n\n        // if we are asked to create a local shadow object\n        // the server copy may already have arrived.\n        if (object.id >= this.options.clientIDSpace) {\n            let serverCopyArrived = false;\n            this.world.forEachObject((id, o) => {\n                if (o.hasOwnProperty('inputId') && o.inputId === object.inputId) {\n                    serverCopyArrived = true;\n                    return false;\n                }\n            });\n            if (serverCopyArrived) {\n                this.trace.info(() => `========== shadow object NOT added ${object.toString()} ==========`);\n                return null;\n            }\n        }\n\n        this.world.addObject(object)\n\n        // tell the object to join the game, by creating\n        // its corresponding physical entities and renderer entities.\n        if (typeof object.onAddToWorld === 'function')\n            object.onAddToWorld(this);\n\n        this.emit('objectAdded', object);\n        this.trace.info(() => `========== object added ${object.toString()} ==========`);\n\n        return object;\n    }\n\n    /**\n     * Override this function to implement input handling.\n     * This method will be called on the specific client where the\n     * input was received, and will also be called on the server\n     * when the input reaches the server.  The client does not call this\n     * method directly, rather the client calls {@link ClientEngine#sendInput}\n     * so that the input is sent to both server and client, and so that\n     * the input is delayed artificially if so configured.\n     *\n     * The input is described by a short string, and is given an index.\n     * The index is used internally to keep track of inputs which have already been applied\n     * on the client during synchronization.  The input is also associated with\n     * the ID of a player.\n     *\n     * @param {Object} inputDesc - input descriptor object\n     * @param {String} inputDesc.input - describe the input (e.g. \"up\", \"down\", \"fire\")\n     * @param {Number} inputDesc.messageIndex - input identifier\n     * @param {Number} inputDesc.step - the step on which this input occurred\n     * @param {Number} playerId - the player ID\n     * @param {Boolean} isServer - indicate if this function is being called on the server side\n     */\n    processInput(inputDesc, playerId, isServer) {\n        this.trace.info(() => `game engine processing input[${inputDesc.messageIndex}] <${inputDesc.input}> from playerId ${playerId}`);\n    }\n\n    /**\n     * Remove an object from the game world.\n     *\n     * @param {Object|String} objectId - the object or object ID\n     */\n    removeObjectFromWorld(objectId) {\n\n        if (typeof objectId === 'object') objectId = objectId.id;\n        let object = this.world.objects[objectId];\n\n        if (!object) {\n            throw new Error(`Game attempted to remove a game object which doesn't (or never did) exist, id=${objectId}`);\n        }\n        this.trace.info(() => `========== destroying object ${object.toString()} ==========`);\n\n        /*if (typeof object.onRemoveFromWorld === 'function')\n            object.onRemoveFromWorld(this);\n\n        const groups = this.world.removeObject(objectId);\n        this.emit('objectDestroyed', { object, groups });*/\n        \n    }\n\n    /**\n     * Check if a given object is owned by the player on this client\n     *\n     * @param {Object} object the game object to check\n     * @return {Boolean} true if the game object is owned by the player on this client\n     */\n    isOwnedByPlayer(object) {\n        return (object.playerId == this.playerId);\n    }\n\n    /**\n     * Register Game Object Classes\n     *\n     * @example\n     * registerClasses(serializer) {\n     *   serializer.registerClass(Paddle);\n     *   serializer.registerClass(Ball);\n     * }\n     *\n     * @param {Serializer} serializer - the serializer\n     */\n    registerClasses(serializer) {\n    }\n\n    /**\n     * Decide whether the player game is over by returning an Object, need to be implemented\n     *\n     * @return {Object} truthful if the game is over for the player and the object is returned as GameOver data\n     */\n    getPlayerGameOverResult() {\n        return null;\n    }\n}\n\n/**\n * EVENTS\n */\n\n/**\n * Marks the beginning of a new game step\n *\n * @event GameEngine#preStep\n * @param {Number} stepNumber - the step number\n * @param {Boolean} isReenact - is this step a re-enactment\n */\n\n/**\n * Marks the end of a game step\n *\n * @event GameEngine#postStep\n * @param {Number} stepNumber - the step number\n * @param {Boolean} isReenact - is this step a re-enactment\n */\n\n/**\n * An object has been added to the world\n *\n * @event GameEngine#objectAdded\n * @param {Object} obj - the new object\n */\n\n/**\n * An object has been removed from the world\n *\n * @event GameEngine#objectDestroyed\n * @param {Object} obj - the object\n */\n\n/**\n * A player has joined\n *\n * @event GameEngine#playerJoined\n * @param {Number} joinTime - epoch of join time\n * @param {Object} playerDesc - player descriptor\n * @param {String} playerDesc.playerId - the player ID\n */\n\n/**\n * A player has left\n *\n * @event GameEngine#playerDisconnected\n * @param {Number} joinTime - epoch of join time\n * @param {Number} disconnectTime - epoch of disconnect time\n * @param {Object} playerDesc - player descriptor\n * @param {String} playerDesc.playerId - the player ID\n */\n\n/**\n * A player has joined on the server\n *\n * @event GameEngine#server__playerJoined\n * @param {Number} joinTime - epoch of join time\n * @param {Object} playerDesc - player descriptor\n * @param {String} playerDesc.playerId - the player ID\n */\n\n/**\n  * A player has left on the server\n  *\n  * @event GameEngine#server__playerDisconnected\n  * @param {Number} joinTime - epoch of join time\n  * @param {Number} disconnectTime - epoch of disconnect time\n  * @param {Object} playerDesc - player descriptor\n  * @param {String} playerDesc.playerId - the player ID\n  */\n\n/**\n * A synchronization update arrived from the server\n *\n * @event GameEngine#syncReceived\n * @param {Object} sync - the synchronization object\n */\n\n /**\n  * Marks the beginning of a game step on the client\n  *\n  * @event GameEngine#client__preStep\n  */\n\n /**\n  * Marks the end of a game step on the client\n  *\n  * @event GameEngine#client__postStep\n  */\n\n/**\n * An input needs to be handled.  Emitted just before the GameEngine\n * method processInput is invoked.\n *\n * @event GameEngine#processInput\n * @param {Object} input - input descriptor object\n * @param {String} input.input - describe the input (e.g. \"up\", \"down\", \"fire\")\n * @param {Number} input.messageIndex - input identifier\n * @param {Object} input.options - the object which was passed as SendInput's InputOptions parameter\n * @param {Number} input.step - input execution step\n * @param {Number} playerId - the player ID\n */\n\n/**\n * An input needs to be handled.\n * This event is emitted on the server only, just before the\n * general processInput event.\n *\n * @event GameEngine#server__processInput\n * @param {Object} input - input descriptor object\n * @param {String} input.input - describe the input (e.g. \"up\", \"down\", \"fire\")\n * @param {Number} input.messageIndex - input identifier\n * @param {Object} input.options - the object which was passed as SendInput's InputOptions parameter\n * @param {Number} input.step - input execution step\n * @param {Number} playerId - the player ID\n */\n\n /**\n  * Client moved from one room to another\n  *\n  * @event GameEngine#server__roomUpdate\n  * @param {Number} playerId - the player ID\n  * @param {String} from - the room from which the client came\n  * @param {String} to - the room to which the client went\n  */\n\n/**\n * An input needs to be handled.\n * This event is emitted on the client only, just before the\n * general processInput event.\n *\n * @event GameEngine#client__processInput\n * @param {Object} input - input descriptor object\n * @param {String} input.input - describe the input (e.g. \"up\", \"down\", \"fire\")\n * @param {Number} input.messageIndex - input identifier\n * @param {Object} input.options - the object which was passed as SendInput's InputOptions parameter\n * @param {Number} input.step - input execution step\n * @param {Number} playerId - the player ID\n */\n\n/**\n * Client received a sync from the server\n *\n * @event GameEngine#client__syncReceived\n * @param {Object} sync - sync from the server\n * @param {Array} syncEvents - array of events in the sync\n * @param {Number} maxStepCount - highest step in the sync\n */\n\n /**\n  * Client moved from one room to another\n  *\n  * @event GameEngine#client__roomUpdate\n  * @param {Number} playerId - the player ID\n  * @param {String} from - the room from which the client came\n  * @param {String} to - the room to which the client went\n  */\n\n /**\n  * Client reset the world step\n  *\n  * @event GameEngine#client__stepReset\n  * @param {Object} resetDesc - sync from the server\n  * @param {Number} oldStep - the old step count\n  * @param {Number} newStep - the new step count\n  */\n\n/**\n * Marks the beginning of a game step on the server\n *\n * @event GameEngine#server__preStep\n * @param {Number} stepNumber - the step number\n */\n\n/**\n * Marks the end of a game step on the server\n *\n * @event GameEngine#server__postStep\n * @param {Number} stepNumber - the step number\n */\n\n/**\n * User input received on the server\n *\n * @event GameEngine#server__inputReceived\n * @param {Object} input - input descriptor\n * @param {Object} input.data - input descriptor\n * @param {String} input.playerId - player that sent the input\n */\n\n /**\n  * Report slow frame rate on the browser.\n  * The browser did not achieve a reasonable frame rate\n  *\n  * @event GameEngine#client__slowFrameRate\n  */\n\n  /**\n   * server has started\n   *\n   * @event GameEngine#start\n   * @param {Number} timestamp - UTC epoch of start time\n   */\n\n// TODO: the declaration \"export default\" could be done as part of the class\n// declaration up above, but the current version of jsdoc doesn't support this.\n// when jsdoc is fixed, move this descriptor back to the class declaration,\n// in all relevant files (12 files)\n// see: https://github.com/jsdoc3/jsdoc/issues/1132\nexport default GameEngine;\n","// The base Physics Engine class defines the expected interface\n// for all physics engines\nexport default class PhysicsEngine {\n\n    constructor(options) {\n        this.options = options;\n        this.gameEngine = options.gameEngine;\n\n        if (!options.gameEngine) {\n            console.warn('Physics engine initialized without gameEngine!');\n        }\n    }\n\n    /**\n     * A single Physics step.\n     *\n     * @param {Number} dt - time elapsed since last step\n     * @param {Function} objectFilter - a test function which filters which objects should move\n     */\n    step(dt, objectFilter) {}\n\n}\n","export default class Utils {\n\n    static hashStr(str, bits) {\n        let hash = 5381;\n        let i = str.length;\n        bits = bits ? bits : 8;\n\n        while (i) {\n            hash = (hash * 33) ^ str.charCodeAt(--i);\n        }\n        hash = hash >>> 0;\n        hash = hash % (Math.pow(2, bits) - 1);\n\n        // JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n        // integers. Since we want the results to be always positive, convert the\n        // signed int to an unsigned by doing an unsigned bitshift. */\n        return hash;\n    }\n\n    static arrayBuffersEqual(buf1, buf2) {\n        if (buf1.byteLength !== buf2.byteLength) return false;\n        let dv1 = new Int8Array(buf1);\n        let dv2 = new Int8Array(buf2);\n        for (let i = 0; i !== buf1.byteLength; i++) {\n            if (dv1[i] !== dv2[i]) return false;\n        }\n        return true;\n    }\n\n    static httpGetPromise(url) {\n        return new Promise((resolve, reject) => {\n            let req = new XMLHttpRequest();\n            req.open('GET', url, true);\n            req.onload = () => {\n                if (req.status >= 200 && req.status < 400) resolve(JSON.parse(req.responseText));\n                else reject();\n            };\n            req.onerror = () => {};\n            req.send();\n        });\n    }\n\n    static generateUID() {\n        var firstPart = (Math.random() * 46656) | 0;\n        var secondPart = (Math.random() * 46656) | 0;\n        firstPart = (\"000\" + firstPart.toString(36)).slice(-3);\n        secondPart = (\"000\" + secondPart.toString(36)).slice(-3);\n        return firstPart + secondPart;\n    }\n}","\n/**\n * The BaseTypes class defines the base types used in Lance.\n * These are the types which can be used to define an object's netscheme attributes,\n * which can be serialized by lance.\n * @example\n *     static get netScheme() {\n *       return {\n *             strength: { type: BaseTypes.TYPES.FLOAT32 },\n *             shield: { type: BaseTypes.TYPES.INT8 },\n *             name: { type: BaseTypes.TYPES.STRING },\n *             backpack: { type: BaseTypes.TYPES.CLASSINSTANCE },\n *             coins: {\n *                 type: BaseTypes.TYPES.LIST,\n *                 itemType: BaseTypes.TYPES.UINT8\n *             }\n *         };\n *     }\n */\nclass BaseTypes {}\n\n/**\n * @type {object}\n * @property {string} FLOAT32 Seriablizable float\n * @property {string} INT32 Seriablizable 32-bit integer\n * @property {string} INT16 Seriablizable 16-bit integer\n * @property {string} INT8 Seriablizable 8-bit integer\n * @property {string} UINT8 Seriablizable unsigned 8-bit integer\n * @property {string} STRING Seriablizable string\n * @property {string} CLASSINSTANCE Seriablizable class. Make sure you register all the classes included in this way.\n * @property {string} LIST Seriablizable list.  In the netScheme definition, if an attribute is defined as a list, the itemType should also be defined.\n */\nBaseTypes.TYPES = {\n\n  /**\n   * Seriablizable float\n   * @alias TYPES.FLOAT32\n   * @memberof! BaseTypes#\n   */\n    FLOAT32: 'FLOAT32',\n\n    /**\n     * Seriablizable 32-bit int\n     * @alias TYPES.INT32\n     * @memberof! BaseTypes#\n     */\n    INT32: 'INT32',\n\n    /**\n     * Seriablizable 16-bit int\n     * @alias TYPES.INT16\n     * @memberof! BaseTypes#\n     */\n    INT16: 'INT16',\n\n    /**\n     * Seriablizable 8-bit int\n     * @alias TYPES.INT8\n     * @memberof! BaseTypes#\n     */\n    INT8: 'INT8',\n\n    /**\n     * Seriablizable unsigned 8-bit int\n     * @alias TYPES.UINT8\n     * @memberof! BaseTypes#\n     */\n    UINT8: 'UINT8',\n\n    /**\n     * Seriablizable string\n     * @alias TYPES.STRING\n     * @memberof! BaseTypes#\n     */\n    STRING: 'STRING',\n\n    /**\n     * Seriablizable class.  Make sure you registered the classes included in this way.\n     * @alias TYPES.CLASSINSTANCE\n     * @memberof! BaseTypes#\n     */\n    CLASSINSTANCE: 'CLASSINSTANCE',\n\n    /**\n     * Seriablizable list.\n     * @alias TYPES.LIST\n     * @memberof! BaseTypes#\n     */\n    LIST: 'LIST'\n};\n\nexport default BaseTypes;\n","import Utils from './../lib/Utils';\nimport BaseTypes from './BaseTypes';\n\nclass Serializable {\n    /**\n     *  Class can be serialized using either:\n     * - a class based netScheme\n     * - an instance based netScheme\n     * - completely dynamically (not implemented yet)\n     *\n     * @param {Object} serializer - Serializer instance\n     * @param {Object} [options] - Options object\n     * @param {Object} options.dataBuffer [optional] - Data buffer to write to. If null a new data buffer will be created\n     * @param {Number} options.bufferOffset [optional] - The buffer data offset to start writing at. Default: 0\n     * @param {String} options.dry [optional] - Does not actually write to the buffer (useful to gather serializeable size)\n     * @return {Object} the serialized object.  Contains attributes: dataBuffer - buffer which contains the serialized data;  bufferOffset - offset where the serialized data starts.\n     */\n\n    serialize(serializer, options) {\n        options = Object.assign({\n            bufferOffset: 0\n        }, options);\n\n        let netScheme;\n        let dataBuffer;\n        let dataView;\n        let classId = 0;\n        let bufferOffset = options.bufferOffset;\n        let localBufferOffset = 0; // used for counting the bufferOffset\n\n        // instance classId\n        if (this.classId) {\n            classId = this.classId;\n        } else {\n            classId = Utils.hashStr(this.constructor.name);\n        }\n\n        // instance netScheme\n        if (this.netScheme) {\n            netScheme = this.netScheme;\n        } else if (this.constructor.netScheme) {\n            netScheme = this.constructor.netScheme;\n        } else {\n            // todo define behaviour when a netScheme is undefined\n            console.warn('no netScheme defined! This will result in awful performance');\n        }\n\n        // TODO: currently we serialize every node twice, once to calculate the size\n        //       of the buffers and once to write them out.  This can be reduced to\n        //       a single pass by starting with a large (and static) ArrayBuffer and\n        //       recursively building it up.\n        // buffer has one Uint8Array for class id, then payload\n        if (options.dataBuffer == null && options.dry != true) {\n            let bufferSize = this.serialize(serializer, { dry: true }).bufferOffset;\n            dataBuffer = new ArrayBuffer(bufferSize);\n        } else {\n            dataBuffer = options.dataBuffer;\n        }\n\n        if (options.dry != true) {\n            dataView = new DataView(dataBuffer);\n            // first set the id of the class, so that the deserializer can fetch information about it\n            dataView.setUint8(bufferOffset + localBufferOffset, classId);\n        }\n\n        // advance the offset counter\n        localBufferOffset += Uint8Array.BYTES_PER_ELEMENT;\n\n        if (netScheme) {\n            for (let property of Object.keys(netScheme).sort()) {\n\n                // write the property to buffer\n                if (options.dry != true) {\n                    serializer.writeDataView(dataView, this[property], bufferOffset + localBufferOffset, netScheme[property]);\n                }\n\n                if (netScheme[property].type === BaseTypes.TYPES.STRING) {\n                    // derive the size of the string\n                    localBufferOffset += Uint16Array.BYTES_PER_ELEMENT;\n                    if (this[property] !== null && this[property] !== undefined)\n                        localBufferOffset += this[property].length * Uint16Array.BYTES_PER_ELEMENT;\n                } else if (netScheme[property].type === BaseTypes.TYPES.CLASSINSTANCE) {\n                    // derive the size of the included class\n                    let objectInstanceBufferOffset = this[property].serialize(serializer, { dry: true }).bufferOffset;\n                    localBufferOffset += objectInstanceBufferOffset;\n                } else if (netScheme[property].type === BaseTypes.TYPES.LIST) {\n                    // derive the size of the list\n                    // list starts with number of elements\n                    localBufferOffset += Uint16Array.BYTES_PER_ELEMENT;\n\n                    for (let item of this[property]) {\n                        // todo inelegant, currently doesn't support list of lists\n                        if (netScheme[property].itemType === BaseTypes.TYPES.CLASSINSTANCE) {\n                            let listBufferOffset = item.serialize(serializer, { dry: true }).bufferOffset;\n                            localBufferOffset += listBufferOffset;\n                        } else if (netScheme[property].itemType === BaseTypes.TYPES.STRING) {\n                            // size includes string length plus double-byte characters\n                            localBufferOffset += Uint16Array.BYTES_PER_ELEMENT * (1 + item.length);\n                        } else {\n                            localBufferOffset += serializer.getTypeByteSize(netScheme[property].itemType);\n                        }\n                    }\n                } else {\n                    // advance offset\n                    localBufferOffset += serializer.getTypeByteSize(netScheme[property].type);\n                }\n\n            }\n        } else {\n            // TODO no netScheme, dynamic class\n        }\n\n        return { dataBuffer, bufferOffset: localBufferOffset };\n    }\n\n    // build a clone of this object with pruned strings (if necessary)\n    prunedStringsClone(serializer, prevObject) {\n\n        if (!prevObject) return this;\n        prevObject = serializer.deserialize(prevObject).obj;\n\n        // get list of string properties which changed\n        let netScheme = this.constructor.netScheme;\n        let isString = p => netScheme[p].type === BaseTypes.TYPES.STRING;\n        let hasChanged = p => prevObject[p] !== this[p];\n        let changedStrings = Object.keys(netScheme).filter(isString).filter(hasChanged);\n        if (changedStrings.length == 0) return this;\n\n        // build a clone with pruned strings\n        let prunedCopy = new this.constructor(null, { id: null });\n        for (let p of Object.keys(netScheme))\n            prunedCopy[p] = changedStrings.indexOf(p) < 0 ? this[p] : null;\n\n        return prunedCopy;\n    }\n\n    syncTo(other) {\n        let netScheme = this.constructor.netScheme;\n        for (let p of Object.keys(netScheme)) {\n\n            // ignore classes and lists\n            if (netScheme[p].type === BaseTypes.TYPES.LIST || netScheme[p].type === BaseTypes.TYPES.CLASSINSTANCE)\n                continue;\n\n            // strings might be pruned\n            if (netScheme[p].type === BaseTypes.TYPES.STRING) {\n                if (typeof other[p] === 'string') this[p] = other[p];\n                continue;\n            }\n\n            // all other values are copied\n            this[p] = other[p];\n        }\n    }\n\n}\n\nexport default Serializable;\n","import Serializable from './Serializable';\nimport BaseTypes from './BaseTypes';\n\n/**\n * A TwoVector is a geometric object which is completely described\n * by two values.\n */\nclass TwoVector extends Serializable {\n\n    static get netScheme() {\n        return {\n            x: { type: BaseTypes.TYPES.FLOAT32 },\n            y: { type: BaseTypes.TYPES.FLOAT32 }\n        };\n    }\n\n    /**\n    * Creates an instance of a TwoVector.\n    * @param {Number} x - first value\n    * @param {Number} y - second value\n    * @return {TwoVector} v - the new TwoVector\n    */\n    constructor(x, y) {\n        super();\n        this.x = x;\n        this.y = y;\n\n        return this;\n    }\n\n    /**\n     * Formatted textual description of the TwoVector.\n     * @return {String} description\n     */\n    toString() {\n        function round3(x) { return Math.round(x * 1000) / 1000; }\n        return `[${round3(this.x)}, ${round3(this.y)}]`;\n    }\n\n    /**\n     * Set TwoVector values\n     *\n     * @param {Number} x x-value\n     * @param {Number} y y-value\n     * @return {TwoVector} returns self\n     */\n    set(x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    }\n\n    multiply(other) {\n        this.x *= other.x;\n        this.y *= other.y;\n\n        return this;\n    }\n\n    /**\n     * Multiply this TwoVector by a scalar\n     *\n     * @param {Number} s the scale\n     * @return {TwoVector} returns self\n     */\n    multiplyScalar(s) {\n        this.x *= s;\n        this.y *= s;\n\n        return this;\n    }\n\n    /**\n     * Add other vector to this vector\n     *\n     * @param {TwoVector} other the other vector\n     * @return {TwoVector} returns self\n     */\n    add(other) {\n        this.x += other.x;\n        this.y += other.y;\n\n        return this;\n    }\n\n    /**\n     * Subtract other vector to this vector\n     *\n     * @param {TwoVector} other the other vector\n     * @return {TwoVector} returns self\n     */\n    subtract(other) {\n        this.x -= other.x;\n        this.y -= other.y;\n\n        return this;\n    }\n\n    /**\n     * Get vector length\n     *\n     * @return {Number} length of this vector\n     */\n    length() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n\n    /**\n     * Normalize this vector, in-place\n     *\n     * @return {TwoVector} returns self\n     */\n    normalize() {\n        this.multiplyScalar(1 / this.length());\n        return this;\n    }\n\n    /**\n     * Copy values from another TwoVector into this TwoVector\n     *\n     * @param {TwoVector} sourceObj the other vector\n     * @return {TwoVector} returns self\n     */\n    copy(sourceObj) {\n        this.x = sourceObj.x;\n        this.y = sourceObj.y;\n\n        return this;\n    }\n\n    /**\n     * Create a clone of this vector\n     *\n     * @return {TwoVector} returns clone\n     */\n    clone() {\n        return new TwoVector(this.x, this.y);\n    }\n\n    /**\n     * Apply in-place lerp (linear interpolation) to this TwoVector\n     * towards another TwoVector\n     * @param {TwoVector} target the target vector\n     * @param {Number} p The percentage to interpolate\n     * @return {TwoVector} returns self\n     */\n    lerp(target, p) {\n        this.x += (target.x - this.x) * p;\n        this.y += (target.y - this.y) * p;\n\n        return this;\n    }\n\n    /**\n     * Get bending Delta Vector\n     * towards another TwoVector\n     * @param {TwoVector} target the target vector\n     * @param {Object} options bending options\n     * @param {Number} options.increments number of increments\n     * @param {Number} options.percent The percentage to bend\n     * @param {Number} options.min No less than this value\n     * @param {Number} options.max No more than this value\n     * @return {TwoVector} returns new Incremental Vector\n     */\n    getBendingDelta(target, options) {\n        let increment = target.clone();\n        increment.subtract(this);\n        increment.multiplyScalar(options.percent);\n\n        // check for max case\n        if (((typeof options.max === 'number') && increment.length() > options.max) ||\n            ((typeof options.min === 'number') && increment.length() < options.min)) {\n            return new TwoVector(0, 0);\n        }\n\n        // divide into increments\n        increment.multiplyScalar(1 / options.increments);\n\n        return increment;\n    }\n}\n\nexport default TwoVector;\n","// Hierarchical Spatial Hash Grid: HSHG\n// source: https://gist.github.com/kirbysayshi/1760774\n\n// ---------------------------------------------------------------------\n// GLOBAL FUNCTIONS\n// ---------------------------------------------------------------------\n\n/**\n * Updates every object's position in the grid, but only if\n * the hash value for that object has changed.\n * This method DOES NOT take into account object expansion or\n * contraction, just position, and does not attempt to change\n * the grid the object is currently in; it only (possibly) changes\n * the cell.\n *\n * If the object has significantly changed in size, the best bet is to\n * call removeObject() and addObject() sequentially, outside of the\n * normal update cycle of HSHG.\n *\n * @return  void   desc\n */\nfunction update_RECOMPUTE() {\n\n    var i,\n        obj,\n        grid,\n        meta,\n        objAABB,\n        newObjHash;\n\n    // for each object\n    for (i = 0; i < this._globalObjects.length; i++) {\n        obj = this._globalObjects[i];\n        meta = obj.HSHG;\n        grid = meta.grid;\n\n        // recompute hash\n        objAABB = obj.getAABB();\n        newObjHash = grid.toHash(objAABB.min[0], objAABB.min[1]);\n\n        if (newObjHash !== meta.hash) {\n            // grid position has changed, update!\n            grid.removeObject(obj);\n            grid.addObject(obj, newObjHash);\n        }\n    }\n}\n\n// not implemented yet :)\nfunction update_REMOVEALL() {\n\n}\n\nfunction testAABBOverlap(objA, objB) {\n    var a = objA.getAABB(),\n        b = objB.getAABB();\n\n    // if(a.min[0] > b.max[0] || a.min[1] > b.max[1] || a.min[2] > b.max[2]\n    // || a.max[0] < b.min[0] || a.max[1] < b.min[1] || a.max[2] < b.min[2]){\n\n    if (a.min[0] > b.max[0] || a.min[1] > b.max[1] ||\n        a.max[0] < b.min[0] || a.max[1] < b.min[1]) {\n        return false;\n    }\n    return true;\n\n}\n\nfunction getLongestAABBEdge(min, max) {\n    return Math.max(\n        Math.abs(max[0] - min[0])\n        , Math.abs(max[1] - min[1])\n        // ,Math.abs(max[2] - min[2])\n    );\n}\n\n// ---------------------------------------------------------------------\n// ENTITIES\n// ---------------------------------------------------------------------\n\nfunction HSHG() {\n\n    this.MAX_OBJECT_CELL_DENSITY = 1 / 8; // objects / cells\n    this.INITIAL_GRID_LENGTH = 256; // 16x16\n    this.HIERARCHY_FACTOR = 2;\n    this.HIERARCHY_FACTOR_SQRT = Math.SQRT2;\n    this.UPDATE_METHOD = update_RECOMPUTE; // or update_REMOVEALL\n\n    this._grids = [];\n    this._globalObjects = [];\n}\n\n// HSHG.prototype.init = function(){\n//\tthis._grids = [];\n//\tthis._globalObjects = [];\n// }\n\nHSHG.prototype.addObject = function (obj) {\n    var x, i,\n        cellSize,\n        objAABB = obj.getAABB(),\n        objSize = getLongestAABBEdge(objAABB.min, objAABB.max),\n        oneGrid, newGrid;\n\n    // for HSHG metadata\n    obj.HSHG = {\n        globalObjectsIndex: this._globalObjects.length\n    };\n\n    // add to global object array\n    this._globalObjects.push(obj);\n\n    if (this._grids.length == 0) {\n        // no grids exist yet\n        cellSize = objSize * this.HIERARCHY_FACTOR_SQRT;\n        newGrid = new Grid(cellSize, this.INITIAL_GRID_LENGTH, this);\n        newGrid.initCells();\n        newGrid.addObject(obj);\n\n        this._grids.push(newGrid);\n    } else {\n        x = 0;\n\n        // grids are sorted by cellSize, smallest to largest\n        for (i = 0; i < this._grids.length; i++) {\n            oneGrid = this._grids[i];\n            x = oneGrid.cellSize;\n            if (objSize < x) {\n                x /= this.HIERARCHY_FACTOR;\n                if (objSize < x) {\n                    // find appropriate size\n                    while (objSize < x) {\n                        x /= this.HIERARCHY_FACTOR;\n                    }\n                    newGrid = new Grid(x * this.HIERARCHY_FACTOR, this.INITIAL_GRID_LENGTH, this);\n                    newGrid.initCells();\n                    // assign obj to grid\n                    newGrid.addObject(obj);\n                    // insert grid into list of grids directly before oneGrid\n                    this._grids.splice(i, 0, newGrid);\n                } else {\n                    // insert obj into grid oneGrid\n                    oneGrid.addObject(obj);\n                }\n                return;\n            }\n        }\n\n        while (objSize >= x) {\n            x *= this.HIERARCHY_FACTOR;\n        }\n\n        newGrid = new Grid(x, this.INITIAL_GRID_LENGTH, this);\n        newGrid.initCells();\n        // insert obj into grid\n        newGrid.addObject(obj);\n        // add newGrid as last element in grid list\n        this._grids.push(newGrid);\n    }\n};\n\nHSHG.prototype.removeObject = function (obj) {\n    var meta = obj.HSHG,\n        globalObjectsIndex,\n        replacementObj;\n\n    if (meta === undefined) {\n        throw Error(obj + ' was not in the HSHG.');\n        return;\n    }\n\n    // remove object from global object list\n    globalObjectsIndex = meta.globalObjectsIndex;\n    if (globalObjectsIndex === this._globalObjects.length - 1) {\n        this._globalObjects.pop();\n    } else {\n        replacementObj = this._globalObjects.pop();\n        replacementObj.HSHG.globalObjectsIndex = globalObjectsIndex;\n        this._globalObjects[globalObjectsIndex] = replacementObj;\n    }\n\n    meta.grid.removeObject(obj);\n\n    // remove meta data\n    delete obj.HSHG;\n};\n\nHSHG.prototype.update = function () {\n    this.UPDATE_METHOD.call(this);\n};\n\nHSHG.prototype.queryForCollisionPairs = function (broadOverlapTestCallback) {\n\n    var i, j, k, l, c,\n        grid,\n        cell,\n        objA,\n        objB,\n        offset,\n        adjacentCell,\n        biggerGrid,\n        objAAABB,\n        objAHashInBiggerGrid,\n        possibleCollisions = [];\n\n    // default broad test to internal aabb overlap test\n    let broadOverlapTest = broadOverlapTestCallback || testAABBOverlap;\n\n    // for all grids ordered by cell size ASC\n    for (i = 0; i < this._grids.length; i++) {\n        grid = this._grids[i];\n\n        // for each cell of the grid that is occupied\n        for (j = 0; j < grid.occupiedCells.length; j++) {\n            cell = grid.occupiedCells[j];\n\n            // collide all objects within the occupied cell\n            for (k = 0; k < cell.objectContainer.length; k++) {\n                objA = cell.objectContainer[k];\n                for (l = k + 1; l < cell.objectContainer.length; l++) {\n                    objB = cell.objectContainer[l];\n                    if (broadOverlapTest(objA, objB) === true) {\n                        possibleCollisions.push([objA, objB]);\n                    }\n                }\n            }\n\n            // for the first half of all adjacent cells (offset 4 is the current cell)\n            for (c = 0; c < 4; c++) {\n                offset = cell.neighborOffsetArray[c];\n\n                // if(offset === null) { continue; }\n\n                adjacentCell = grid.allCells[cell.allCellsIndex + offset];\n\n                // collide all objects in cell with adjacent cell\n                for (k = 0; k < cell.objectContainer.length; k++) {\n                    objA = cell.objectContainer[k];\n                    for (l = 0; l < adjacentCell.objectContainer.length; l++) {\n                        objB = adjacentCell.objectContainer[l];\n                        if (broadOverlapTest(objA, objB) === true) {\n                            possibleCollisions.push([objA, objB]);\n                        }\n                    }\n                }\n            }\n        }\n\n        // forall objects that are stored in this grid\n        for (j = 0; j < grid.allObjects.length; j++) {\n            objA = grid.allObjects[j];\n            objAAABB = objA.getAABB();\n\n            // for all grids with cellsize larger than grid\n            for (k = i + 1; k < this._grids.length; k++) {\n                biggerGrid = this._grids[k];\n                objAHashInBiggerGrid = biggerGrid.toHash(objAAABB.min[0], objAAABB.min[1]);\n                cell = biggerGrid.allCells[objAHashInBiggerGrid];\n\n                // check objA against every object in all cells in offset array of cell\n                // for all adjacent cells...\n                for (c = 0; c < cell.neighborOffsetArray.length; c++) {\n                    offset = cell.neighborOffsetArray[c];\n\n                    // if(offset === null) { continue; }\n\n                    adjacentCell = biggerGrid.allCells[cell.allCellsIndex + offset];\n\n                    // for all objects in the adjacent cell...\n                    for (l = 0; l < adjacentCell.objectContainer.length; l++) {\n                        objB = adjacentCell.objectContainer[l];\n                        // test against object A\n                        if (broadOverlapTest(objA, objB) === true) {\n                            possibleCollisions.push([objA, objB]);\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    // return list of object pairs\n    return possibleCollisions;\n};\n\nHSHG.update_RECOMPUTE = update_RECOMPUTE;\nHSHG.update_REMOVEALL = update_REMOVEALL;\n\n/**\n * Grid\n *\n * @constructor\n * @param    int cellSize  the pixel size of each cell of the grid\n * @param    int cellCount  the total number of cells for the grid (width x height)\n * @param    HSHG parentHierarchy    the HSHG to which this grid belongs\n * @return  void\n */\nfunction Grid(cellSize, cellCount, parentHierarchy) {\n    this.cellSize = cellSize;\n    this.inverseCellSize = 1 / cellSize;\n    this.rowColumnCount = ~~Math.sqrt(cellCount);\n    this.xyHashMask = this.rowColumnCount - 1;\n    this.occupiedCells = [];\n    this.allCells = Array(this.rowColumnCount * this.rowColumnCount);\n    this.allObjects = [];\n    this.sharedInnerOffsets = [];\n\n    this._parentHierarchy = parentHierarchy || null;\n}\n\nGrid.prototype.initCells = function () {\n\n    // TODO: inner/unique offset rows 0 and 2 may need to be\n    // swapped due to +y being \"down\" vs \"up\"\n\n    var i,\n        gridLength = this.allCells.length,\n        x, y,\n        wh = this.rowColumnCount,\n        isOnRightEdge, isOnLeftEdge, isOnTopEdge, isOnBottomEdge,\n        innerOffsets = [\n            // y+ down offsets\n            // -1 + -wh, -wh, -wh + 1,\n            // -1, 0, 1,\n            // wh - 1, wh, wh + 1\n\n            // y+ up offsets\n            wh - 1, wh, wh + 1,\n            -1, 0, 1,\n            -1 + -wh, -wh, -wh + 1\n        ],\n        leftOffset, rightOffset, topOffset, bottomOffset,\n        uniqueOffsets = [],\n        cell;\n\n    this.sharedInnerOffsets = innerOffsets;\n\n    // init all cells, creating offset arrays as needed\n\n    for (i = 0; i < gridLength; i++) {\n\n        cell = new Cell();\n        // compute row (y) and column (x) for an index\n        y = ~~(i / this.rowColumnCount);\n        x = ~~(i - (y * this.rowColumnCount));\n\n        // reset / init\n        isOnRightEdge = false;\n        isOnLeftEdge = false;\n        isOnTopEdge = false;\n        isOnBottomEdge = false;\n\n        // right or left edge cell\n        if ((x + 1) % this.rowColumnCount == 0) {\n            isOnRightEdge = true;\n        } else if (x % this.rowColumnCount == 0) {\n            isOnLeftEdge = true;\n        }\n\n        // top or bottom edge cell\n        if ((y + 1) % this.rowColumnCount == 0) {\n            isOnTopEdge = true;\n        } else if (y % this.rowColumnCount == 0) {\n            isOnBottomEdge = true;\n        }\n\n        // if cell is edge cell, use unique offsets, otherwise use inner offsets\n        if (isOnRightEdge || isOnLeftEdge || isOnTopEdge || isOnBottomEdge) {\n\n            // figure out cardinal offsets first\n            rightOffset = isOnRightEdge === true ? -wh + 1 : 1;\n            leftOffset = isOnLeftEdge === true ? wh - 1 : -1;\n            topOffset = isOnTopEdge === true ? -gridLength + wh : wh;\n            bottomOffset = isOnBottomEdge === true ? gridLength - wh : -wh;\n\n            // diagonals are composites of the cardinals\n            uniqueOffsets = [\n                // y+ down offset\n                // leftOffset + bottomOffset, bottomOffset, rightOffset + bottomOffset,\n                // leftOffset, 0, rightOffset,\n                // leftOffset + topOffset, topOffset, rightOffset + topOffset\n\n                // y+ up offset\n                leftOffset + topOffset, topOffset, rightOffset + topOffset,\n                leftOffset, 0, rightOffset,\n                leftOffset + bottomOffset, bottomOffset, rightOffset + bottomOffset\n            ];\n\n            cell.neighborOffsetArray = uniqueOffsets;\n        } else {\n            cell.neighborOffsetArray = this.sharedInnerOffsets;\n        }\n\n        cell.allCellsIndex = i;\n        this.allCells[i] = cell;\n    }\n};\n\nGrid.prototype.toHash = function (x, y, z) {\n    var i, xHash, yHash, zHash;\n\n    if (x < 0) {\n        i = (-x) * this.inverseCellSize;\n        xHash = this.rowColumnCount - 1 - (~~i & this.xyHashMask);\n    } else {\n        i = x * this.inverseCellSize;\n        xHash = ~~i & this.xyHashMask;\n    }\n\n    if (y < 0) {\n        i = (-y) * this.inverseCellSize;\n        yHash = this.rowColumnCount - 1 - (~~i & this.xyHashMask);\n    } else {\n        i = y * this.inverseCellSize;\n        yHash = ~~i & this.xyHashMask;\n    }\n\n    // if(z < 0){\n    //\ti = (-z) * this.inverseCellSize;\n    //\tzHash = this.rowColumnCount - 1 - ( ~~i & this.xyHashMask );\n    // } else {\n    //\ti = z * this.inverseCellSize;\n    //\tzHash = ~~i & this.xyHashMask;\n    // }\n\n    return xHash + yHash * this.rowColumnCount;\n    // + zHash * this.rowColumnCount * this.rowColumnCount;\n};\n\nGrid.prototype.addObject = function (obj, hash) {\n    var objAABB,\n        objHash,\n        targetCell;\n\n    // technically, passing this in this should save some computational effort when updating objects\n    if (hash !== undefined) {\n        objHash = hash;\n    } else {\n        objAABB = obj.getAABB();\n        objHash = this.toHash(objAABB.min[0], objAABB.min[1]);\n    }\n    targetCell = this.allCells[objHash];\n\n    if (targetCell.objectContainer.length === 0) {\n        // insert this cell into occupied cells list\n        targetCell.occupiedCellsIndex = this.occupiedCells.length;\n        this.occupiedCells.push(targetCell);\n    }\n\n    // add meta data to obj, for fast update/removal\n    obj.HSHG.objectContainerIndex = targetCell.objectContainer.length;\n    obj.HSHG.hash = objHash;\n    obj.HSHG.grid = this;\n    obj.HSHG.allGridObjectsIndex = this.allObjects.length;\n    // add obj to cell\n    targetCell.objectContainer.push(obj);\n\n    // we can assume that the targetCell is already a member of the occupied list\n\n    // add to grid-global object list\n    this.allObjects.push(obj);\n\n    // do test for grid density\n    if (this.allObjects.length / this.allCells.length > this._parentHierarchy.MAX_OBJECT_CELL_DENSITY) {\n        // grid must be increased in size\n        this.expandGrid();\n    }\n};\n\nGrid.prototype.removeObject = function (obj) {\n    var meta = obj.HSHG,\n        hash,\n        containerIndex,\n        allGridObjectsIndex,\n        cell,\n        replacementCell,\n        replacementObj;\n\n    hash = meta.hash;\n    containerIndex = meta.objectContainerIndex;\n    allGridObjectsIndex = meta.allGridObjectsIndex;\n    cell = this.allCells[hash];\n\n    // remove object from cell object container\n    if (cell.objectContainer.length === 1) {\n        // this is the last object in the cell, so reset it\n        cell.objectContainer.length = 0;\n\n        // remove cell from occupied list\n        if (cell.occupiedCellsIndex === this.occupiedCells.length - 1) {\n            // special case if the cell is the newest in the list\n            this.occupiedCells.pop();\n        } else {\n            replacementCell = this.occupiedCells.pop();\n            replacementCell.occupiedCellsIndex = cell.occupiedCellsIndex;\n            this.occupiedCells[cell.occupiedCellsIndex] = replacementCell;\n        }\n\n        cell.occupiedCellsIndex = null;\n    } else {\n        // there is more than one object in the container\n        if (containerIndex === cell.objectContainer.length - 1) {\n            // special case if the obj is the newest in the container\n            cell.objectContainer.pop();\n        } else {\n            replacementObj = cell.objectContainer.pop();\n            replacementObj.HSHG.objectContainerIndex = containerIndex;\n            cell.objectContainer[containerIndex] = replacementObj;\n        }\n    }\n\n    // remove object from grid object list\n    if (allGridObjectsIndex === this.allObjects.length - 1) {\n        this.allObjects.pop();\n    } else {\n        replacementObj = this.allObjects.pop();\n        replacementObj.HSHG.allGridObjectsIndex = allGridObjectsIndex;\n        this.allObjects[allGridObjectsIndex] = replacementObj;\n    }\n};\n\nGrid.prototype.expandGrid = function () {\n    var i, j,\n        currentCellCount = this.allCells.length,\n        currentRowColumnCount = this.rowColumnCount,\n        currentXYHashMask = this.xyHashMask,\n\n        newCellCount = currentCellCount * 4, // double each dimension\n        newRowColumnCount = ~~Math.sqrt(newCellCount),\n        newXYHashMask = newRowColumnCount - 1,\n        allObjects = this.allObjects.slice(0), // duplicate array, not objects contained\n        aCell,\n        push = Array.prototype.push;\n\n    // remove all objects\n    for (i = 0; i < allObjects.length; i++) {\n        this.removeObject(allObjects[i]);\n    }\n\n    // reset grid values, set new grid to be 4x larger than last\n    this.rowColumnCount = newRowColumnCount;\n    this.allCells = Array(this.rowColumnCount * this.rowColumnCount);\n    this.xyHashMask = newXYHashMask;\n\n    // initialize new cells\n    this.initCells();\n\n    // re-add all objects to grid\n    for (i = 0; i < allObjects.length; i++) {\n        this.addObject(allObjects[i]);\n    }\n};\n\n/**\n * A cell of the grid\n *\n * @constructor\n * @return  void   desc\n */\nfunction Cell() {\n    this.objectContainer = [];\n    this.neighborOffsetArray;\n    this.occupiedCellsIndex = null;\n    this.allCellsIndex = null;\n}\n\n// ---------------------------------------------------------------------\n// EXPORTS\n// ---------------------------------------------------------------------\n\nHSHG._private = {\n    Grid: Grid,\n    Cell: Cell,\n    testAABBOverlap: testAABBOverlap,\n    getLongestAABBEdge: getLongestAABBEdge\n};\n\nexport default HSHG;\n","import HSHG from './HSHG';\n\n// Collision detection based on Hierarchical Spatial Hash Grid\n// uses this implementation https://gist.github.com/kirbysayshi/1760774\nclass HSHGCollisionDetection {\n\n    constructor(options) {\n        this.options = Object.assign({ COLLISION_DISTANCE: 28 }, options);\n    }\n\n    init(options) {\n        this.gameEngine = options.gameEngine;\n        this.grid = new HSHG();\n        this.previousCollisionPairs = {};\n        this.stepCollidingPairs = {};\n\n        this.gameEngine.on('objectAdded', obj => {\n            // add the gameEngine obj the the spatial grid\n            this.grid.addObject(obj);\n        });\n\n        this.gameEngine.on('objectDestroyed', obj => {\n            // add the gameEngine obj the the spatial grid\n            this.grid.removeObject(obj);\n        });\n    }\n\n    detect() {\n        this.grid.update();\n        this.stepCollidingPairs = this.grid.queryForCollisionPairs().reduce((accumulator, currentValue, i) => {\n            let pairId = getArrayPairId(currentValue);\n            accumulator[pairId] = { o1: currentValue[0], o2: currentValue[1] };\n            return accumulator;\n        }, {});\n\n        for (let pairId of Object.keys(this.previousCollisionPairs)) {\n            let pairObj = this.previousCollisionPairs[pairId];\n\n            // existed in previous pairs, but not during this step: this pair stopped colliding\n            if (pairId in this.stepCollidingPairs === false) {\n                this.gameEngine.emit('collisionStop', pairObj);\n            }\n        }\n\n        for (let pairId of Object.keys(this.stepCollidingPairs)) {\n            let pairObj = this.stepCollidingPairs[pairId];\n\n            // didn't exist in previous pairs, but exists now: this is a new colliding pair\n            if (pairId in this.previousCollisionPairs === false) {\n                this.gameEngine.emit('collisionStart', pairObj);\n            }\n        }\n\n        this.previousCollisionPairs = this.stepCollidingPairs;\n    }\n\n    /**\n     * checks wheter two objects are currently colliding\n     * @param {Object} o1 first object\n     * @param {Object} o2 second object\n     * @return {boolean} are the two objects colliding?\n     */\n    areObjectsColliding(o1, o2) {\n        return getArrayPairId([o1, o2]) in this.stepCollidingPairs;\n    }\n\n}\n\nfunction getArrayPairId(arrayPair) {\n    // make sure to get the same id regardless of object order\n    let sortedArrayPair = arrayPair.slice(0).sort();\n    return sortedArrayPair[0].id + '-' + sortedArrayPair[1].id;\n}\n\nexport default HSHGCollisionDetection;\n","import TwoVector from '../../serialize/TwoVector';\nlet differenceVector = new TwoVector();\n\n// The collision detection of SimplePhysicsEngine is a brute-force approach\nexport default class BruteForceCollisionDetection {\n\n    constructor(options) {\n        this.options = Object.assign({\n            autoResolve: true\n        }, options);\n        this.collisionPairs = {};\n    }\n\n    init(options) {\n        this.gameEngine = options.gameEngine;\n    }\n\n    findCollision(o1, o2) {\n\n        // static objects don't collide\n        if (o1.isStatic && o2.isStatic)\n            return false;\n\n        // allow a collision checker function\n        if (typeof o1.collidesWith === 'function') {\n            if (!o1.collidesWith(o2))\n                return false;\n        }\n\n        // radius-based collision\n        if (this.options.collisionDistance) {\n            differenceVector.copy(o1.position).subtract(o2.position);\n            return differenceVector.length() < this.options.collisionDistance;\n        }\n\n        // check for no-collision first\n        let o1Box = getBox(o1);\n        let o2Box = getBox(o2);\n        if (o1Box.xMin > o2Box.xMax ||\n            o1Box.yMin > o2Box.yMax ||\n            o2Box.xMin > o1Box.xMax ||\n            o2Box.yMin > o1Box.yMax)\n            return false;\n\n        if (!this.options.autoResolve)\n            return true;\n\n        // need to auto-resolve\n        let shiftY1 = o2Box.yMax - o1Box.yMin;\n        let shiftY2 = o1Box.yMax - o2Box.yMin;\n        let shiftX1 = o2Box.xMax - o1Box.xMin;\n        let shiftX2 = o1Box.xMax - o2Box.xMin;\n        let smallestYShift = Math.min(Math.abs(shiftY1), Math.abs(shiftY2));\n        let smallestXShift = Math.min(Math.abs(shiftX1), Math.abs(shiftX2));\n\n        // choose to apply the smallest shift which solves the collision\n        if (smallestYShift < smallestXShift) {\n            if (o1Box.yMin > o2Box.yMin && o1Box.yMin < o2Box.yMax) {\n                if (o2.isStatic) o1.position.y += shiftY1;\n                else if (o1.isStatic) o2.position.y -= shiftY1;\n                else {\n                    o1.position.y += shiftY1 / 2;\n                    o2.position.y -= shiftY1 / 2;\n                }\n            } else if (o1Box.yMax > o2Box.yMin && o1Box.yMax < o2Box.yMax) {\n                if (o2.isStatic) o1.position.y -= shiftY2;\n                else if (o1.isStatic) o2.position.y += shiftY2;\n                else {\n                    o1.position.y -= shiftY2 / 2;\n                    o2.position.y += shiftY2 / 2;\n                }\n            }\n            o1.velocity.y = 0;\n            o2.velocity.y = 0;\n        } else {\n            if (o1Box.xMin > o2Box.xMin && o1Box.xMin < o2Box.xMax) {\n                if (o2.isStatic) o1.position.x += shiftX1;\n                else if (o1.isStatic) o2.position.x -= shiftX1;\n                else {\n                    o1.position.x += shiftX1 / 2;\n                    o2.position.x -= shiftX1 / 2;\n                }\n            } else if (o1Box.xMax > o2Box.xMin && o1Box.xMax < o2Box.xMax) {\n                if (o2.isStatic) o1.position.x -= shiftX2;\n                else if (o1.isStatic) o2.position.x += shiftX2;\n                else {\n                    o1.position.x -= shiftX2 / 2;\n                    o2.position.x += shiftX2 / 2;\n                }\n            }\n            o1.velocity.x = 0;\n            o2.velocity.x = 0;\n        }\n\n        return true;\n    }\n\n    // check if pair (id1, id2) have collided\n    checkPair(id1, id2) {\n        let objects = this.gameEngine.world.objects;\n        let o1 = objects[id1];\n        let o2 = objects[id2];\n\n        // make sure that objects actually exist. might have been destroyed\n        if (!o1 || !o2) return;\n        let pairId = [id1, id2].join(',');\n\n        if (this.findCollision(o1, o2)) {\n            if (!(pairId in this.collisionPairs)) {\n                this.collisionPairs[pairId] = true;\n                this.gameEngine.emit('collisionStart', { o1, o2 });\n            }\n        } else if (pairId in this.collisionPairs) {\n            this.gameEngine.emit('collisionStop', { o1, o2 });\n            delete this.collisionPairs[pairId];\n        }\n    }\n\n    // detect by checking all pairs\n    detect() {\n        let objects = this.gameEngine.world.objects;\n        let keys = Object.keys(objects);\n\n        // delete non existant object pairs\n        for (let pairId in this.collisionPairs)\n            if (this.collisionPairs.hasOwnProperty(pairId))\n                if (keys.indexOf(pairId.split(',')[0]) === -1 || keys.indexOf(pairId.split(',')[1]) === -1)\n                    delete this.collisionPairs[pairId];\n\n        // check all pairs\n        for (let k1 of keys)\n            for (let k2 of keys)\n                if (k2 > k1) this.checkPair(k1, k2);\n    }\n}\n\n// get bounding box of object o\nfunction getBox(o) {\n    return {\n        xMin: o.position.x,\n        xMax: o.position.x + o.width,\n        yMin: o.position.y,\n        yMax: o.position.y + o.height\n    };\n}\n","import PhysicsEngine from './PhysicsEngine';\nimport TwoVector from '../serialize/TwoVector';\nimport HSHGCollisionDetection from './SimplePhysics/HSHGCollisionDetection';\nimport BruteForceCollisionDetection from './SimplePhysics/BruteForceCollisionDetection';\n\nlet dv = new TwoVector();\nlet dx = new TwoVector();\n\n/**\n * SimplePhysicsEngine is a pseudo-physics engine which works with\n * objects of class DynamicObject.\n * The Simple Physics Engine is a \"fake\" physics engine, which is more\n * appropriate for arcade games, and it is sometimes referred to as \"arcade\"\n * physics. For example if a character is standing at the edge of a platform,\n * with only one foot on the platform, it won't fall over. This is a desired\n * game behaviour in platformer games.\n */\n\nclass SimplePhysicsEngine extends PhysicsEngine {\n\n    /**\n    * Creates an instance of the Simple Physics Engine.\n    * @param {Object} options - physics options\n    * @param {Object} options.collisions - collision options\n    * @param {String} options.collisions.type - can be set to \"HSHG\" or \"bruteForce\".  Default is Brute-Force collision detection.\n    * @param {Number} options.collisions.collisionDistance - for brute force, this can be set for a simple distance-based (radius) collision detection.\n    * @param {Boolean} options.collisions.autoResolve - for brute force collision, colliding objects should be moved apart\n    * @param {TwoVector} options.gravity - TwoVector instance which describes gravity, which will be added to the velocity of all objects at every step.  For example TwoVector(0, -0.01)\n    */\n    constructor(options) {\n        super(options);\n\n        // todo does this mean both modules always get loaded?\n        if (options.collisions && options.collisions.type === 'HSHG') {\n            this.collisionDetection = new HSHGCollisionDetection(options.collisions);\n        } else {\n            this.collisionDetection = new BruteForceCollisionDetection(options.collisions);\n        }\n\n        /**\n         * The actor's name.\n         * @memberof SimplePhysicsEngine\n         * @member {TwoVector} gravity affecting all objects\n         */\n        this.gravity = new TwoVector(0, 0);\n\n        if (options.gravity)\n            this.gravity.copy(options.gravity);\n\n        let collisionOptions = Object.assign({ gameEngine: this.gameEngine }, options.collisionOptions);\n        this.collisionDetection.init(collisionOptions);\n    }\n\n    // a single object advances, based on:\n    // isRotatingRight, isRotatingLeft, isAccelerating, current velocity\n    // wrap-around the world if necessary\n    objectStep(o, dt) {\n\n        // calculate factor\n        if (dt === 0)\n            return;\n\n        if (dt)\n            dt /= (1 / 60);\n        else\n            dt = 1;\n\n        // TODO: worldsettings is a hack.  Find all places which use it in all games\n        // and come up with a better solution.  for example an option sent to the physics Engine\n        // with a \"worldWrap:true\" options\n        // replace with a \"worldBounds\" parameter to the PhysicsEngine constructor\n\n        let worldSettings = this.gameEngine.worldSettings;\n\n        // TODO: remove this code in version 4: these attributes are deprecated\n        if (o.isRotatingRight) { o.angle += o.rotationSpeed; }\n        if (o.isRotatingLeft) { o.angle -= o.rotationSpeed; }\n\n        // TODO: remove this code in version 4: these attributes are deprecated\n        if (o.angle >= 360) { o.angle -= 360; }\n        if (o.angle < 0) { o.angle += 360; }\n\n        // TODO: remove this code in version 4: these attributes are deprecated\n        if (o.isAccelerating) {\n            let rad = o.angle * (Math.PI / 180);\n            dv.set(Math.cos(rad), Math.sin(rad)).multiplyScalar(o.acceleration).multiplyScalar(dt);\n            o.velocity.add(dv);\n        }\n\n        // apply gravity\n        if (!o.isStatic) o.velocity.add(this.gravity);\n\n        let velMagnitude = o.velocity.length();\n        if ((o.maxSpeed !== null) && (velMagnitude > o.maxSpeed)) {\n            o.velocity.multiplyScalar(o.maxSpeed / velMagnitude);\n        }\n\n        o.isAccelerating = false;\n        o.isRotatingLeft = false;\n        o.isRotatingRight = false;\n\n        dx.copy(o.velocity).multiplyScalar(dt);\n        o.position.add(dx);\n\n        o.velocity.multiply(o.friction);\n\n        // wrap around the world edges\n        if (worldSettings.worldWrap) {\n            if (o.position.x >= worldSettings.width) { o.position.x -= worldSettings.width; }\n            if (o.position.y >= worldSettings.height) { o.position.y -= worldSettings.height; }\n            if (o.position.x < 0) { o.position.x += worldSettings.width; }\n            if (o.position.y < 0) { o.position.y += worldSettings.height; }\n        }\n    }\n\n    // entry point for a single step of the Simple Physics\n    step(dt, objectFilter) {\n\n        // each object should advance\n        let objects = this.gameEngine.world.objects;\n        for (let objId of Object.keys(objects)) {\n\n            // shadow objects are not re-enacted\n            let ob = objects[objId];\n            if (!objectFilter(ob))\n                continue;\n\n            // run the object step\n            this.objectStep(ob, dt);\n        }\n\n        // emit event on collision\n        this.collisionDetection.detect(this.gameEngine);\n    }\n}\n\nexport default SimplePhysicsEngine;\n","import PhysicsEngine from './PhysicsEngine';\nconst CANNON = require('cannon');\n\n/**\n * CannonPhysicsEngine is a three-dimensional lightweight physics engine\n */\nclass CannonPhysicsEngine extends PhysicsEngine {\n\n    constructor(options) {\n        super(options);\n\n        this.options.dt = this.options.dt || (1 / 60);\n        let world = this.world = new CANNON.World();\n        world.quatNormalizeSkip = 0;\n        world.quatNormalizeFast = false;\n        world.gravity.set(0, -10, 0);\n        world.broadphase = new CANNON.NaiveBroadphase();\n        this.CANNON = CANNON;\n    }\n\n    // entry point for a single step of the Simple Physics\n    step(dt, objectFilter) {\n        this.world.step(dt || this.options.dt);\n    }\n\n    addSphere(radius, mass) {\n        let shape = new CANNON.Sphere(radius);\n        let body = new CANNON.Body({ mass, shape });\n        body.position.set(0, 0, 0);\n        this.world.addBody(body);\n        return body;\n    }\n\n    addBox(x, y, z, mass, friction) {\n        let shape = new CANNON.Box(new CANNON.Vec3(x, y, z));\n        let options = { mass, shape };\n        if (friction !== undefined)\n            options.material = new CANNON.Material({ friction });\n\n        let body = new CANNON.Body(options);\n        body.position.set(0, 0, 0);\n        this.world.addBody(body);\n        return body;\n    }\n\n    addCylinder(radiusTop, radiusBottom, height, numSegments, mass) {\n        let shape = new CANNON.Cylinder(radiusTop, radiusBottom, height, numSegments);\n        let body = new CANNON.Body({ mass, shape });\n        this.world.addBody(body);\n        return body;\n    }\n\n    removeObject(obj) {\n        this.world.removeBody(obj);\n    }\n}\n\nexport default CannonPhysicsEngine;\n","import Serializable from './Serializable';\nimport BaseTypes from './BaseTypes';\n\n/**\n * A ThreeVector is a geometric object which is completely described\n * by three values.\n */\nclass ThreeVector extends Serializable {\n\n    static get netScheme() {\n        return {\n            x: { type: BaseTypes.TYPES.FLOAT32 },\n            y: { type: BaseTypes.TYPES.FLOAT32 },\n            z: { type: BaseTypes.TYPES.FLOAT32 }\n        };\n    }\n\n    /**\n    * Creates an instance of a ThreeVector.\n    * @param {Number} x - first value\n    * @param {Number} y - second value\n    * @param {Number} z - second value\n    * @return {ThreeVector} v - the new ThreeVector\n    */\n    constructor(x, y, z) {\n        super();\n        this.x = x;\n        this.y = y;\n        this.z = z;\n\n        return this;\n    }\n\n    /**\n     * Formatted textual description of the ThreeVector.\n     * @return {String} description\n     */\n    toString() {\n        function round3(x) { return Math.round(x * 1000) / 1000; }\n        return `[${round3(this.x)}, ${round3(this.y)}, ${round3(this.z)}]`;\n    }\n\n    /**\n     * Multiply this ThreeVector by a scalar\n     *\n     * @param {Number} s the scale\n     * @return {ThreeVector} returns self\n     */\n    multiplyScalar(s) {\n        this.x *= s;\n        this.y *= s;\n        this.z *= s;\n        return this;\n    }\n\n    /**\n     * Get vector length\n     *\n     * @return {Number} length of this vector\n     */\n    length() {\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    }\n\n    /**\n     * Add other vector to this vector\n     *\n     * @param {ThreeVector} other the other vector\n     * @return {ThreeVector} returns self\n     */\n    add(other) {\n        this.x += other.x;\n        this.y += other.y;\n        this.z += other.z;\n        return this;\n    }\n\n    /**\n     * Subtract other vector from this vector\n     *\n     * @param {ThreeVector} other the other vector\n     * @return {ThreeVector} returns self\n     */\n    subtract(other) {\n        this.x -= other.x;\n        this.y -= other.y;\n        this.z -= other.z;\n        return this;\n    }\n\n    /**\n     * Normalize this vector, in-place\n     *\n     * @return {ThreeVector} returns self\n     */\n    normalize() {\n        this.multiplyScalar(1 / this.length());\n        return this;\n    }\n\n    /**\n     * Copy values from another ThreeVector into this ThreeVector\n     *\n     * @param {ThreeVector} sourceObj the other vector\n     * @return {ThreeVector} returns self\n     */\n    copy(sourceObj) {\n        this.x = sourceObj.x;\n        this.y = sourceObj.y;\n        this.z = sourceObj.z;\n        return this;\n    }\n\n    /**\n     * Set ThreeVector values\n     *\n     * @param {Number} x x-value\n     * @param {Number} y y-value\n     * @param {Number} z z-value\n     * @return {ThreeVector} returns self\n     */\n    set(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        return this;\n    }\n\n    /**\n     * Create a clone of this vector\n     *\n     * @return {ThreeVector} returns clone\n     */\n    clone() {\n        return new ThreeVector(this.x, this.y, this.z);\n    }\n\n    /**\n     * Apply in-place lerp (linear interpolation) to this ThreeVector\n     * towards another ThreeVector\n     * @param {ThreeVector} target the target vector\n     * @param {Number} p The percentage to interpolate\n     * @return {ThreeVector} returns self\n     */\n    lerp(target, p) {\n        this.x += (target.x - this.x) * p;\n        this.y += (target.y - this.y) * p;\n        this.z += (target.z - this.z) * p;\n        return this;\n    }\n\n    /**\n     * Get bending Delta Vector\n     * towards another ThreeVector\n     * @param {ThreeVector} target the target vector\n     * @param {Object} options bending options\n     * @param {Number} options.increments number of increments\n     * @param {Number} options.percent The percentage to bend\n     * @param {Number} options.min No less than this value\n     * @param {Number} options.max No more than this value\n     * @return {ThreeVector} returns new Incremental Vector\n     */\n    getBendingDelta(target, options) {\n        let increment = target.clone();\n        increment.subtract(this);\n        increment.multiplyScalar(options.percent);\n\n        // check for max case\n        if ((options.max && increment.length() > options.max) ||\n            (options.max && increment.length() < options.min)) {\n            return new ThreeVector(0, 0, 0);\n        }\n\n        // divide into increments\n        increment.multiplyScalar(1 / options.increments);\n\n        return increment;\n    }\n\n    toJSON() {\n        return {\n            x: this.x,\n            y: this.y,\n            z: this.z\n        }\n    }\n}\n\nexport default ThreeVector;\n","import Serializable from './Serializable';\nimport BaseTypes from './BaseTypes';\nimport ThreeVector from './ThreeVector';\n\nconst SHOW_AS_AXIS_ANGLE = true;\nconst MAX_DEL_THETA = 0.2;\n\n/**\n * A Quaternion is a geometric object which can be used to\n * represent a three-dimensional rotation.\n */\nclass Quaternion extends Serializable {\n\n    static get netScheme() {\n        return {\n            w: { type: BaseTypes.TYPES.FLOAT32 },\n            x: { type: BaseTypes.TYPES.FLOAT32 },\n            y: { type: BaseTypes.TYPES.FLOAT32 },\n            z: { type: BaseTypes.TYPES.FLOAT32 }\n        };\n    }\n\n    /**\n    * Creates an instance of a Quaternion.\n    * @param {Number} w - first value\n    * @param {Number} x - second value\n    * @param {Number} y - third value\n    * @param {Number} z - fourth value\n    * @return {Quaternion} v - the new Quaternion\n    */\n    constructor(w, x, y, z) {\n        super();\n        this.w = w;\n        this.x = x;\n        this.y = y;\n        this.z = z;\n\n        return this;\n    }\n\n    /**\n     * Formatted textual description of the Quaternion.\n     * @return {String} description\n     */\n    toString() {\n        function round3(x) { return Math.round(x * 1000) / 1000; }\n        if (SHOW_AS_AXIS_ANGLE) {\n            let axisAngle = this.toAxisAngle();\n            return `[${round3(axisAngle.angle)},${axisAngle.axis.toString()}]`;\n        }\n        return `[${round3(this.w)}, ${round3(this.x)}, ${round3(this.y)}, ${round3(this.z)}]`;\n    }\n\n    /**\n     * copy values from another quaternion into this quaternion\n     *\n     * @param {Quaternion} sourceObj the quaternion to copy from\n     * @return {Quaternion} returns self\n     */\n    copy(sourceObj) {\n        this.set(sourceObj.w, sourceObj.x, sourceObj.y, sourceObj.z);\n        return this;\n    }\n\n    /**\n     * set quaternion values\n     *\n     * @param {Number} w w-value\n     * @param {Number} x x-value\n     * @param {Number} y y-value\n     * @param {Number} z z-value\n     * @return {Quaternion} returns self\n     */\n    set(w, x, y, z) {\n        this.w = w;\n        this.x = x;\n        this.y = y;\n        this.z = z;\n\n        return this;\n    }\n\n    /**\n     * return an axis-angle representation of this quaternion\n     *\n     * @return {Object} contains two attributes: axis (ThreeVector) and angle.\n     */\n    toAxisAngle() {\n\n        // assuming quaternion normalised then w is less than 1, so term always positive.\n        let axis = new ThreeVector(1, 0, 0);\n        this.normalize();\n        let angle = 2 * Math.acos(this.w);\n        let s = Math.sqrt(1 - this.w * this.w);\n        if (s > 0.001) {\n            let divS = 1 / s;\n            axis.x = this.x * divS;\n            axis.y = this.y * divS;\n            axis.z = this.z * divS;\n        }\n        if (s > Math.PI) {\n            s -= 2 * Math.PI;\n        }\n        return { axis, angle };\n    }\n\n    normalize() {\n        let l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n        if (l === 0) {\n            this.x = 0;\n            this.y = 0;\n            this.z = 0;\n            this.w = 0;\n        } else {\n            l = 1 / l;\n            this.x *= l;\n            this.y *= l;\n            this.z *= l;\n            this.w *= l;\n        }\n\n        return this;\n    }\n\n    /**\n     * set the values of this quaternion from an axis/angle representation\n     *\n     * @param {ThreeVector} axis The axis\n     * @param {Number} angle angle in radians\n     * @return {Quaternion} returns self\n     */\n    setFromAxisAngle(axis, angle) {\n\n        if (angle < 0)\n            angle += Math.PI * 2;\n        let halfAngle = angle * 0.5;\n        let s = Math.sin(halfAngle);\n        this.x = axis.x * s;\n        this.y = axis.y * s;\n        this.z = axis.z * s;\n        this.w = Math.cos(halfAngle);\n\n        return this;\n    }\n\n    /**\n     * conjugate the quaternion, in-place\n     *\n     * @return {Quaternion} returns self\n     */\n    conjugate() {\n        this.x *= -1;\n        this.y *= -1;\n        this.z *= -1;\n        return this;\n    }\n\n    /* eslint-disable */\n    /**\n     * multiply this quaternion by another, in-place\n     *\n     * @param {Quaternion} other The other quaternion\n     * @return {Quaternion} returns self\n     */\n    multiply(other) {\n        let aw = this.w, ax = this.x, ay = this.y, az = this.z;\n        let bw = other.w, bx = other.x, by = other.y, bz = other.z;\n\n        this.x = ax * bw + aw * bx + ay * bz - az * by;\n        this.y = ay * bw + aw * by + az * bx - ax * bz;\n        this.z = az * bw + aw * bz + ax * by - ay * bx;\n        this.w = aw * bw - ax * bx - ay * by - az * bz;\n\n        return this;\n    }\n    /* eslint-enable */\n\n    /* eslint-disable */\n    /**\n     * Apply in-place slerp (spherical linear interpolation) to this quaternion,\n     * towards another quaternion.\n     *\n     * @param {Quaternion} target The target quaternion\n     * @param {Number} bending The percentage to interpolate\n     * @return {Quaternion} returns self\n     */\n    slerp(target, bending) {\n\n        if (bending <= 0) return this;\n        if (bending >= 1) return this.copy(target);\n\n        let aw = this.w, ax = this.x, ay = this.y, az = this.z;\n        let bw = target.w, bx = target.x, by = target.y, bz = target.z;\n\n        let cosHalfTheta = aw*bw + ax*bx + ay*by + az*bz;\n        if (cosHalfTheta < 0) {\n            this.set(-bw, -bx, -by, -bz);\n            cosHalfTheta = -cosHalfTheta;\n        } else {\n            this.copy(target);\n        }\n\n        if (cosHalfTheta >= 1.0) {\n            this.set(aw, ax, ay, az);\n            return this;\n        }\n\n        let sqrSinHalfTheta = 1.0 - cosHalfTheta*cosHalfTheta;\n        if (sqrSinHalfTheta < Number.EPSILON) {\n            let s = 1 - bending;\n            this.set(s*aw + bending*this.w, s*ax + bending*this.x, s*ay + bending*this.y, s*az + bending*this.z);\n            return this.normalize();\n        }\n\n        let sinHalfTheta = Math.sqrt(sqrSinHalfTheta);\n        let halfTheta = Math.atan2(sinHalfTheta, cosHalfTheta);\n        let delTheta = bending * halfTheta;\n        if (Math.abs(delTheta) > MAX_DEL_THETA)\n            delTheta = MAX_DEL_THETA * Math.sign(delTheta);\n        let ratioA = Math.sin(halfTheta - delTheta)/sinHalfTheta;\n        let ratioB = Math.sin(delTheta)/sinHalfTheta;\n        this.set(aw*ratioA + this.w*ratioB,\n            ax*ratioA + this.x*ratioB,\n            ay*ratioA + this.y*ratioB,\n            az*ratioA + this.z*ratioB);\n        return this;\n    }\n    /* eslint-enable */\n}\n\nexport default Quaternion;\n","import Serializable from './Serializable';\nimport BaseTypes from './BaseTypes';\n\n/**\n * GameObject is the base class of all game objects.\n * It is created only for the purpose of clearly defining the game\n * object interface.\n * Game developers will use one of the subclasses such as DynamicObject,\n * or PhysicalObject.\n */\nclass GameObject extends Serializable {\n\n    static get netScheme() {\n        return {\n            id: { type: BaseTypes.TYPES.STRING },\n            playerId: { type: BaseTypes.TYPES.STRING }\n        };\n    }\n\n    /**\n    * Creates an instance of a game object.\n    * @param {GameEngine} gameEngine - the gameEngine this object will be used in\n    * @param {Object} options - options for instantiation of the GameObject\n    * @param {Number} id - if set, the new instantiated object will be set to this id instead of being generated a new one. Use with caution!\n    * @param {Object} props - additional properties for creation\n    * @param {Number} props.playerId - the playerId value of the player who owns this object\n    */\n    constructor(gameEngine, options, props) {\n        super();\n        /**\n         * The gameEngine this object will be used in\n         * @member {GameEngine}\n         */\n        this.gameEngine = gameEngine;\n\n        /**\n        * ID of this object's instance.\n        * There are three cases of instance creation which can occur:\n        * 1. In the normal case, the constructor is asked to assign an ID which is unique\n        * across the entire game world, including the server and all the clients.\n        * 2. In extrapolation mode, the client may have an object instance which does not\n        * yet exist on the server, these objects are known as shadow objects.  Their IDs must\n        * be allocated from a different range.\n        * 3. Also, temporary objects are created on the client side each time a sync is received.\n        * These are used for interpolation purposes and as bending targets of position, velocity,\n        * angular velocity, and orientation.  In this case the id will be set to null.\n        * @member {Number}\n        */\n        this.id = null;\n        this.playerId = (props && props.playerId) ? props.playerId : 0;\n        \n        if (options && 'id' in options)\n            this.id = options.id;\n        else if (this.gameEngine)\n            this.id = this.playerId || this.gameEngine.world.getNewId();\n\n        /**\n        * playerId of player who created this object\n        * @member {Number}\n        */\n       \n\n        this.components = {};\n    }\n\n    /**\n     * Called after the object is added to to the game world.\n     * This is the right place to add renderer sub-objects, physics sub-objects\n     * and any other resources that should be created\n     * @param {GameEngine} gameEngine the game engine\n     */\n    onAddToWorld(gameEngine) {}\n\n    /**\n     * Called after the object is removed from game-world.\n     * This is where renderer sub-objects and any other resources should be freed\n     * @param {GameEngine} gameEngine the game engine\n     */\n    onRemoveFromWorld(gameEngine) {}\n\n    /**\n     * Formatted textual description of the game object.\n     * @return {String} description - a string description\n     */\n    toString() {\n        return `game-object[${this.id}]`;\n    }\n\n    /**\n     * Formatted textual description of the game object's current bending properties.\n     * @return {String} description - a string description\n     */\n    bendingToString() {\n        return 'no bending';\n    }\n\n    saveState(other) {\n        this.savedCopy = (new this.constructor(this.gameEngine, { id: null }));\n        this.savedCopy.syncTo(other ? other : this);\n    }\n   /**\n    * Bending is defined as the amount of error correction that will be applied\n    * on the client side to a given object's physical attributes, incrementally,\n    * by the time the next server broadcast is expected to arrive.\n    *\n    * When this percentage is 0.0, the client always ignores the server object's value.\n    * When this percentage is 1.0, the server object's attributes will be applied in full.\n    *\n    * The GameObject bending attribute is implemented as a getter, and can provide\n    * distinct values for position, velocity, angle, and angularVelocity.\n    * And in each case, you can also provide overrides for local objects,\n    * these attributes will be called, respectively, positionLocal, velocityLocal,\n    * angleLocal, angularVelocityLocal.\n    *\n    * @example\n    * get bending() {\n    *   return {\n    *     position: { percent: 1.0, min: 0.0 },\n    *     velocity: { percent: 0.0, min: 0.0 },\n    *     angularVelocity: { percent: 0.0 },\n    *     angleLocal: { percent: 1.0 }\n    *   }\n    * };\n    *\n    * @memberof GameObject\n    * @member {Object} bending\n    */\n    get bending() {\n        return {\n            position: { percent: 1.0, min: 0.0 },\n            velocity: { percent: 0.0, min: 0.0 },\n            angularVelocity: { percent: 0.0 },\n            angleLocal: { percent: 1.0 }\n        };\n    }\n\n    // TODO:\n    // rather than pass worldSettings on each bend, they could\n    // be passed in on the constructor just once.\n    bendToCurrentState(bending, worldSettings, isLocal, bendingIncrements) {\n        if (this.savedCopy) {\n            this.bendToCurrent(this.savedCopy, bending, worldSettings, isLocal, bendingIncrements);\n        }\n        this.savedCopy = null;\n    }\n\n    bendToCurrent(original, bending, worldSettings, isLocal, bendingIncrements) {\n    }\n\n    /**\n     * synchronize this object to the state of an other object, by copying all the netscheme variables.\n     * This is used by the synchronizer to create temporary objects, and must be implemented by all sub-classes as well.\n     * @param {GameObject} other the other object to synchronize to\n     */\n    syncTo(other) {\n        super.syncTo(other);\n        this.playerId = other.playerId;\n    }\n\n    // copy physical attributes to physics sub-object\n    refreshToPhysics() {}\n\n    // copy physical attributes from physics sub-object\n    refreshFromPhysics() {}\n\n    // apply a single bending increment\n    applyIncrementalBending() { }\n\n    // clean up resources\n    destroy() {}\n\n    addComponent(componentInstance) {\n        componentInstance.parentObject = this;\n        this.components[componentInstance.constructor.name] = componentInstance;\n\n        // a gameEngine might not exist if this class is instantiated by the serializer\n        if (this.gameEngine) {\n            this.gameEngine.emit('componentAdded', this, componentInstance);\n        }\n    }\n\n    removeComponent(componentName) {\n        // todo cleanup of the component ?\n        delete this.components[componentName];\n\n        // a gameEngine might not exist if this class is instantiated by the serializer\n        if (this.gameEngine) {\n            this.gameEngine.emit('componentRemoved', this, componentName);\n        }\n    }\n\n    /**\n     * Check whether this game object has a certain component\n     * @param {Object} componentClass the comp\n     * @return {Boolean} true if the gameObject contains this component\n     */\n    hasComponent(componentClass) {\n        return componentClass.name in this.components;\n    }\n\n    getComponent(componentClass) {\n        return this.components[componentClass.name];\n    }\n\n}\n\nexport default GameObject;\n","export default class MathUtils {\n\n    // interpolate from start to end, advancing \"percent\" of the way\n    static interpolate(start, end, percent) {\n        return (end - start) * percent + start;\n    }\n\n    // interpolate from start to end, advancing \"percent\" of the way\n    //\n    // returns just the delta. i.e. the value that must be added to the start value\n    static interpolateDelta(start, end, percent) {\n        return (end - start) * percent;\n    }\n\n    // interpolate from start to end, advancing \"percent\" of the way\n    // and noting that the dimension wraps around {x >= wrapMin, x < wrapMax}\n    //\n    // returns just the delta. i.e. the value that must be added to the start value\n    static interpolateDeltaWithWrapping(start, end, percent, wrapMin, wrapMax) {\n        let wrapTest = wrapMax - wrapMin;\n        if (start - end > wrapTest / 2) end += wrapTest;\n        else if (end - start > wrapTest / 2) start += wrapTest;\n        if (Math.abs(start - end) > wrapTest / 3) {\n            console.log('wrap interpolation is close to limit.  Not sure which edge to wrap to.');\n        }\n        return (end - start) * percent;\n    }\n\n    static interpolateWithWrapping(start, end, percent, wrapMin, wrapMax) {\n        let interpolatedVal = start + this.interpolateDeltaWithWrapping(start, end, percent, wrapMin, wrapMax);\n        let wrapLength = wrapMax - wrapMin;\n        if (interpolatedVal >= wrapLength) interpolatedVal -= wrapLength;\n        if (interpolatedVal < 0) interpolatedVal += wrapLength;\n        return interpolatedVal;\n    }\n}","import TwoVector from './TwoVector';\nimport GameObject from './GameObject';\nimport BaseTypes from './BaseTypes';\nimport MathUtils from '../lib/MathUtils';\n\n/**\n * DynamicObject is the base class of the game's objects, for 2D games which\n * rely on {@link SimplePhysicsEngine}.  It defines the\n * base object which can move around in the game world.  The\n * extensions of this object (the subclasses)\n * will be periodically synchronized from the server to every client.\n *\n * The dynamic objects have pseudo-physical properties, which\n * allow the client to extrapolate the position\n * of dynamic objects in-between server updates.\n */\nclass DynamicObject extends GameObject {\n\n    /**\n    * The netScheme is a dictionary of attributes in this game\n    * object.  The attributes listed in the netScheme are those exact\n    * attributes which will be serialized and sent from the server\n    * to each client on every server update.\n    * The netScheme member is implemented as a getter.\n    *\n    * You may choose not to implement this method, in which\n    * case your object only transmits the default attributes\n    * which are already part of {@link DynamicObject}.\n    * But if you choose to add more attributes, make sure\n    * the return value includes the netScheme of the super class.\n    *\n    * @memberof DynamicObject\n    * @member {Object} netScheme\n    * @example\n    *     static get netScheme() {\n    *       return Object.assign({\n    *           mojo: { type: BaseTypes.TYPES.UINT8 },\n    *         }, super.netScheme);\n    *     }\n    */\n    static get netScheme() {\n        return Object.assign({\n            position: { type: BaseTypes.TYPES.CLASSINSTANCE },\n            width: { type: BaseTypes.TYPES.INT16 },\n            height: { type: BaseTypes.TYPES.INT16 },\n            isStatic: { type: BaseTypes.TYPES.UINT8 },\n            velocity: { type: BaseTypes.TYPES.CLASSINSTANCE },\n            angle: { type: BaseTypes.TYPES.FLOAT32 }\n        }, super.netScheme);\n    }\n\n    /**\n    * Creates an instance of a dynamic object.\n    * NOTE 1: do not add logic to subcclasses of this function, instead, create an instance and\n    *       assign attributes to the new objects.\n    * NOTE 2: all subclasses of this class must comply with this constructor signature.\n    *       This is required because the engine will create temporary instances when\n    *       syncs arrive on the clients.\n    * @param {GameEngine} gameEngine - the gameEngine this object will be used in\n    * @param {Object} options - options for the new object. See {@link GameObject}\n    * @param {Object} props - properties to be set in the new object\n    * @param {TwoVector} props.position - position vector\n    * @param {TwoVector} props.velocity - velocity vector\n    * @param {Number} props.height - object height\n    * @param {Number} props.width - object width\n    */\n    constructor(gameEngine, options, props) {\n        super(gameEngine, options, props);\n\n        this.bendingIncrements = 0;\n\n        this.velocity = new TwoVector(0, 0);\n\n        /**\n         * Object width for collision detection purposes. Default is 1\n         * @member {Number}\n         */\n        this.width = (props && props.width) ? props.width : 1;\n\n        /**\n         * Object height for collision detection purposes. Default is 1\n         * @member {Number}\n         */\n        this.height = (props && props.height) ? props.height : 1;\n\n        /**\n         * Determine if the object is static (i.e. it never moves, like a wall). The value 0 implies the object is dynamic.  Default is 0 (dynamic).\n         * @member {Number}\n         */\n        this.isStatic = (props && props.isStatic) ? props.isStatic : 0;\n\n        /**\n         * The friction coefficient. Velocity is multiplied by this for each step. Default is (1,1)\n         * @member {TwoVector}\n         */\n        this.friction = new TwoVector(1, 1);\n\n        /**\n        * position\n        * @member {TwoVector}\n        */\n        if (props && props.position) this.position.copy(props.position);\n\n        /**\n        * velocity\n        * @member {TwoVector}\n        */\n        if (props && props.velocity) this.velocity.copy(props.velocity);\n\n        /**\n        * object orientation angle in degrees\n        * @member {Number}\n        */\n        this.angle = 90;\n\n        /**\n        * @deprecated since version 3.0.8\n        * should rotate left by {@link DynamicObject#rotationSpeed} on next step\n        * @member {Boolean}\n        */\n        this.isRotatingLeft = false;\n\n        /**\n        * @deprecated since version 3.0.8\n        * should rotate right by {@link DynamicObject#rotationSpeed} on next step\n        * @member {Boolean}\n        */\n        this.isRotatingRight = false;\n\n        /**\n        * @deprecated since version 3.0.8\n        * should accelerate by {@link DynamicObject#acceleration} on next step\n        * @member {Boolean}\n        */\n        this.isAccelerating = false;\n\n        /**\n        * @deprecated since version 3.0.8\n        * angle rotation per step\n        * @member {Number}\n        */\n        this.rotationSpeed = 2.5;\n\n        /**\n        * @deprecated since version 3.0.8\n        * acceleration per step\n        * @member {Number}\n        */\n        this.acceleration = 0.1;\n\n        this.deceleration = 0.99;\n    }\n\n    // convenience getters\n    get x() { return this.position.x; }\n    get y() { return this.position.y; }\n\n    /**\n     * Formatted textual description of the dynamic object.\n     * The output of this method is used to describe each instance in the traces,\n     * which significantly helps in debugging.\n     *\n     * @return {String} description - a string describing the DynamicObject\n     */\n    toString() {\n        function round3(x) { return Math.round(x * 1000) / 1000; }\n        return `${this.constructor.name}[${this.id}] player${this.playerId} Pos=${this.position} Vel=${this.velocity} angle${round3(this.angle)}`;\n    }\n\n    /**\n     * Each object class can define its own bending overrides.\n     * return an object which can include attributes: position, velocity,\n     * and angle.  In each case, you can specify a min value, max\n     * value, and a percent value.  { @see GameObject.bending }\n     *\n     * @return {Object} bending - an object with bending paramters\n     */\n    get bending() {\n        return {\n            // example:\n            // position: { percent: 0.8, min: 0.0, max: 4.0 },\n            // velocity: { percent: 0.4, min: 0.0 },\n            // angleLocal: { percent: 0.0 }\n        };\n    }\n\n    /**\n    * turn object clock-wise\n    * @param {Number} deltaAngle - the angle to turn, in degrees\n    * @return {DynamicObject} return this object\n    */\n    turnRight(deltaAngle) {\n        this.angle += deltaAngle;\n        if (this.angle >= 360) { this.angle -= 360; }\n        if (this.angle < 0) { this.angle += 360; }\n        return this;\n    }\n\n    /**\n    * turn object counter-clock-wise\n    * @param {Number} deltaAngle - the angle to turn, in degrees\n    * @return {DynamicObject} return this object\n    */\n    turnLeft(deltaAngle) {\n        return this.turnRight(-deltaAngle);\n    }\n\n    /**\n    * accelerate along the direction that the object is facing\n    * @param {Number} acceleration - the acceleration\n    * @return {DynamicObject} return this object\n    */\n    accelerate(acceleration) {\n        let rad = this.angle * (Math.PI / 180);\n        let dv = new TwoVector(Math.cos(rad), Math.sin(rad));\n        dv.multiplyScalar(acceleration);\n        this.velocity.add(dv);\n\n        return this;\n    }\n\n    /**\n     * Formatted textual description of the game object's current bending properties.\n     * @return {String} description - a string description\n     */\n    bendingToString() {\n        if (this.bendingIncrements)\n            return `ΔPos=${this.bendingPositionDelta} ΔVel=${this.bendingVelocityDelta} ΔAngle=${this.bendingAngleDelta} increments=${this.bendingIncrements}`;\n        return 'no bending';\n    }\n\n    /**\n    * The maximum velocity allowed.  If returns null then ignored.\n    * @memberof DynamicObject\n    * @member {Number} maxSpeed\n    */\n    get maxSpeed() { return null; }\n\n    /**\n    * Copy the netscheme variables from another DynamicObject.\n    * This is used by the synchronizer to create temporary objects, and must be implemented by all sub-classes as well.\n    * @param {DynamicObject} other DynamicObject\n    */\n    syncTo(other) {\n        super.syncTo(other);\n        this.position.copy(other.position);\n        this.velocity.copy(other.velocity);\n        this.width = other.width;\n        this.height = other.height;\n        this.bendingAngle = other.bendingAngle;\n        this.rotationSpeed = other.rotationSpeed;\n        this.acceleration = other.acceleration;\n        this.deceleration = other.deceleration;\n    }\n\n    bendToCurrent(original, percent, worldSettings, isLocal, increments) {\n\n        let bending = { increments, percent };\n        // if the object has defined a bending multiples for this object, use them\n        let positionBending = Object.assign({}, bending, this.bending.position);\n        let velocityBending = Object.assign({}, bending, this.bending.velocity);\n        let angleBending = Object.assign({}, bending, this.bending.angle);\n\n        if (isLocal) {\n            Object.assign(positionBending, this.bending.positionLocal);\n            Object.assign(velocityBending, this.bending.velocityLocal);\n            Object.assign(angleBending, this.bending.angleLocal);\n        }\n        // get the incremental delta position & velocity\n        this.incrementScale = percent / increments;\n        this.bendingPositionDelta = original.position.getBendingDelta(this.position, positionBending);\n        this.bendingVelocityDelta = original.velocity.getBendingDelta(this.velocity, velocityBending);\n        this.bendingAngleDelta = MathUtils.interpolateDeltaWithWrapping(original.angle, this.angle, angleBending.percent, 0, 360) / increments;\n\n        this.bendingTarget = (new this.constructor());\n        this.bendingTarget.syncTo(this);\n\n        // revert to original\n        this.position.copy(original.position);\n        this.velocity.copy(original.velocity);\n        this.angle = original.angle;\n\n        // keep parameters\n        this.bendingIncrements = increments;\n        this.bendingOptions = bending;\n    }\n\n    applyIncrementalBending(stepDesc) {\n        if (this.bendingIncrements === 0)\n            return;\n\n        let timeFactor = 1;\n        if (stepDesc && stepDesc.dt)\n            timeFactor = stepDesc.dt / (1000 / 60);\n\n        const posDelta = this.bendingPositionDelta.clone().multiplyScalar(timeFactor);\n        const velDelta = this.bendingVelocityDelta.clone().multiplyScalar(timeFactor);\n        this.position.add(posDelta);\n        this.velocity.add(velDelta);\n        this.angle += (this.bendingAngleDelta * timeFactor);\n\n        this.bendingIncrements--;\n    }\n\n    getAABB() {\n        // todo take rotation into account\n        // registration point is in the middle\n        return {\n            min: [this.x - this.width / 2, this.y - this.height / 2],\n            max: [this.x + this.width / 2, this.y + this.height / 2]\n        };\n    }\n\n    /**\n    * Determine if this object will collide with another object.\n    * Only applicable on \"bruteForce\" physics engine.\n    * @param {DynamicObject} other DynamicObject\n    * @return {Boolean} true if the two objects collide\n    */\n    collidesWith(other) {\n        return true;\n    }\n\n}\n\nexport default DynamicObject;\n","import GameObject from './GameObject';\nimport BaseTypes from './BaseTypes';\nimport TwoVector from './TwoVector';\nimport MathUtils from '../lib/MathUtils';\n\n/**\n * The PhysicalObject2D is the base class for physical game objects in 2D Physics\n */\nclass PhysicalObject2D extends GameObject {\n\n    /**\n    * The netScheme is a dictionary of attributes in this game\n    * object.  The attributes listed in the netScheme are those exact\n    * attributes which will be serialized and sent from the server\n    * to each client on every server update.\n    * The netScheme member is implemented as a getter.\n    *\n    * You may choose not to implement this method, in which\n    * case your object only transmits the default attributes\n    * which are already part of {@link PhysicalObject2D}.\n    * But if you choose to add more attributes, make sure\n    * the return value includes the netScheme of the super class.\n    *\n    * @memberof PhysicalObject2D\n    * @member {Object} netScheme\n    * @example\n    *     static get netScheme() {\n    *       return Object.assign({\n    *           mojo: { type: BaseTypes.TYPES.UINT8 },\n    *         }, super.netScheme);\n    *     }\n    */\n    static get netScheme() {\n        return Object.assign({\n            mass: { type: BaseTypes.TYPES.FLOAT32 },\n            position: { type: BaseTypes.TYPES.CLASSINSTANCE },\n            angle: { type: BaseTypes.TYPES.FLOAT32 },\n            velocity: { type: BaseTypes.TYPES.CLASSINSTANCE },\n            angularVelocity: { type: BaseTypes.TYPES.FLOAT32 }\n        }, super.netScheme);\n    }\n\n    /**\n    * Creates an instance of a physical object.\n    * Override to provide starting values for position, velocity, angle and angular velocity.\n    * NOTE: all subclasses of this class must comply with this constructor signature.\n    *       This is required because the engine will create temporary instances when\n    *       syncs arrive on the clients.\n    * @param {GameEngine} gameEngine - the gameEngine this object will be used in\n    * @param {Object} options - options for the new object. See {@link GameObject}\n    * @param {Object} props - properties to be set in the new object\n    * @param {TwoVector} props.position - position vector\n    * @param {TwoVector} props.velocity - velocity vector\n    * @param {Number} props.angle - orientation angle\n    * @param {Number} props.mass - the mass\n    * @param {Number} props.angularVelocity - angular velocity\n    */\n    constructor(gameEngine, options, props) {\n        super(gameEngine, options, props);\n        this.bendingIncrements = 0;\n\n        // set default position, velocity and quaternion\n        this.position = new TwoVector(0, 0);\n        this.velocity = new TwoVector(0, 0);\n        this.angle = 0;\n        this.angularVelocity = 0;\n        this.mass = 0;\n\n        // use values if provided\n        props = props || {};\n        if (props.position) this.position.copy(props.position);\n        if (props.velocity) this.velocity.copy(props.velocity);\n        if (props.angle) this.angle = props.angle;\n        if (props.angularVelocity) this.angularVelocity = props.angularVelocity;\n        if (props.mass) this.mass = props.mass;\n\n        this.class = PhysicalObject2D;\n    }\n\n    /**\n     * Called after the object is added to to the game world.\n     * This is the right place to add renderer sub-objects, physics sub-objects\n     * and any other resources that should be created\n     */\n    onAddToWorld() {}\n\n    /**\n     * Formatted textual description of the dynamic object.\n     * The output of this method is used to describe each instance in the traces,\n     * which significantly helps in debugging.\n     *\n     * @return {String} description - a string describing the PhysicalObject2D\n     */\n    toString() {\n        let p = this.position.toString();\n        let v = this.velocity.toString();\n        let a = this.angle;\n        let av = this.angularVelocity;\n        return `phyObj2D[${this.id}] player${this.playerId} Pos=${p} Vel=${v} Ang=${a} AVel=${av}`;\n    }\n\n    /**\n     * Each object class can define its own bending overrides.\n     * return an object which can include attributes: position, velocity,\n     * angle, and angularVelocity.  In each case, you can specify a min value, max\n     * value, and a percent value.\n     *\n     * @return {Object} bending - an object with bending paramters\n     */\n    get bending() {\n        return {\n            // example:\n            // position: { percent: 0.8, min: 0.0, max: 4.0 },\n            // velocity: { percent: 0.4, min: 0.0 },\n            // angularVelocity: { percent: 0.0 },\n            // angleLocal: { percent: 0.0 }\n        };\n    }\n\n    // display object's physical attributes as a string\n    // for debugging purposes mostly\n    bendingToString() {\n        if (this.bendingIncrements)\n            return `ΔPos=${this.bendingPositionDelta} ΔVel=${this.bendingVelocityDelta} ΔAngle=${this.bendingAngleDelta} increments=${this.bendingIncrements}`;\n        return 'no bending';\n    }\n\n    // derive and save the bending increment parameters:\n    // - bendingPositionDelta\n    // - bendingVelocityDelta\n    // - bendingAVDelta\n    // - bendingAngleDelta\n    // these can later be used to \"bend\" incrementally from the state described\n    // by \"original\" to the state described by \"self\"\n    bendToCurrent(original, percent, worldSettings, isLocal, increments) {\n\n        let bending = { increments, percent };\n        // if the object has defined a bending multiples for this object, use them\n        let positionBending = Object.assign({}, bending, this.bending.position);\n        let velocityBending = Object.assign({}, bending, this.bending.velocity);\n        let angleBending = Object.assign({}, bending, this.bending.angle);\n        let avBending = Object.assign({}, bending, this.bending.angularVelocity);\n\n        // check for local object overrides to bendingTarget\n        if (isLocal) {\n            Object.assign(positionBending, this.bending.positionLocal);\n            Object.assign(velocityBending, this.bending.velocityLocal);\n            Object.assign(angleBending, this.bending.angleLocal);\n            Object.assign(avBending, this.bending.angularVelocityLocal);\n        }\n\n        // get the incremental delta position & velocity\n        this.incrementScale = percent / increments;\n        this.bendingPositionDelta = original.position.getBendingDelta(this.position, positionBending);\n        this.bendingVelocityDelta = original.velocity.getBendingDelta(this.velocity, velocityBending);\n\n        // get the incremental angular-velocity\n        this.bendingAVDelta = (this.angularVelocity - original.angularVelocity) * this.incrementScale * avBending.percent;\n\n        // get the incremental angle correction\n        this.bendingAngleDelta = MathUtils.interpolateDeltaWithWrapping(original.angle, this.angle, angleBending.percent, 0, 2 * Math.PI) / increments;\n\n        this.bendingTarget = (new this.constructor());\n        this.bendingTarget.syncTo(this);\n\n        // revert to original\n        this.position.copy(original.position);\n        this.angle = original.angle;\n        this.angularVelocity = original.angularVelocity;\n        this.velocity.copy(original.velocity);\n\n        this.bendingIncrements = increments;\n        this.bendingOptions = bending;\n\n        this.refreshToPhysics();\n    }\n\n    syncTo(other, options) {\n\n        super.syncTo(other);\n\n        this.position.copy(other.position);\n        this.angle = other.angle;\n        this.angularVelocity = other.angularVelocity;\n\n        if (!options || !options.keepVelocity) {\n            this.velocity.copy(other.velocity);\n        }\n\n        if (this.physicsObj) this.refreshToPhysics();\n    }\n\n    // update position, angle, angular velocity, and velocity from new physical state.\n    refreshFromPhysics() {\n        this.copyVector(this.physicsObj.position, this.position);\n        this.copyVector(this.physicsObj.velocity, this.velocity);\n        this.angle = this.physicsObj.angle;\n        this.angularVelocity = this.physicsObj.angularVelocity;\n    }\n\n    // generic vector copy.  We need this because different\n    // physics engines have different implementations.\n    // TODO: Better implementation: the physics engine implementor\n    // should define copyFromLanceVector and copyToLanceVector\n    copyVector(source, target) {\n        let sourceVec = source;\n        if (typeof source[0] === 'number' && typeof source[1] === 'number')\n            sourceVec = { x: source[0], y: source[1] };\n\n        if (typeof target.copy === 'function') {\n            target.copy(sourceVec);\n        } else if (target instanceof Float32Array) {\n            target[0] = sourceVec.x;\n            target[1] = sourceVec.y;\n        } else {\n            target.x = sourceVec.x;\n            target.y = sourceVec.y;\n        }\n    }\n\n    // update position, angle, angular velocity, and velocity from new game state.\n    refreshToPhysics() {\n        this.copyVector(this.position, this.physicsObj.position);\n        this.copyVector(this.velocity, this.physicsObj.velocity);\n        this.physicsObj.angle = this.angle;\n        this.physicsObj.angularVelocity = this.angularVelocity;\n    }\n\n    // apply one increment of bending\n    applyIncrementalBending(stepDesc) {\n        if (this.bendingIncrements === 0)\n            return;\n\n        let timeFactor = 1;\n        if (stepDesc && stepDesc.dt)\n            timeFactor = stepDesc.dt / (1000 / 60);\n\n        const posDelta = this.bendingPositionDelta.clone().multiplyScalar(timeFactor);\n        const velDelta = this.bendingVelocityDelta.clone().multiplyScalar(timeFactor);\n        this.position.add(posDelta);\n        this.velocity.add(velDelta);\n        this.angularVelocity += (this.bendingAVDelta * timeFactor);\n        this.angle += (this.bendingAngleDelta * timeFactor);\n\n        this.bendingIncrements--;\n    }\n\n    // interpolate implementation\n    interpolate(nextObj, percent) {\n\n        // slerp to target position\n        this.position.lerp(nextObj.position, percent);\n        this.angle = MathUtils.interpolateDeltaWithWrapping(this.angle, nextObj.angle, percent, 0, 2 * Math.PI);\n    }\n}\n\nexport default PhysicalObject2D;\n","import GameObject from './GameObject';\nimport BaseTypes from './BaseTypes';\nimport ThreeVector from './ThreeVector';\nimport Quaternion from './Quaternion';\n\n/**\n * The PhysicalObject3D is the base class for physical game objects\n */\nclass PhysicalObject3D extends GameObject {\n\n    /**\n    * The netScheme is a dictionary of attributes in this game\n    * object.  The attributes listed in the netScheme are those exact\n    * attributes which will be serialized and sent from the server\n    * to each client on every server update.\n    * The netScheme member is implemented as a getter.\n    *\n    * You may choose not to implement this method, in which\n    * case your object only transmits the default attributes\n    * which are already part of {@link PhysicalObject3D}.\n    * But if you choose to add more attributes, make sure\n    * the return value includes the netScheme of the super class.\n    *\n    * @memberof PhysicalObject3D\n    * @member {Object} netScheme\n    * @example\n    *     static get netScheme() {\n    *       return Object.assign({\n    *           mojo: { type: BaseTypes.TYPES.UINT8 },\n    *         }, super.netScheme);\n    *     }\n    */\n    static get netScheme() {\n        return Object.assign({\n            position: { type: BaseTypes.TYPES.CLASSINSTANCE },\n            quaternion: { type: BaseTypes.TYPES.CLASSINSTANCE },\n            velocity: { type: BaseTypes.TYPES.CLASSINSTANCE },\n            angularVelocity: { type: BaseTypes.TYPES.CLASSINSTANCE }\n        }, super.netScheme);\n    }\n\n    /**\n    * Creates an instance of a physical object.\n    * Override to provide starting values for position, velocity, quaternion and angular velocity.\n    * NOTE: all subclasses of this class must comply with this constructor signature.\n    *       This is required because the engine will create temporary instances when\n    *       syncs arrive on the clients.\n    * @param {GameEngine} gameEngine - the gameEngine this object will be used in\n    * @param {Object} options - options for the new object. See {@link GameObject}\n    * @param {Object} props - properties to be set in the new object\n    * @param {ThreeVector} props.position - position vector\n    * @param {ThreeVector} props.velocity - velocity vector\n    * @param {Quaternion} props.quaternion - orientation quaternion\n    * @param {ThreeVector} props.angularVelocity - 3-vector representation of angular velocity\n    */\n    constructor(gameEngine, options, props) {\n        super(gameEngine, options, props);\n        this.bendingIncrements = 0;\n\n        // set default position, velocity and quaternion\n        this.position = new ThreeVector(0, 0, 0);\n        this.velocity = new ThreeVector(0, 0, 0);\n        this.quaternion = new Quaternion(1, 0, 0, 0);\n        this.angularVelocity = new ThreeVector(0, 0, 0);\n\n        // use values if provided\n        props = props || {};\n        if (props.position) this.position.copy(props.position);\n        if (props.velocity) this.velocity.copy(props.velocity);\n        if (props.quaternion) this.quaternion.copy(props.quaternion);\n        if (props.angularVelocity) this.angularVelocity.copy(props.angularVelocity);\n\n        this.class = PhysicalObject3D;\n    }\n\n    /**\n     * Formatted textual description of the dynamic object.\n     * The output of this method is used to describe each instance in the traces,\n     * which significantly helps in debugging.\n     *\n     * @return {String} description - a string describing the PhysicalObject3D\n     */\n    toString() {\n        let p = this.position.toString();\n        let v = this.velocity.toString();\n        let q = this.quaternion.toString();\n        let a = this.angularVelocity.toString();\n        return `phyObj[${this.id}] player${this.playerId} Pos${p} Vel${v} Dir${q} AVel${a}`;\n    }\n\n    // display object's physical attributes as a string\n    // for debugging purposes mostly\n    bendingToString() {\n        if (this.bendingOptions)\n            return `bend=${this.bendingOptions.percent} deltaPos=${this.bendingPositionDelta} deltaVel=${this.bendingVelocityDelta} deltaQuat=${this.bendingQuaternionDelta}`;\n        return 'no bending';\n    }\n\n    // derive and save the bending increment parameters:\n    // - bendingPositionDelta\n    // - bendingAVDelta\n    // - bendingQuaternionDelta\n    // these can later be used to \"bend\" incrementally from the state described\n    // by \"original\" to the state described by \"self\"\n    bendToCurrent(original, percent, worldSettings, isLocal, increments) {\n\n        let bending = { increments, percent };\n        // if the object has defined a bending multiples for this object, use them\n        let positionBending = Object.assign({}, bending, this.bending.position);\n        let velocityBending = Object.assign({}, bending, this.bending.velocity);\n\n        // check for local object overrides to bendingTarget\n        if (isLocal) {\n            Object.assign(positionBending, this.bending.positionLocal);\n            Object.assign(velocityBending, this.bending.velocityLocal);\n        }\n\n        // get the incremental delta position & velocity\n        this.incrementScale = percent / increments;\n        this.bendingPositionDelta = original.position.getBendingDelta(this.position, positionBending);\n        this.bendingVelocityDelta = original.velocity.getBendingDelta(this.velocity, velocityBending);\n        this.bendingAVDelta = new ThreeVector(0, 0, 0);\n\n        // get the incremental quaternion rotation\n        this.bendingQuaternionDelta = (new Quaternion()).copy(original.quaternion).conjugate();\n        this.bendingQuaternionDelta.multiply(this.quaternion);\n\n        let axisAngle = this.bendingQuaternionDelta.toAxisAngle();\n        axisAngle.angle *= this.incrementScale;\n        this.bendingQuaternionDelta.setFromAxisAngle(axisAngle.axis, axisAngle.angle);\n\n        this.bendingTarget = (new this.constructor());\n        this.bendingTarget.syncTo(this);\n\n        this.position.copy(original.position);\n        this.quaternion.copy(original.quaternion);\n        this.angularVelocity.copy(original.angularVelocity);\n\n        this.bendingIncrements = increments;\n        this.bendingOptions = bending;\n\n        this.refreshToPhysics();\n    }\n\n    syncTo(other, options) {\n\n        super.syncTo(other);\n\n        this.position.copy(other.position);\n        this.quaternion.copy(other.quaternion);\n        this.angularVelocity.copy(other.angularVelocity);\n\n        if (!options || !options.keepVelocity) {\n            this.velocity.copy(other.velocity);\n        }\n\n        if (this.physicsObj)\n            this.refreshToPhysics();\n    }\n\n    // update position, quaternion, and velocity from new physical state.\n    refreshFromPhysics() {\n        this.position.copy(this.physicsObj.position);\n        this.quaternion.copy(this.physicsObj.quaternion);\n        this.velocity.copy(this.physicsObj.velocity);\n        this.angularVelocity.copy(this.physicsObj.angularVelocity);\n    }\n\n    // update position, quaternion, and velocity from new game state.\n    refreshToPhysics() {\n        if (!this.physicsObj) return\n        this.physicsObj.position.copy(this.position);\n        this.physicsObj.quaternion.copy(this.quaternion);\n        this.physicsObj.velocity.copy(this.velocity);\n        this.physicsObj.angularVelocity.copy(this.angularVelocity);\n    }\n\n    // apply one increment of bending\n    applyIncrementalBending(stepDesc) {\n        if (this.bendingIncrements === 0)\n            return;\n\n        if (stepDesc && stepDesc.dt) {\n            const timeFactor = stepDesc.dt / (1000 / 60);\n            // TODO: use clone() below.  it's cleaner\n            const posDelta = (new ThreeVector()).copy(this.bendingPositionDelta).multiplyScalar(timeFactor);\n            const avDelta = (new ThreeVector()).copy(this.bendingAVDelta).multiplyScalar(timeFactor);\n            this.position.add(posDelta);\n            this.angularVelocity.add(avDelta);\n\n            // one approach to orientation bending is slerp:\n            this.quaternion.slerp(this.bendingTarget.quaternion, this.incrementScale * timeFactor * 0.8);\n        } else {\n            this.position.add(this.bendingPositionDelta);\n            this.angularVelocity.add(this.bendingAVDelta);\n            this.quaternion.slerp(this.bendingTarget.quaternion, this.incrementScale);\n        }\n\n        // alternative: fixed delta-quaternion correction\n        // TODO: adjust quaternion bending to dt timefactor precision\n        // this.quaternion.multiply(this.bendingQuaternionDelta);\n        this.bendingIncrements--;\n    }\n\n    // interpolate implementation\n    interpolate(nextObj, percent) {\n\n        // slerp to target position\n        this.position.lerp(nextObj.position, percent);\n        this.quaternion.slerp(nextObj.quaternion, percent);\n    }\n}\n\nexport default PhysicalObject3D;\n","import Trace from './Trace.js';\nimport Utils from './Utils'\n\nexport default {\n    Trace,\n    Utils\n};\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => enableOverride === null ? createDebug.enabled(namespace) : enableOverride,\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.url = void 0;\nconst parseuri = require(\"parseuri\");\nconst debug = require(\"debug\")(\"socket.io-client:url\");\n/**\n * URL parser.\n *\n * @param uri - url\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nfunction url(uri, loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            debug(\"protocol-less url %s\", uri);\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        debug(\"parse %s\", uri);\n        obj = parseuri(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\nexports.url = url;\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","module.exports = (() => {\n  if (typeof self !== \"undefined\") {\n    return self;\n  } else if (typeof window !== \"undefined\") {\n    return window;\n  } else {\n    return Function(\"return this\")();\n  }\n})();\n","// browser shim for xmlhttprequest module\n\nconst hasCORS = require(\"has-cors\");\nconst globalThis = require(\"./globalThis\");\n\nmodule.exports = function(opts) {\n  const xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  const xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  const enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) {}\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if (\"undefined\" !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) {}\n\n  if (!xdomain) {\n    try {\n      return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\n        \"Microsoft.XMLHTTP\"\n      );\n    } catch (e) {}\n  }\n};\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\n\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(key => {\n  PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\n\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\n\nmodule.exports = {\n  PACKET_TYPES,\n  PACKET_TYPES_REVERSE,\n  ERROR_PACKET\n};\n","const { PACKET_TYPES } = require(\"./commons\");\n\nconst withNativeBlob =\n  typeof Blob === \"function\" ||\n  (typeof Blob !== \"undefined\" &&\n    Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n  return typeof ArrayBuffer.isView === \"function\"\n    ? ArrayBuffer.isView(obj)\n    : obj && obj.buffer instanceof ArrayBuffer;\n};\n\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n  if (withNativeBlob && data instanceof Blob) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(data, callback);\n    }\n  } else if (\n    withNativeArrayBuffer &&\n    (data instanceof ArrayBuffer || isView(data))\n  ) {\n    if (supportsBinary) {\n      return callback(data instanceof ArrayBuffer ? data : data.buffer);\n    } else {\n      return encodeBlobAsBase64(new Blob([data]), callback);\n    }\n  }\n  // plain string\n  return callback(PACKET_TYPES[type] + (data || \"\"));\n};\n\nconst encodeBlobAsBase64 = (data, callback) => {\n  const fileReader = new FileReader();\n  fileReader.onload = function() {\n    const content = fileReader.result.split(\",\")[1];\n    callback(\"b\" + content);\n  };\n  return fileReader.readAsDataURL(data);\n};\n\nmodule.exports = encodePacket;\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","const { PACKET_TYPES_REVERSE, ERROR_PACKET } = require(\"./commons\");\n\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n\nlet base64decoder;\nif (withNativeArrayBuffer) {\n  base64decoder = require(\"base64-arraybuffer\");\n}\n\nconst decodePacket = (encodedPacket, binaryType) => {\n  if (typeof encodedPacket !== \"string\") {\n    return {\n      type: \"message\",\n      data: mapBinary(encodedPacket, binaryType)\n    };\n  }\n  const type = encodedPacket.charAt(0);\n  if (type === \"b\") {\n    return {\n      type: \"message\",\n      data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n    };\n  }\n  const packetType = PACKET_TYPES_REVERSE[type];\n  if (!packetType) {\n    return ERROR_PACKET;\n  }\n  return encodedPacket.length > 1\n    ? {\n        type: PACKET_TYPES_REVERSE[type],\n        data: encodedPacket.substring(1)\n      }\n    : {\n        type: PACKET_TYPES_REVERSE[type]\n      };\n};\n\nconst decodeBase64Packet = (data, binaryType) => {\n  if (base64decoder) {\n    const decoded = base64decoder.decode(data);\n    return mapBinary(decoded, binaryType);\n  } else {\n    return { base64: true, data }; // fallback for old browsers\n  }\n};\n\nconst mapBinary = (data, binaryType) => {\n  switch (binaryType) {\n    case \"blob\":\n      return data instanceof ArrayBuffer ? new Blob([data]) : data;\n    case \"arraybuffer\":\n    default:\n      return data; // assuming the data is already an ArrayBuffer\n  }\n};\n\nmodule.exports = decodePacket;\n","const encodePacket = require(\"./encodePacket\");\nconst decodePacket = require(\"./decodePacket\");\n\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\n\nconst encodePayload = (packets, callback) => {\n  // some packets may be added to the array while encoding, so the initial length must be saved\n  const length = packets.length;\n  const encodedPackets = new Array(length);\n  let count = 0;\n\n  packets.forEach((packet, i) => {\n    // force base64 encoding for binary packets\n    encodePacket(packet, false, encodedPacket => {\n      encodedPackets[i] = encodedPacket;\n      if (++count === length) {\n        callback(encodedPackets.join(SEPARATOR));\n      }\n    });\n  });\n};\n\nconst decodePayload = (encodedPayload, binaryType) => {\n  const encodedPackets = encodedPayload.split(SEPARATOR);\n  const packets = [];\n  for (let i = 0; i < encodedPackets.length; i++) {\n    const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n    packets.push(decodedPacket);\n    if (decodedPacket.type === \"error\") {\n      break;\n    }\n  }\n  return packets;\n};\n\nmodule.exports = {\n  protocol: 4,\n  encodePacket,\n  encodePayload,\n  decodePacket,\n  decodePayload\n};\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","const parser = require(\"engine.io-parser\");\nconst Emitter = require(\"component-emitter\");\n\nclass Transport extends Emitter {\n  /**\n   * Transport abstract constructor.\n   *\n   * @param {Object} options.\n   * @api private\n   */\n  constructor(opts) {\n    super();\n\n    this.opts = opts;\n    this.query = opts.query;\n    this.readyState = \"\";\n    this.socket = opts.socket;\n  }\n\n  /**\n   * Emits an error.\n   *\n   * @param {String} str\n   * @return {Transport} for chaining\n   * @api public\n   */\n  onError(msg, desc) {\n    const err = new Error(msg);\n    err.type = \"TransportError\";\n    err.description = desc;\n    this.emit(\"error\", err);\n    return this;\n  }\n\n  /**\n   * Opens the transport.\n   *\n   * @api public\n   */\n  open() {\n    if (\"closed\" === this.readyState || \"\" === this.readyState) {\n      this.readyState = \"opening\";\n      this.doOpen();\n    }\n\n    return this;\n  }\n\n  /**\n   * Closes the transport.\n   *\n   * @api private\n   */\n  close() {\n    if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n      this.doClose();\n      this.onClose();\n    }\n\n    return this;\n  }\n\n  /**\n   * Sends multiple packets.\n   *\n   * @param {Array} packets\n   * @api private\n   */\n  send(packets) {\n    if (\"open\" === this.readyState) {\n      this.write(packets);\n    } else {\n      throw new Error(\"Transport not open\");\n    }\n  }\n\n  /**\n   * Called upon open\n   *\n   * @api private\n   */\n  onOpen() {\n    this.readyState = \"open\";\n    this.writable = true;\n    this.emit(\"open\");\n  }\n\n  /**\n   * Called with data.\n   *\n   * @param {String} data\n   * @api private\n   */\n  onData(data) {\n    const packet = parser.decodePacket(data, this.socket.binaryType);\n    this.onPacket(packet);\n  }\n\n  /**\n   * Called with a decoded packet.\n   */\n  onPacket(packet) {\n    this.emit(\"packet\", packet);\n  }\n\n  /**\n   * Called upon close.\n   *\n   * @api private\n   */\n  onClose() {\n    this.readyState = \"closed\";\n    this.emit(\"close\");\n  }\n}\n\nmodule.exports = Transport;\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","const Transport = require(\"../transport\");\nconst parseqs = require(\"parseqs\");\nconst parser = require(\"engine.io-parser\");\nconst yeast = require(\"yeast\");\n\nconst debug = require(\"debug\")(\"engine.io-client:polling\");\n\nclass Polling extends Transport {\n  /**\n   * Transport name.\n   */\n  get name() {\n    return \"polling\";\n  }\n\n  /**\n   * Opens the socket (triggers polling). We write a PING message to determine\n   * when the transport is open.\n   *\n   * @api private\n   */\n  doOpen() {\n    this.poll();\n  }\n\n  /**\n   * Pauses polling.\n   *\n   * @param {Function} callback upon buffers are flushed and transport is paused\n   * @api private\n   */\n  pause(onPause) {\n    const self = this;\n\n    this.readyState = \"pausing\";\n\n    function pause() {\n      debug(\"paused\");\n      self.readyState = \"paused\";\n      onPause();\n    }\n\n    if (this.polling || !this.writable) {\n      let total = 0;\n\n      if (this.polling) {\n        debug(\"we are currently polling - waiting to pause\");\n        total++;\n        this.once(\"pollComplete\", function() {\n          debug(\"pre-pause polling complete\");\n          --total || pause();\n        });\n      }\n\n      if (!this.writable) {\n        debug(\"we are currently writing - waiting to pause\");\n        total++;\n        this.once(\"drain\", function() {\n          debug(\"pre-pause writing complete\");\n          --total || pause();\n        });\n      }\n    } else {\n      pause();\n    }\n  }\n\n  /**\n   * Starts polling cycle.\n   *\n   * @api public\n   */\n  poll() {\n    debug(\"polling\");\n    this.polling = true;\n    this.doPoll();\n    this.emit(\"poll\");\n  }\n\n  /**\n   * Overloads onData to detect payloads.\n   *\n   * @api private\n   */\n  onData(data) {\n    const self = this;\n    debug(\"polling got data %s\", data);\n    const callback = function(packet, index, total) {\n      // if its the first message we consider the transport open\n      if (\"opening\" === self.readyState && packet.type === \"open\") {\n        self.onOpen();\n      }\n\n      // if its a close packet, we close the ongoing requests\n      if (\"close\" === packet.type) {\n        self.onClose();\n        return false;\n      }\n\n      // otherwise bypass onData and handle the message\n      self.onPacket(packet);\n    };\n\n    // decode payload\n    parser.decodePayload(data, this.socket.binaryType).forEach(callback);\n\n    // if an event did not trigger closing\n    if (\"closed\" !== this.readyState) {\n      // if we got data we're not polling\n      this.polling = false;\n      this.emit(\"pollComplete\");\n\n      if (\"open\" === this.readyState) {\n        this.poll();\n      } else {\n        debug('ignoring poll - transport state \"%s\"', this.readyState);\n      }\n    }\n  }\n\n  /**\n   * For polling, send a close packet.\n   *\n   * @api private\n   */\n  doClose() {\n    const self = this;\n\n    function close() {\n      debug(\"writing close packet\");\n      self.write([{ type: \"close\" }]);\n    }\n\n    if (\"open\" === this.readyState) {\n      debug(\"transport open - closing\");\n      close();\n    } else {\n      // in case we're trying to close while\n      // handshaking is in progress (GH-164)\n      debug(\"transport not open - deferring close\");\n      this.once(\"open\", close);\n    }\n  }\n\n  /**\n   * Writes a packets payload.\n   *\n   * @param {Array} data packets\n   * @param {Function} drain callback\n   * @api private\n   */\n  write(packets) {\n    this.writable = false;\n\n    parser.encodePayload(packets, data => {\n      this.doWrite(data, () => {\n        this.writable = true;\n        this.emit(\"drain\");\n      });\n    });\n  }\n\n  /**\n   * Generates uri for connection.\n   *\n   * @api private\n   */\n  uri() {\n    let query = this.query || {};\n    const schema = this.opts.secure ? \"https\" : \"http\";\n    let port = \"\";\n\n    // cache busting is forced\n    if (false !== this.opts.timestampRequests) {\n      query[this.opts.timestampParam] = yeast();\n    }\n\n    if (!this.supportsBinary && !query.sid) {\n      query.b64 = 1;\n    }\n\n    query = parseqs.encode(query);\n\n    // avoid port if default for schema\n    if (\n      this.opts.port &&\n      ((\"https\" === schema && Number(this.opts.port) !== 443) ||\n        (\"http\" === schema && Number(this.opts.port) !== 80))\n    ) {\n      port = \":\" + this.opts.port;\n    }\n\n    // prepend ? to query\n    if (query.length) {\n      query = \"?\" + query;\n    }\n\n    const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n    return (\n      schema +\n      \"://\" +\n      (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n      port +\n      this.opts.path +\n      query\n    );\n  }\n}\n\nmodule.exports = Polling;\n","module.exports.pick = (obj, ...attr) => {\n  return attr.reduce((acc, k) => {\n    acc[k] = obj[k];\n    return acc;\n  }, {});\n};\n","/* global attachEvent */\n\nconst XMLHttpRequest = require(\"xmlhttprequest-ssl\");\nconst Polling = require(\"./polling\");\nconst Emitter = require(\"component-emitter\");\nconst { pick } = require(\"../util\");\nconst globalThis = require(\"../globalThis\");\n\nconst debug = require(\"debug\")(\"engine.io-client:polling-xhr\");\n\n/**\n * Empty function\n */\n\nfunction empty() {}\n\nconst hasXHR2 = (function() {\n  const xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\nclass XHR extends Polling {\n  /**\n   * XHR Polling constructor.\n   *\n   * @param {Object} opts\n   * @api public\n   */\n  constructor(opts) {\n    super(opts);\n\n    if (typeof location !== \"undefined\") {\n      const isSSL = \"https:\" === location.protocol;\n      let port = location.port;\n\n      // some user agents have empty `location.port`\n      if (!port) {\n        port = isSSL ? 443 : 80;\n      }\n\n      this.xd =\n        (typeof location !== \"undefined\" &&\n          opts.hostname !== location.hostname) ||\n        port !== opts.port;\n      this.xs = opts.secure !== isSSL;\n    }\n    /**\n     * XHR supports binary\n     */\n    const forceBase64 = opts && opts.forceBase64;\n    this.supportsBinary = hasXHR2 && !forceBase64;\n  }\n\n  /**\n   * Creates a request.\n   *\n   * @param {String} method\n   * @api private\n   */\n  request(opts = {}) {\n    Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts);\n    return new Request(this.uri(), opts);\n  }\n\n  /**\n   * Sends data.\n   *\n   * @param {String} data to send.\n   * @param {Function} called upon flush.\n   * @api private\n   */\n  doWrite(data, fn) {\n    const req = this.request({\n      method: \"POST\",\n      data: data\n    });\n    const self = this;\n    req.on(\"success\", fn);\n    req.on(\"error\", function(err) {\n      self.onError(\"xhr post error\", err);\n    });\n  }\n\n  /**\n   * Starts a poll cycle.\n   *\n   * @api private\n   */\n  doPoll() {\n    debug(\"xhr poll\");\n    const req = this.request();\n    const self = this;\n    req.on(\"data\", function(data) {\n      self.onData(data);\n    });\n    req.on(\"error\", function(err) {\n      self.onError(\"xhr poll error\", err);\n    });\n    this.pollXhr = req;\n  }\n}\n\nclass Request extends Emitter {\n  /**\n   * Request constructor\n   *\n   * @param {Object} options\n   * @api public\n   */\n  constructor(uri, opts) {\n    super();\n    this.opts = opts;\n\n    this.method = opts.method || \"GET\";\n    this.uri = uri;\n    this.async = false !== opts.async;\n    this.data = undefined !== opts.data ? opts.data : null;\n\n    this.create();\n  }\n\n  /**\n   * Creates the XHR object and sends the request.\n   *\n   * @api private\n   */\n  create() {\n    const opts = pick(\n      this.opts,\n      \"agent\",\n      \"enablesXDR\",\n      \"pfx\",\n      \"key\",\n      \"passphrase\",\n      \"cert\",\n      \"ca\",\n      \"ciphers\",\n      \"rejectUnauthorized\"\n    );\n    opts.xdomain = !!this.opts.xd;\n    opts.xscheme = !!this.opts.xs;\n\n    const xhr = (this.xhr = new XMLHttpRequest(opts));\n    const self = this;\n\n    try {\n      debug(\"xhr open %s: %s\", this.method, this.uri);\n      xhr.open(this.method, this.uri, this.async);\n      try {\n        if (this.opts.extraHeaders) {\n          xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n          for (let i in this.opts.extraHeaders) {\n            if (this.opts.extraHeaders.hasOwnProperty(i)) {\n              xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n            }\n          }\n        }\n      } catch (e) {}\n\n      if (\"POST\" === this.method) {\n        try {\n          xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n        } catch (e) {}\n      }\n\n      try {\n        xhr.setRequestHeader(\"Accept\", \"*/*\");\n      } catch (e) {}\n\n      // ie6 check\n      if (\"withCredentials\" in xhr) {\n        xhr.withCredentials = this.opts.withCredentials;\n      }\n\n      if (this.opts.requestTimeout) {\n        xhr.timeout = this.opts.requestTimeout;\n      }\n\n      if (this.hasXDR()) {\n        xhr.onload = function() {\n          self.onLoad();\n        };\n        xhr.onerror = function() {\n          self.onError(xhr.responseText);\n        };\n      } else {\n        xhr.onreadystatechange = function() {\n          if (4 !== xhr.readyState) return;\n          if (200 === xhr.status || 1223 === xhr.status) {\n            self.onLoad();\n          } else {\n            // make sure the `error` event handler that's user-set\n            // does not throw in the same tick and gets caught here\n            setTimeout(function() {\n              self.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n            }, 0);\n          }\n        };\n      }\n\n      debug(\"xhr data %s\", this.data);\n      xhr.send(this.data);\n    } catch (e) {\n      // Need to defer since .create() is called directly from the constructor\n      // and thus the 'error' event can only be only bound *after* this exception\n      // occurs.  Therefore, also, we cannot throw here at all.\n      setTimeout(function() {\n        self.onError(e);\n      }, 0);\n      return;\n    }\n\n    if (typeof document !== \"undefined\") {\n      this.index = Request.requestsCount++;\n      Request.requests[this.index] = this;\n    }\n  }\n\n  /**\n   * Called upon successful response.\n   *\n   * @api private\n   */\n  onSuccess() {\n    this.emit(\"success\");\n    this.cleanup();\n  }\n\n  /**\n   * Called if we have data.\n   *\n   * @api private\n   */\n  onData(data) {\n    this.emit(\"data\", data);\n    this.onSuccess();\n  }\n\n  /**\n   * Called upon error.\n   *\n   * @api private\n   */\n  onError(err) {\n    this.emit(\"error\", err);\n    this.cleanup(true);\n  }\n\n  /**\n   * Cleans up house.\n   *\n   * @api private\n   */\n  cleanup(fromError) {\n    if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n      return;\n    }\n    // xmlhttprequest\n    if (this.hasXDR()) {\n      this.xhr.onload = this.xhr.onerror = empty;\n    } else {\n      this.xhr.onreadystatechange = empty;\n    }\n\n    if (fromError) {\n      try {\n        this.xhr.abort();\n      } catch (e) {}\n    }\n\n    if (typeof document !== \"undefined\") {\n      delete Request.requests[this.index];\n    }\n\n    this.xhr = null;\n  }\n\n  /**\n   * Called upon load.\n   *\n   * @api private\n   */\n  onLoad() {\n    const data = this.xhr.responseText;\n    if (data !== null) {\n      this.onData(data);\n    }\n  }\n\n  /**\n   * Check if it has XDomainRequest.\n   *\n   * @api private\n   */\n  hasXDR() {\n    return typeof XDomainRequest !== \"undefined\" && !this.xs && this.enablesXDR;\n  }\n\n  /**\n   * Aborts the request.\n   *\n   * @api public\n   */\n  abort() {\n    this.cleanup();\n  }\n}\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== \"undefined\") {\n  if (typeof attachEvent === \"function\") {\n    attachEvent(\"onunload\", unloadHandler);\n  } else if (typeof addEventListener === \"function\") {\n    const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler() {\n  for (let i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n","const Polling = require(\"./polling\");\nconst globalThis = require(\"../globalThis\");\n\nconst rNewline = /\\n/g;\nconst rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nlet callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty() {}\n\nclass JSONPPolling extends Polling {\n  /**\n   * JSONP Polling constructor.\n   *\n   * @param {Object} opts.\n   * @api public\n   */\n  constructor(opts) {\n    super(opts);\n\n    this.query = this.query || {};\n\n    // define global callbacks array if not present\n    // we do this here (lazily) to avoid unneeded global pollution\n    if (!callbacks) {\n      // we need to consider multiple engines in the same page\n      callbacks = globalThis.___eio = globalThis.___eio || [];\n    }\n\n    // callback identifier\n    this.index = callbacks.length;\n\n    // add callback to jsonp global\n    const self = this;\n    callbacks.push(function(msg) {\n      self.onData(msg);\n    });\n\n    // append to query string\n    this.query.j = this.index;\n\n    // prevent spurious errors from being emitted when the window is unloaded\n    if (typeof addEventListener === \"function\") {\n      addEventListener(\n        \"beforeunload\",\n        function() {\n          if (self.script) self.script.onerror = empty;\n        },\n        false\n      );\n    }\n  }\n\n  /**\n   * JSONP only supports binary as base64 encoded strings\n   */\n  get supportsBinary() {\n    return false;\n  }\n\n  /**\n   * Closes the socket.\n   *\n   * @api private\n   */\n  doClose() {\n    if (this.script) {\n      this.script.parentNode.removeChild(this.script);\n      this.script = null;\n    }\n\n    if (this.form) {\n      this.form.parentNode.removeChild(this.form);\n      this.form = null;\n      this.iframe = null;\n    }\n\n    super.doClose();\n  }\n\n  /**\n   * Starts a poll cycle.\n   *\n   * @api private\n   */\n  doPoll() {\n    const self = this;\n    const script = document.createElement(\"script\");\n\n    if (this.script) {\n      this.script.parentNode.removeChild(this.script);\n      this.script = null;\n    }\n\n    script.async = true;\n    script.src = this.uri();\n    script.onerror = function(e) {\n      self.onError(\"jsonp poll error\", e);\n    };\n\n    const insertAt = document.getElementsByTagName(\"script\")[0];\n    if (insertAt) {\n      insertAt.parentNode.insertBefore(script, insertAt);\n    } else {\n      (document.head || document.body).appendChild(script);\n    }\n    this.script = script;\n\n    const isUAgecko =\n      \"undefined\" !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n    if (isUAgecko) {\n      setTimeout(function() {\n        const iframe = document.createElement(\"iframe\");\n        document.body.appendChild(iframe);\n        document.body.removeChild(iframe);\n      }, 100);\n    }\n  }\n\n  /**\n   * Writes with a hidden iframe.\n   *\n   * @param {String} data to send\n   * @param {Function} called upon flush.\n   * @api private\n   */\n  doWrite(data, fn) {\n    const self = this;\n    let iframe;\n\n    if (!this.form) {\n      const form = document.createElement(\"form\");\n      const area = document.createElement(\"textarea\");\n      const id = (this.iframeId = \"eio_iframe_\" + this.index);\n\n      form.className = \"socketio\";\n      form.style.position = \"absolute\";\n      form.style.top = \"-1000px\";\n      form.style.left = \"-1000px\";\n      form.target = id;\n      form.method = \"POST\";\n      form.setAttribute(\"accept-charset\", \"utf-8\");\n      area.name = \"d\";\n      form.appendChild(area);\n      document.body.appendChild(form);\n\n      this.form = form;\n      this.area = area;\n    }\n\n    this.form.action = this.uri();\n\n    function complete() {\n      initIframe();\n      fn();\n    }\n\n    function initIframe() {\n      if (self.iframe) {\n        try {\n          self.form.removeChild(self.iframe);\n        } catch (e) {\n          self.onError(\"jsonp polling iframe removal error\", e);\n        }\n      }\n\n      try {\n        // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n        const html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n        iframe = document.createElement(html);\n      } catch (e) {\n        iframe = document.createElement(\"iframe\");\n        iframe.name = self.iframeId;\n        iframe.src = \"javascript:0\";\n      }\n\n      iframe.id = self.iframeId;\n\n      self.form.appendChild(iframe);\n      self.iframe = iframe;\n    }\n\n    initIframe();\n\n    // escape \\n to prevent it from being converted into \\r\\n by some UAs\n    // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n    data = data.replace(rEscapedNewline, \"\\\\\\n\");\n    this.area.value = data.replace(rNewline, \"\\\\n\");\n\n    try {\n      this.form.submit();\n    } catch (e) {}\n\n    if (this.iframe.attachEvent) {\n      this.iframe.onreadystatechange = function() {\n        if (self.iframe.readyState === \"complete\") {\n          complete();\n        }\n      };\n    } else {\n      this.iframe.onload = complete;\n    }\n  }\n}\n\nmodule.exports = JSONPPolling;\n","const globalThis = require(\"../globalThis\");\n\nmodule.exports = {\n  WebSocket: globalThis.WebSocket || globalThis.MozWebSocket,\n  usingBrowserWebSocket: true,\n  defaultBinaryType: \"arraybuffer\"\n};\n","const Transport = require(\"../transport\");\nconst parser = require(\"engine.io-parser\");\nconst parseqs = require(\"parseqs\");\nconst yeast = require(\"yeast\");\nconst { pick } = require(\"../util\");\nconst {\n  WebSocket,\n  usingBrowserWebSocket,\n  defaultBinaryType\n} = require(\"./websocket-constructor\");\n\nconst debug = require(\"debug\")(\"engine.io-client:websocket\");\n\n// detect ReactNative environment\nconst isReactNative =\n  typeof navigator !== \"undefined\" &&\n  typeof navigator.product === \"string\" &&\n  navigator.product.toLowerCase() === \"reactnative\";\n\nclass WS extends Transport {\n  /**\n   * WebSocket transport constructor.\n   *\n   * @api {Object} connection options\n   * @api public\n   */\n  constructor(opts) {\n    super(opts);\n\n    this.supportsBinary = !opts.forceBase64;\n  }\n\n  /**\n   * Transport name.\n   *\n   * @api public\n   */\n  get name() {\n    return \"websocket\";\n  }\n\n  /**\n   * Opens socket.\n   *\n   * @api private\n   */\n  doOpen() {\n    if (!this.check()) {\n      // let probe timeout\n      return;\n    }\n\n    const uri = this.uri();\n    const protocols = this.opts.protocols;\n\n    // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n    const opts = isReactNative\n      ? {}\n      : pick(\n          this.opts,\n          \"agent\",\n          \"perMessageDeflate\",\n          \"pfx\",\n          \"key\",\n          \"passphrase\",\n          \"cert\",\n          \"ca\",\n          \"ciphers\",\n          \"rejectUnauthorized\",\n          \"localAddress\"\n        );\n\n    if (this.opts.extraHeaders) {\n      opts.headers = this.opts.extraHeaders;\n    }\n\n    try {\n      this.ws =\n        usingBrowserWebSocket && !isReactNative\n          ? protocols\n            ? new WebSocket(uri, protocols)\n            : new WebSocket(uri)\n          : new WebSocket(uri, protocols, opts);\n    } catch (err) {\n      return this.emit(\"error\", err);\n    }\n\n    this.ws.binaryType = this.socket.binaryType || defaultBinaryType;\n\n    this.addEventListeners();\n  }\n\n  /**\n   * Adds event listeners to the socket\n   *\n   * @api private\n   */\n  addEventListeners() {\n    const self = this;\n\n    this.ws.onopen = function() {\n      self.onOpen();\n    };\n    this.ws.onclose = function() {\n      self.onClose();\n    };\n    this.ws.onmessage = function(ev) {\n      self.onData(ev.data);\n    };\n    this.ws.onerror = function(e) {\n      self.onError(\"websocket error\", e);\n    };\n  }\n\n  /**\n   * Writes data to socket.\n   *\n   * @param {Array} array of packets.\n   * @api private\n   */\n  write(packets) {\n    const self = this;\n    this.writable = false;\n\n    // encodePacket efficient as it uses WS framing\n    // no need for encodePayload\n    let total = packets.length;\n    let i = 0;\n    const l = total;\n    for (; i < l; i++) {\n      (function(packet) {\n        parser.encodePacket(packet, self.supportsBinary, function(data) {\n          // always create a new object (GH-437)\n          const opts = {};\n          if (!usingBrowserWebSocket) {\n            if (packet.options) {\n              opts.compress = packet.options.compress;\n            }\n\n            if (self.opts.perMessageDeflate) {\n              const len =\n                \"string\" === typeof data\n                  ? Buffer.byteLength(data)\n                  : data.length;\n              if (len < self.opts.perMessageDeflate.threshold) {\n                opts.compress = false;\n              }\n            }\n          }\n\n          // Sometimes the websocket has already been closed but the browser didn't\n          // have a chance of informing us about it yet, in that case send will\n          // throw an error\n          try {\n            if (usingBrowserWebSocket) {\n              // TypeError is thrown when passing the second argument on Safari\n              self.ws.send(data);\n            } else {\n              self.ws.send(data, opts);\n            }\n          } catch (e) {\n            debug(\"websocket closed before onclose event\");\n          }\n\n          --total || done();\n        });\n      })(packets[i]);\n    }\n\n    function done() {\n      self.emit(\"flush\");\n\n      // fake drain\n      // defer to next tick to allow Socket to clear writeBuffer\n      setTimeout(function() {\n        self.writable = true;\n        self.emit(\"drain\");\n      }, 0);\n    }\n  }\n\n  /**\n   * Called upon close\n   *\n   * @api private\n   */\n  onClose() {\n    Transport.prototype.onClose.call(this);\n  }\n\n  /**\n   * Closes socket.\n   *\n   * @api private\n   */\n  doClose() {\n    if (typeof this.ws !== \"undefined\") {\n      this.ws.close();\n    }\n  }\n\n  /**\n   * Generates uri for connection.\n   *\n   * @api private\n   */\n  uri() {\n    let query = this.query || {};\n    const schema = this.opts.secure ? \"wss\" : \"ws\";\n    let port = \"\";\n\n    // avoid port if default for schema\n    if (\n      this.opts.port &&\n      ((\"wss\" === schema && Number(this.opts.port) !== 443) ||\n        (\"ws\" === schema && Number(this.opts.port) !== 80))\n    ) {\n      port = \":\" + this.opts.port;\n    }\n\n    // append timestamp to URI\n    if (this.opts.timestampRequests) {\n      query[this.opts.timestampParam] = yeast();\n    }\n\n    // communicate binary support capabilities\n    if (!this.supportsBinary) {\n      query.b64 = 1;\n    }\n\n    query = parseqs.encode(query);\n\n    // prepend ? to query\n    if (query.length) {\n      query = \"?\" + query;\n    }\n\n    const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n    return (\n      schema +\n      \"://\" +\n      (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n      port +\n      this.opts.path +\n      query\n    );\n  }\n\n  /**\n   * Feature detection for WebSocket.\n   *\n   * @return {Boolean} whether this transport is available.\n   * @api public\n   */\n  check() {\n    return (\n      !!WebSocket &&\n      !(\"__initialize\" in WebSocket && this.name === WS.prototype.name)\n    );\n  }\n}\n\nmodule.exports = WS;\n","const XMLHttpRequest = require(\"xmlhttprequest-ssl\");\nconst XHR = require(\"./polling-xhr\");\nconst JSONP = require(\"./polling-jsonp\");\nconst websocket = require(\"./websocket\");\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling(opts) {\n  let xhr;\n  let xd = false;\n  let xs = false;\n  const jsonp = false !== opts.jsonp;\n\n  if (typeof location !== \"undefined\") {\n    const isSSL = \"https:\" === location.protocol;\n    let port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if (\"open\" in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error(\"JSONP disabled\");\n    return new JSONP(opts);\n  }\n}\n","const transports = require(\"./transports/index\");\nconst Emitter = require(\"component-emitter\");\nconst debug = require(\"debug\")(\"engine.io-client:socket\");\nconst parser = require(\"engine.io-parser\");\nconst parseuri = require(\"parseuri\");\nconst parseqs = require(\"parseqs\");\n\nclass Socket extends Emitter {\n  /**\n   * Socket constructor.\n   *\n   * @param {String|Object} uri or options\n   * @param {Object} options\n   * @api public\n   */\n  constructor(uri, opts = {}) {\n    super();\n\n    if (uri && \"object\" === typeof uri) {\n      opts = uri;\n      uri = null;\n    }\n\n    if (uri) {\n      uri = parseuri(uri);\n      opts.hostname = uri.host;\n      opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n      opts.port = uri.port;\n      if (uri.query) opts.query = uri.query;\n    } else if (opts.host) {\n      opts.hostname = parseuri(opts.host).host;\n    }\n\n    this.secure =\n      null != opts.secure\n        ? opts.secure\n        : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n\n    if (opts.hostname && !opts.port) {\n      // if no port is specified manually, use the protocol default\n      opts.port = this.secure ? \"443\" : \"80\";\n    }\n\n    this.hostname =\n      opts.hostname ||\n      (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n    this.port =\n      opts.port ||\n      (typeof location !== \"undefined\" && location.port\n        ? location.port\n        : this.secure\n        ? 443\n        : 80);\n\n    this.transports = opts.transports || [\"polling\", \"websocket\"];\n    this.readyState = \"\";\n    this.writeBuffer = [];\n    this.prevBufferLen = 0;\n\n    this.opts = Object.assign(\n      {\n        path: \"/engine.io\",\n        agent: false,\n        withCredentials: false,\n        upgrade: true,\n        jsonp: true,\n        timestampParam: \"t\",\n        rememberUpgrade: false,\n        rejectUnauthorized: true,\n        perMessageDeflate: {\n          threshold: 1024\n        },\n        transportOptions: {}\n      },\n      opts\n    );\n\n    this.opts.path = this.opts.path.replace(/\\/$/, \"\") + \"/\";\n\n    if (typeof this.opts.query === \"string\") {\n      this.opts.query = parseqs.decode(this.opts.query);\n    }\n\n    // set on handshake\n    this.id = null;\n    this.upgrades = null;\n    this.pingInterval = null;\n    this.pingTimeout = null;\n\n    // set on heartbeat\n    this.pingTimeoutTimer = null;\n\n    this.open();\n  }\n\n  /**\n   * Creates transport of the given type.\n   *\n   * @param {String} transport name\n   * @return {Transport}\n   * @api private\n   */\n  createTransport(name) {\n    debug('creating transport \"%s\"', name);\n    const query = clone(this.opts.query);\n\n    // append engine.io protocol identifier\n    query.EIO = parser.protocol;\n\n    // transport name\n    query.transport = name;\n\n    // session id if we already have one\n    if (this.id) query.sid = this.id;\n\n    const opts = Object.assign(\n      {},\n      this.opts.transportOptions[name],\n      this.opts,\n      {\n        query,\n        socket: this,\n        hostname: this.hostname,\n        secure: this.secure,\n        port: this.port\n      }\n    );\n\n    debug(\"options: %j\", opts);\n\n    return new transports[name](opts);\n  }\n\n  /**\n   * Initializes transport to use and starts probe.\n   *\n   * @api private\n   */\n  open() {\n    let transport;\n    if (\n      this.opts.rememberUpgrade &&\n      Socket.priorWebsocketSuccess &&\n      this.transports.indexOf(\"websocket\") !== -1\n    ) {\n      transport = \"websocket\";\n    } else if (0 === this.transports.length) {\n      // Emit error on next tick so it can be listened to\n      const self = this;\n      setTimeout(function() {\n        self.emit(\"error\", \"No transports available\");\n      }, 0);\n      return;\n    } else {\n      transport = this.transports[0];\n    }\n    this.readyState = \"opening\";\n\n    // Retry with the next transport if the transport is disabled (jsonp: false)\n    try {\n      transport = this.createTransport(transport);\n    } catch (e) {\n      debug(\"error while creating transport: %s\", e);\n      this.transports.shift();\n      this.open();\n      return;\n    }\n\n    transport.open();\n    this.setTransport(transport);\n  }\n\n  /**\n   * Sets the current transport. Disables the existing one (if any).\n   *\n   * @api private\n   */\n  setTransport(transport) {\n    debug(\"setting transport %s\", transport.name);\n    const self = this;\n\n    if (this.transport) {\n      debug(\"clearing existing transport %s\", this.transport.name);\n      this.transport.removeAllListeners();\n    }\n\n    // set up transport\n    this.transport = transport;\n\n    // set up transport listeners\n    transport\n      .on(\"drain\", function() {\n        self.onDrain();\n      })\n      .on(\"packet\", function(packet) {\n        self.onPacket(packet);\n      })\n      .on(\"error\", function(e) {\n        self.onError(e);\n      })\n      .on(\"close\", function() {\n        self.onClose(\"transport close\");\n      });\n  }\n\n  /**\n   * Probes a transport.\n   *\n   * @param {String} transport name\n   * @api private\n   */\n  probe(name) {\n    debug('probing transport \"%s\"', name);\n    let transport = this.createTransport(name, { probe: 1 });\n    let failed = false;\n    const self = this;\n\n    Socket.priorWebsocketSuccess = false;\n\n    function onTransportOpen() {\n      if (self.onlyBinaryUpgrades) {\n        const upgradeLosesBinary =\n          !this.supportsBinary && self.transport.supportsBinary;\n        failed = failed || upgradeLosesBinary;\n      }\n      if (failed) return;\n\n      debug('probe transport \"%s\" opened', name);\n      transport.send([{ type: \"ping\", data: \"probe\" }]);\n      transport.once(\"packet\", function(msg) {\n        if (failed) return;\n        if (\"pong\" === msg.type && \"probe\" === msg.data) {\n          debug('probe transport \"%s\" pong', name);\n          self.upgrading = true;\n          self.emit(\"upgrading\", transport);\n          if (!transport) return;\n          Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n\n          debug('pausing current transport \"%s\"', self.transport.name);\n          self.transport.pause(function() {\n            if (failed) return;\n            if (\"closed\" === self.readyState) return;\n            debug(\"changing transport and sending upgrade packet\");\n\n            cleanup();\n\n            self.setTransport(transport);\n            transport.send([{ type: \"upgrade\" }]);\n            self.emit(\"upgrade\", transport);\n            transport = null;\n            self.upgrading = false;\n            self.flush();\n          });\n        } else {\n          debug('probe transport \"%s\" failed', name);\n          const err = new Error(\"probe error\");\n          err.transport = transport.name;\n          self.emit(\"upgradeError\", err);\n        }\n      });\n    }\n\n    function freezeTransport() {\n      if (failed) return;\n\n      // Any callback called by transport should be ignored since now\n      failed = true;\n\n      cleanup();\n\n      transport.close();\n      transport = null;\n    }\n\n    // Handle any error that happens while probing\n    function onerror(err) {\n      const error = new Error(\"probe error: \" + err);\n      error.transport = transport.name;\n\n      freezeTransport();\n\n      debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n      self.emit(\"upgradeError\", error);\n    }\n\n    function onTransportClose() {\n      onerror(\"transport closed\");\n    }\n\n    // When the socket is closed while we're probing\n    function onclose() {\n      onerror(\"socket closed\");\n    }\n\n    // When the socket is upgraded while we're probing\n    function onupgrade(to) {\n      if (transport && to.name !== transport.name) {\n        debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n        freezeTransport();\n      }\n    }\n\n    // Remove all listeners on the transport and on self\n    function cleanup() {\n      transport.removeListener(\"open\", onTransportOpen);\n      transport.removeListener(\"error\", onerror);\n      transport.removeListener(\"close\", onTransportClose);\n      self.removeListener(\"close\", onclose);\n      self.removeListener(\"upgrading\", onupgrade);\n    }\n\n    transport.once(\"open\", onTransportOpen);\n    transport.once(\"error\", onerror);\n    transport.once(\"close\", onTransportClose);\n\n    this.once(\"close\", onclose);\n    this.once(\"upgrading\", onupgrade);\n\n    transport.open();\n  }\n\n  /**\n   * Called when connection is deemed open.\n   *\n   * @api public\n   */\n  onOpen() {\n    debug(\"socket open\");\n    this.readyState = \"open\";\n    Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n    this.emit(\"open\");\n    this.flush();\n\n    // we check for `readyState` in case an `open`\n    // listener already closed the socket\n    if (\n      \"open\" === this.readyState &&\n      this.opts.upgrade &&\n      this.transport.pause\n    ) {\n      debug(\"starting upgrade probes\");\n      let i = 0;\n      const l = this.upgrades.length;\n      for (; i < l; i++) {\n        this.probe(this.upgrades[i]);\n      }\n    }\n  }\n\n  /**\n   * Handles a packet.\n   *\n   * @api private\n   */\n  onPacket(packet) {\n    if (\n      \"opening\" === this.readyState ||\n      \"open\" === this.readyState ||\n      \"closing\" === this.readyState\n    ) {\n      debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n      this.emit(\"packet\", packet);\n\n      // Socket is live - any packet counts\n      this.emit(\"heartbeat\");\n\n      switch (packet.type) {\n        case \"open\":\n          this.onHandshake(JSON.parse(packet.data));\n          break;\n\n        case \"ping\":\n          this.resetPingTimeout();\n          this.sendPacket(\"pong\");\n          this.emit(\"pong\");\n          break;\n\n        case \"error\":\n          const err = new Error(\"server error\");\n          err.code = packet.data;\n          this.onError(err);\n          break;\n\n        case \"message\":\n          this.emit(\"data\", packet.data);\n          this.emit(\"message\", packet.data);\n          break;\n      }\n    } else {\n      debug('packet received with socket readyState \"%s\"', this.readyState);\n    }\n  }\n\n  /**\n   * Called upon handshake completion.\n   *\n   * @param {Object} handshake obj\n   * @api private\n   */\n  onHandshake(data) {\n    this.emit(\"handshake\", data);\n    this.id = data.sid;\n    this.transport.query.sid = data.sid;\n    this.upgrades = this.filterUpgrades(data.upgrades);\n    this.pingInterval = data.pingInterval;\n    this.pingTimeout = data.pingTimeout;\n    this.onOpen();\n    // In case open handler closes socket\n    if (\"closed\" === this.readyState) return;\n    this.resetPingTimeout();\n  }\n\n  /**\n   * Sets and resets ping timeout timer based on server pings.\n   *\n   * @api private\n   */\n  resetPingTimeout() {\n    clearTimeout(this.pingTimeoutTimer);\n    this.pingTimeoutTimer = setTimeout(() => {\n      this.onClose(\"ping timeout\");\n    }, this.pingInterval + this.pingTimeout);\n  }\n\n  /**\n   * Called on `drain` event\n   *\n   * @api private\n   */\n  onDrain() {\n    this.writeBuffer.splice(0, this.prevBufferLen);\n\n    // setting prevBufferLen = 0 is very important\n    // for example, when upgrading, upgrade packet is sent over,\n    // and a nonzero prevBufferLen could cause problems on `drain`\n    this.prevBufferLen = 0;\n\n    if (0 === this.writeBuffer.length) {\n      this.emit(\"drain\");\n    } else {\n      this.flush();\n    }\n  }\n\n  /**\n   * Flush write buffers.\n   *\n   * @api private\n   */\n  flush() {\n    if (\n      \"closed\" !== this.readyState &&\n      this.transport.writable &&\n      !this.upgrading &&\n      this.writeBuffer.length\n    ) {\n      debug(\"flushing %d packets in socket\", this.writeBuffer.length);\n      this.transport.send(this.writeBuffer);\n      // keep track of current length of writeBuffer\n      // splice writeBuffer and callbackBuffer on `drain`\n      this.prevBufferLen = this.writeBuffer.length;\n      this.emit(\"flush\");\n    }\n  }\n\n  /**\n   * Sends a message.\n   *\n   * @param {String} message.\n   * @param {Function} callback function.\n   * @param {Object} options.\n   * @return {Socket} for chaining.\n   * @api public\n   */\n  write(msg, options, fn) {\n    this.sendPacket(\"message\", msg, options, fn);\n    return this;\n  }\n\n  send(msg, options, fn) {\n    this.sendPacket(\"message\", msg, options, fn);\n    return this;\n  }\n\n  /**\n   * Sends a packet.\n   *\n   * @param {String} packet type.\n   * @param {String} data.\n   * @param {Object} options.\n   * @param {Function} callback function.\n   * @api private\n   */\n  sendPacket(type, data, options, fn) {\n    if (\"function\" === typeof data) {\n      fn = data;\n      data = undefined;\n    }\n\n    if (\"function\" === typeof options) {\n      fn = options;\n      options = null;\n    }\n\n    if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n      return;\n    }\n\n    options = options || {};\n    options.compress = false !== options.compress;\n\n    const packet = {\n      type: type,\n      data: data,\n      options: options\n    };\n    this.emit(\"packetCreate\", packet);\n    this.writeBuffer.push(packet);\n    if (fn) this.once(\"flush\", fn);\n    this.flush();\n  }\n\n  /**\n   * Closes the connection.\n   *\n   * @api private\n   */\n  close() {\n    const self = this;\n\n    if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n      this.readyState = \"closing\";\n\n      if (this.writeBuffer.length) {\n        this.once(\"drain\", function() {\n          if (this.upgrading) {\n            waitForUpgrade();\n          } else {\n            close();\n          }\n        });\n      } else if (this.upgrading) {\n        waitForUpgrade();\n      } else {\n        close();\n      }\n    }\n\n    function close() {\n      self.onClose(\"forced close\");\n      debug(\"socket closing - telling transport to close\");\n      self.transport.close();\n    }\n\n    function cleanupAndClose() {\n      self.removeListener(\"upgrade\", cleanupAndClose);\n      self.removeListener(\"upgradeError\", cleanupAndClose);\n      close();\n    }\n\n    function waitForUpgrade() {\n      // wait for upgrade to finish since we can't send packets while pausing a transport\n      self.once(\"upgrade\", cleanupAndClose);\n      self.once(\"upgradeError\", cleanupAndClose);\n    }\n\n    return this;\n  }\n\n  /**\n   * Called upon transport error\n   *\n   * @api private\n   */\n  onError(err) {\n    debug(\"socket error %j\", err);\n    Socket.priorWebsocketSuccess = false;\n    this.emit(\"error\", err);\n    this.onClose(\"transport error\", err);\n  }\n\n  /**\n   * Called upon transport close.\n   *\n   * @api private\n   */\n  onClose(reason, desc) {\n    if (\n      \"opening\" === this.readyState ||\n      \"open\" === this.readyState ||\n      \"closing\" === this.readyState\n    ) {\n      debug('socket close with reason: \"%s\"', reason);\n      const self = this;\n\n      // clear timers\n      clearTimeout(this.pingIntervalTimer);\n      clearTimeout(this.pingTimeoutTimer);\n\n      // stop event from firing again for transport\n      this.transport.removeAllListeners(\"close\");\n\n      // ensure transport won't stay open\n      this.transport.close();\n\n      // ignore further transport communication\n      this.transport.removeAllListeners();\n\n      // set ready state\n      this.readyState = \"closed\";\n\n      // clear session id\n      this.id = null;\n\n      // emit close event\n      this.emit(\"close\", reason, desc);\n\n      // clean buffers after, so users can still\n      // grab the buffers on `close` event\n      self.writeBuffer = [];\n      self.prevBufferLen = 0;\n    }\n  }\n\n  /**\n   * Filters upgrades, returning only those matching client transports.\n   *\n   * @param {Array} server upgrades\n   * @api private\n   *\n   */\n  filterUpgrades(upgrades) {\n    const filteredUpgrades = [];\n    let i = 0;\n    const j = upgrades.length;\n    for (; i < j; i++) {\n      if (~this.transports.indexOf(upgrades[i]))\n        filteredUpgrades.push(upgrades[i]);\n    }\n    return filteredUpgrades;\n  }\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\nfunction clone(obj) {\n  const o = {};\n  for (let i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\nmodule.exports = Socket;\n","const Socket = require(\"./socket\");\n\nmodule.exports = (uri, opts) => new Socket(uri, opts);\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nmodule.exports.Socket = Socket;\nmodule.exports.protocol = Socket.protocol; // this is an int\nmodule.exports.Transport = require(\"./transport\");\nmodule.exports.transports = require(\"./transports/index\");\nmodule.exports.parser = require(\"engine.io-parser\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hasBinary = exports.isBinary = void 0;\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nfunction isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexports.isBinary = isBinary;\nfunction hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\nexports.hasBinary = hasBinary;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reconstructPacket = exports.deconstructPacket = void 0;\nconst is_binary_1 = require(\"./is-binary\");\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nfunction deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nexports.deconstructPacket = deconstructPacket;\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (is_binary_1.isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nfunction reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    packet.attachments = undefined; // no longer useful\n    return packet;\n}\nexports.reconstructPacket = reconstructPacket;\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder) {\n        return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Decoder = exports.Encoder = exports.PacketType = exports.protocol = void 0;\nconst Emitter = require(\"component-emitter\");\nconst binary_1 = require(\"./binary\");\nconst is_binary_1 = require(\"./is-binary\");\nconst debug = require(\"debug\")(\"socket.io-parser\");\n/**\n * Protocol version.\n *\n * @public\n */\nexports.protocol = 5;\nvar PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType = exports.PacketType || (exports.PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nclass Encoder {\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        debug(\"encoding packet %j\", obj);\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (is_binary_1.hasBinary(obj)) {\n                obj.type =\n                    obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK;\n                return this.encodeAsBinary(obj);\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data);\n        }\n        debug(\"encoded %j as %s\", obj, str);\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = binary_1.deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\nexports.Encoder = Encoder;\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nclass Decoder extends Emitter {\n    constructor() {\n        super();\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            packet = this.decodeString(obj);\n            if (packet.type === PacketType.BINARY_EVENT ||\n                packet.type === PacketType.BINARY_ACK) {\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emit(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emit(\"decoded\", packet);\n            }\n        }\n        else if (is_binary_1.isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emit(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        debug(\"decoded %s as %j\", str, p);\n        return p;\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return typeof payload === \"object\";\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || typeof payload === \"object\";\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return Array.isArray(payload) && typeof payload[0] === \"string\";\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n        }\n    }\n}\nexports.Decoder = Decoder;\nfunction tryParse(str) {\n    try {\n        return JSON.parse(str);\n    }\n    catch (e) {\n        return false;\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = binary_1.reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.on = void 0;\nfunction on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\nexports.on = on;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Socket = void 0;\nconst socket_io_parser_1 = require(\"socket.io-parser\");\nconst Emitter = require(\"component-emitter\");\nconst on_1 = require(\"./on\");\nconst debug = require(\"debug\")(\"socket.io-client:socket\");\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\nclass Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     *\n     * @public\n     */\n    constructor(io, nsp, opts) {\n        super();\n        this.receiveBuffer = [];\n        this.sendBuffer = [];\n        this.ids = 0;\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        this.ids = 0;\n        this.acks = {};\n        this.receiveBuffer = [];\n        this.sendBuffer = [];\n        this.connected = false;\n        this.disconnected = true;\n        this.flags = {};\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on_1.on(io, \"open\", this.onopen.bind(this)),\n            on_1.on(io, \"packet\", this.onpacket.bind(this)),\n            on_1.on(io, \"error\", this.onerror.bind(this)),\n            on_1.on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @public\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for connect()\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * @return self\n     * @public\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @param ev - event name\n     * @return self\n     * @public\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        const packet = {\n            type: socket_io_parser_1.PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            debug(\"emitting packet with ack id %d\", this.ids);\n            this.acks[this.ids] = args.pop();\n            packet.id = this.ids++;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n            debug(\"discard packet as the transport is not currently writable\");\n        }\n        else if (this.connected) {\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        debug(\"transport is open - connecting\");\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data });\n            });\n        }\n        else {\n            this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data: this.auth });\n        }\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            super.emit(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @private\n     */\n    onclose(reason) {\n        debug(\"close (%s)\", reason);\n        this.connected = false;\n        this.disconnected = true;\n        delete this.id;\n        super.emit(\"disconnect\", reason);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case socket_io_parser_1.PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    const id = packet.data.sid;\n                    this.onconnect(id);\n                }\n                else {\n                    super.emit(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case socket_io_parser_1.PacketType.EVENT:\n                this.onevent(packet);\n                break;\n            case socket_io_parser_1.PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case socket_io_parser_1.PacketType.ACK:\n                this.onack(packet);\n                break;\n            case socket_io_parser_1.PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case socket_io_parser_1.PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case socket_io_parser_1.PacketType.CONNECT_ERROR:\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                super.emit(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        debug(\"emitting event %j\", args);\n        if (null != packet.id) {\n            debug(\"attaching ack callback to event\");\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            debug(\"sending ack %j\", args);\n            self.packet({\n                type: socket_io_parser_1.PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (\"function\" === typeof ack) {\n            debug(\"calling ack %s with %j\", packet.id, packet.data);\n            ack.apply(this, packet.data);\n            delete this.acks[packet.id];\n        }\n        else {\n            debug(\"bad ack %s\", packet.id);\n        }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id) {\n        debug(\"socket connected with id %s\", id);\n        this.id = id;\n        this.connected = true;\n        this.disconnected = false;\n        super.emit(\"connect\");\n        this.emitBuffered();\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => this.packet(packet));\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        debug(\"server disconnect (%s)\", this.nsp);\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually.\n     *\n     * @return self\n     * @public\n     */\n    disconnect() {\n        if (this.connected) {\n            debug(\"performing disconnect (%s)\", this.nsp);\n            this.packet({ type: socket_io_parser_1.PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for disconnect()\n     *\n     * @return self\n     * @public\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     * @public\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @returns self\n     * @public\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @param listener\n     * @public\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @param listener\n     * @public\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @param listener\n     * @public\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     *\n     * @public\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n}\nexports.Socket = Socket;\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Manager = void 0;\nconst eio = require(\"engine.io-client\");\nconst socket_1 = require(\"./socket\");\nconst Emitter = require(\"component-emitter\");\nconst parser = require(\"socket.io-parser\");\nconst on_1 = require(\"./on\");\nconst Backoff = require(\"backo2\");\nconst debug = require(\"debug\")(\"socket.io-client:manager\");\nclass Manager extends Emitter {\n    constructor(uri, opts) {\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor(opts.randomizationFactor || 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        debug(\"readyState %s\", this._readyState);\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        debug(\"opening %s\", this.uri);\n        this.engine = eio(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on_1.on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        // emit `error`\n        const errorSub = on_1.on(socket, \"error\", (err) => {\n            debug(\"error\");\n            self.cleanup();\n            self._readyState = \"closed\";\n            super.emit(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                self.maybeReconnectOnOpen();\n            }\n        });\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            debug(\"connect attempt will timeout after %d\", timeout);\n            if (timeout === 0) {\n                openSubDestroy(); // prevents a race condition with the 'open' event\n            }\n            // set timer\n            const timer = setTimeout(() => {\n                debug(\"connect attempt timed out after %d\", timeout);\n                openSubDestroy();\n                socket.close();\n                socket.emit(\"error\", new Error(\"timeout\"));\n            }, timeout);\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        debug(\"open\");\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        super.emit(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on_1.on(socket, \"ping\", this.onping.bind(this)), on_1.on(socket, \"data\", this.ondata.bind(this)), on_1.on(socket, \"error\", this.onerror.bind(this)), on_1.on(socket, \"close\", this.onclose.bind(this)), on_1.on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        super.emit(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        this.decoder.add(data);\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        super.emit(\"packet\", packet);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        debug(\"error\", err);\n        super.emit(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new socket_1.Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                debug(\"socket %s is still active, skipping close\", nsp);\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        debug(\"writing packet %j\", packet);\n        if (packet.query && packet.type === 0)\n            packet.nsp += \"?\" + packet.query;\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        debug(\"cleanup\");\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        debug(\"disconnect\");\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        if (\"opening\" === this._readyState) {\n            // `onclose` will not fire because\n            // an open event never happened\n            this.cleanup();\n        }\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason) {\n        debug(\"onclose\");\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        super.emit(\"close\", reason);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            debug(\"reconnect failed\");\n            this.backoff.reset();\n            super.emit(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            debug(\"will wait %dms before reconnect attempt\", delay);\n            this._reconnecting = true;\n            const timer = setTimeout(() => {\n                if (self.skipReconnect)\n                    return;\n                debug(\"attempting reconnect\");\n                super.emit(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        debug(\"reconnect attempt error\");\n                        self._reconnecting = false;\n                        self.reconnect();\n                        super.emit(\"reconnect_error\", err);\n                    }\n                    else {\n                        debug(\"reconnect success\");\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        super.emit(\"reconnect\", attempt);\n    }\n}\nexports.Manager = Manager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Socket = exports.io = exports.Manager = exports.protocol = void 0;\nconst url_1 = require(\"./url\");\nconst manager_1 = require(\"./manager\");\nconst socket_1 = require(\"./socket\");\nObject.defineProperty(exports, \"Socket\", { enumerable: true, get: function () { return socket_1.Socket; } });\nconst debug = require(\"debug\")(\"socket.io-client\");\n/**\n * Module exports.\n */\nmodule.exports = exports = lookup;\n/**\n * Managers cache.\n */\nconst cache = (exports.managers = {});\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url_1.url(uri);\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        debug(\"ignoring socket cache for %s\", source);\n        io = new manager_1.Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            debug(\"new io instance for %s\", source);\n            cache[id] = new manager_1.Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.query;\n    }\n    return io.socket(parsed.path, opts);\n}\nexports.io = lookup;\n/**\n * Protocol version.\n *\n * @public\n */\nvar socket_io_parser_1 = require(\"socket.io-parser\");\nObject.defineProperty(exports, \"protocol\", { enumerable: true, get: function () { return socket_io_parser_1.protocol; } });\n/**\n * `connect`.\n *\n * @param {String} uri\n * @public\n */\nexports.connect = lookup;\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nvar manager_2 = require(\"./manager\");\nObject.defineProperty(exports, \"Manager\", { enumerable: true, get: function () { return manager_2.Manager; } });\n","import EventEmitter from 'event-emitter';\n\nconst SIXTY_PER_SEC = 1000 / 60;\nconst LOOP_SLOW_THRESH = 0.3;\nconst LOOP_SLOW_COUNT = 10;\n\n/**\n * Scheduler class\n *\n */\nexport default class Scheduler {\n\n    /**\n     * schedule a function to be called\n     *\n     * @param {Object} options the options\n     * @param {Function} options.tick the function to be called\n     * @param {Number} options.period number of milliseconds between each invocation, not including the function's execution time\n     * @param {Number} options.delay number of milliseconds to add when delaying or hurrying the execution\n     */\n    constructor(options) {\n        this.options = Object.assign({\n            tick: null,\n            period: SIXTY_PER_SEC,\n            delay: SIXTY_PER_SEC / 3\n        }, options);\n        this.nextExecTime = null;\n        this.requestedDelay = 0;\n        this.delayCounter = 0;\n\n        // mixin for EventEmitter\n        let eventEmitter = new EventEmitter();\n        this.on = eventEmitter.on;\n        this.once = eventEmitter.once;\n        this.removeListener = eventEmitter.removeListener;\n        this.emit = eventEmitter.emit;\n\n    }\n\n    // in same cases, setTimeout is ignored by the browser,\n    // this is known to happen during the first 100ms of a touch event\n    // on android chrome.  Double-check the game loop using requestAnimationFrame\n    nextTickChecker() {\n        let currentTime = (new Date()).getTime();\n        if (currentTime > this.nextExecTime) {\n            this.delayCounter++;\n            this.callTick();\n            this.nextExecTime = currentTime + this.options.stepPeriod;\n        }\n        window.requestAnimationFrame(this.nextTickChecker.bind(this));\n    }\n\n    nextTick() {\n        let stepStartTime = (new Date()).getTime();\n        if (stepStartTime > this.nextExecTime + this.options.period * LOOP_SLOW_THRESH) {\n            this.delayCounter++;\n        } else\n            this.delayCounter = 0;\n\n        this.callTick();\n        this.nextExecTime = stepStartTime + this.options.period + this.requestedDelay;\n        this.requestedDelay = 0;\n        setTimeout(this.nextTick.bind(this), this.nextExecTime - (new Date()).getTime());\n    }\n\n    callTick() {\n        if (this.delayCounter >= LOOP_SLOW_COUNT) {\n            this.emit('loopRunningSlow');\n            this.delayCounter = 0;\n        }\n        this.options.tick();\n    }\n\n    /**\n     * start the schedule\n     * @return {Scheduler} returns this scheduler instance\n     */\n    start() {\n        setTimeout(this.nextTick.bind(this));\n        if (typeof window === 'object' && typeof window.requestAnimationFrame === 'function')\n            window.requestAnimationFrame(this.nextTickChecker.bind(this));\n        return this;\n    }\n\n    /**\n     * delay next execution\n     */\n    delayTick() {\n        this.requestedDelay += this.options.delay;\n    }\n\n    /**\n     * hurry the next execution\n     */\n    hurryTick() {\n        this.requestedDelay -= this.options.delay;\n    }\n}\n","export default class SyncStrategy {\n\n    constructor(clientEngine, inputOptions) {\n        this.clientEngine = clientEngine;\n        this.gameEngine = clientEngine.gameEngine;\n        this.needFirstSync = true;\n        this.options = Object.assign({}, inputOptions);\n        this.gameEngine.on('client__postStep', this.syncStep.bind(this));\n        this.gameEngine.on('client__syncReceived', this.collectSync.bind(this));\n        this.requiredSyncs = [];\n        this.SYNC_APPLIED = 'SYNC_APPLIED';\n        this.STEP_DRIFT_THRESHOLDS = {\n            onServerSync: { MAX_LEAD: 1, MAX_LAG: 3 }, // max step lead/lag allowed after every server sync\n            onEveryStep: { MAX_LEAD: 7, MAX_LAG: 8 }, // max step lead/lag allowed at every step\n            clientReset: 20 // if we are behind this many steps, just reset the step counter\n        };\n    }\n\n    // collect a sync and its events\n    // maintain a \"lastSync\" member which describes the last sync we received from\n    // the server.  the lastSync object contains:\n    //  - syncObjects: all events in the sync indexed by the id of the object involved\n    //  - syncSteps: all events in the sync indexed by the step on which they occurred\n    //  - objCount\n    //  - eventCount\n    //  - stepCount\n    collectSync(e) {\n\n        // on first connect we need to wait for a full world update\n        if (this.needFirstSync) {\n            if (!e.fullUpdate)\n                return;\n        } else {\n\n            // TODO: there is a problem below in the case where the client is 10 steps behind the server,\n            // and the syncs that arrive are always in the future and never get processed.  To address this\n            // we may need to store more than one sync.\n\n            // ignore syncs which are older than the latest\n            if (this.lastSync && this.lastSync.stepCount && this.lastSync.stepCount > e.stepCount)\n                return;\n        }\n\n        // before we overwrite the last sync, check if it was a required sync\n        // syncs that create or delete objects are saved because they must be applied.\n        if (this.lastSync && this.lastSync.required) {\n            this.requiredSyncs.push(this.lastSync)\n        }\n\n        // build new sync object\n        let lastSync = this.lastSync = {\n            stepCount: e.stepCount,\n            fullUpdate: e.fullUpdate,\n            syncObjects: {},\n            syncSteps: {}\n        };\n\n        e.syncEvents.forEach(sEvent => {\n            // keep a reference of events by object id\n            if (sEvent.objectInstance) {\n                let objectId = sEvent.objectInstance.id;\n                if (!lastSync.syncObjects[objectId]) lastSync.syncObjects[objectId] = [];\n                lastSync.syncObjects[objectId].push(sEvent);\n            }\n\n            // keep a reference of events by step\n            let stepCount = sEvent.stepCount;\n            let eventName = sEvent.eventName;\n            if (eventName === 'objectDestroy' || eventName === 'objectCreate') {\n                lastSync.required = true\n            }\n            if (!lastSync.syncSteps[stepCount]) lastSync.syncSteps[stepCount] = {};\n            if (!lastSync.syncSteps[stepCount][eventName]) lastSync.syncSteps[stepCount][eventName] = [];\n            lastSync.syncSteps[stepCount][eventName].push(sEvent);\n        });\n\n        let eventCount = e.syncEvents.length;\n        let objCount = (Object.keys(lastSync.syncObjects)).length;\n        let stepCount = (Object.keys(lastSync.syncSteps)).length;\n        this.gameEngine.trace.debug(() => `sync contains ${objCount} objects ${eventCount} events ${stepCount} steps`);\n    }\n\n    // add an object to our world\n    addNewObject(objId, newObj, options) {\n\n        let curObj = new newObj.constructor(this.gameEngine, {\n            id: objId\n        });\n\n        // enforce object implementations of syncTo\n        if (!curObj.__proto__.hasOwnProperty('syncTo')) {\n            throw `GameObject of type ${curObj.class} does not implement the syncTo() method, which must copy the netscheme`;\n        }\n\n        curObj.syncTo(newObj);\n        //this.gameEngine.addObjectToWorld(curObj);\n        if (this.clientEngine.options.verbose)\n            console.log(`adding new object ${curObj}`);\n\n        return curObj;\n    }\n\n    // sync to step, by applying bending, and applying the latest sync\n    syncStep(stepDesc) {\n\n        // apply incremental bending\n        this.gameEngine.world.forEachObject((id, o) => {\n            if (typeof o.applyIncrementalBending === 'function') {\n                o.applyIncrementalBending(stepDesc);\n                o.refreshToPhysics();\n            }\n        });\n\n        // apply all pending required syncs\n        while (this.requiredSyncs.length) {\n\n            let requiredStep = this.requiredSyncs[0].stepCount; \n\n            // if we haven't reached the corresponding step, it's too soon to apply syncs\n            if (requiredStep > this.gameEngine.world.stepCount)\n                return;\n\n            this.gameEngine.trace.trace(() => `applying a required sync ${requiredStep}`);\n            this.applySync(this.requiredSyncs.shift(), true);\n        }\n\n        // apply the sync and delete it on success\n        if (this.lastSync) {\n            let rc = this.applySync(this.lastSync, false);\n            if (rc === this.SYNC_APPLIED)\n                this.lastSync = null;\n        }\n    }\n}\n","import SyncStrategy from './SyncStrategy';\n\nconst defaults = {\n    clientStepHold: 6,\n    localObjBending: 1.0,  // amount of bending towards position of sync object\n    remoteObjBending: 1.0, // amount of bending towards position of sync object\n    bendingIncrements: 6, // the bending should be applied increments (how many steps for entire bend)\n    reflect: false\n};\n\nexport default class InterpolateStrategy extends SyncStrategy {\n\n    constructor(clientEngine, inputOptions) {\n\n        const options = Object.assign({}, defaults, inputOptions);\n        super(clientEngine, options);\n\n        this.gameEngine.ignoreInputs = true; // client side engine ignores inputs\n        this.gameEngine.ignorePhysics = true; // client side engine ignores physics\n        this.STEP_DRIFT_THRESHOLDS = {\n            onServerSync: { MAX_LEAD: -8, MAX_LAG: 16 }, // max step lead/lag allowed after every server sync\n            onEveryStep: { MAX_LEAD: -4, MAX_LAG: 24 }, // max step lead/lag allowed at every step\n            clientReset: 40 // if we are behind this many steps, just reset the step counter\n        };\n    }\n\n    // apply a new sync\n    applySync(sync, required) {\n\n        // if sync is in the past we cannot interpolate to it\n        if (!required && sync.stepCount <= this.gameEngine.world.stepCount) {\n            return this.SYNC_APPLIED;\n        }\n\n        this.gameEngine.trace.debug(() => 'interpolate applying sync');\n        //\n        //    scan all the objects in the sync\n        //\n        // 1. if the object exists locally, sync to the server object\n        // 2. if the object is new, just create it\n        //\n        this.needFirstSync = false;\n        let world = this.gameEngine.world;\n        for (let ids of Object.keys(sync.syncObjects)) {\n\n            // TODO: we are currently taking only the first event out of\n            // the events that may have arrived for this object\n            let ev = sync.syncObjects[ids][0];\n            let curObj = world.objects[ev.objectInstance.id];\n\n            if (curObj) {\n\n                // case 1: this object already exists locally\n                this.gameEngine.trace.trace(() => `object before syncTo: ${curObj.toString()}`);\n                curObj.saveState();\n                curObj.syncTo(ev.objectInstance);\n                this.gameEngine.trace.trace(() => `object after syncTo: ${curObj.toString()} synced to step[${ev.stepCount}]`);\n\n            } else {\n\n                // case 2: object does not exist.  create it now\n                this.addNewObject(ev.objectInstance.id, ev.objectInstance);\n            }\n        }\n\n        //\n        // bend back to original state\n        //\n        for (let objId of Object.keys(world.objects)) {\n\n            let obj = world.objects[objId];\n            let isLocal = (obj.playerId == this.gameEngine.playerId); // eslint-disable-line eqeqeq\n            let bending = isLocal ? this.options.localObjBending : this.options.remoteObjBending;\n            obj.bendToCurrentState(bending, this.gameEngine.worldSettings, isLocal, this.options.bendingIncrements);\n            if (typeof obj.refreshRenderObject === 'function')\n                obj.refreshRenderObject();\n            this.gameEngine.trace.trace(() => `object[${objId}] ${obj.bendingToString()}`);\n        }\n\n        // destroy objects\n        // TODO: use world.forEachObject((id, ob) => {});\n        // TODO: identical code is in InterpolateStrategy\n        for (let objId of Object.keys(world.objects)) {\n\n            let objEvents = sync.syncObjects[objId];\n\n            // if this was a full sync, and we did not get a corresponding object,\n            // remove the local object\n            if (sync.fullUpdate && !objEvents && objId < this.gameEngine.options.clientIDSpace) {\n                this.gameEngine.removeObjectFromWorld(objId);\n                continue;\n            }\n\n            if (!objEvents || objId >= this.gameEngine.options.clientIDSpace)\n                continue;\n\n            // if we got an objectDestroy event, destroy the object\n            objEvents.forEach((e) => {\n                if (e.eventName === 'objectDestroy') this.gameEngine.removeObjectFromWorld(objId);\n            });\n        }\n\n        return this.SYNC_APPLIED;\n    }\n}\n","import SyncStrategy from './SyncStrategy';\n\nconst defaults = {\n    syncsBufferLength: 5,\n    maxReEnactSteps: 60,   // maximum number of steps to re-enact\n    RTTEstimate: 2,        // estimate the RTT as two steps (for updateRate=6, that's 200ms)\n    extrapolate: 2,        // player performs method \"X\" which means extrapolate to match server time. that 100 + (0..100)\n    localObjBending: 0.1,  // amount of bending towards position of sync object\n    remoteObjBending: 0.6, // amount of bending towards position of sync object\n    bendingIncrements: 10   // the bending should be applied increments (how many steps for entire bend)\n};\n\nexport default class ExtrapolateStrategy extends SyncStrategy {\n\n    constructor(clientEngine, inputOptions) {\n\n        const options = Object.assign({}, defaults, inputOptions);\n        super(clientEngine, options);\n\n        this.lastSync = null;\n        this.recentInputs = {};\n        this.gameEngine.on('client__processInput', this.clientInputSave.bind(this));\n        this.STEP_DRIFT_THRESHOLDS = {\n            onServerSync: { MAX_LEAD: 2, MAX_LAG: 3 }, // max step lead/lag allowed after every server sync\n            onEveryStep: { MAX_LEAD: 7, MAX_LAG: 4 }, // max step lead/lag allowed at every step\n            clientReset: 40 // if we are behind this many steps, just reset the step counter\n        };\n    }\n\n    // keep a buffer of inputs so that we can replay them on extrapolation\n    clientInputSave(inputEvent) {\n\n        // if no inputs have been stored for this step, create an array\n        if (!this.recentInputs[inputEvent.input.step]) {\n            this.recentInputs[inputEvent.input.step] = [];\n        }\n        this.recentInputs[inputEvent.input.step].push(inputEvent.input);\n    }\n\n    // clean up the input buffer\n    cleanRecentInputs(lastServerStep) {\n        for (let input of Object.keys(this.recentInputs)) {\n            if (this.recentInputs[input][0].step <= lastServerStep) {\n                delete this.recentInputs[input];\n            }\n        }\n    }\n\n    // apply a new sync\n    applySync(sync, required) {\n\n        // if sync is in the future, we are not ready to apply yet.\n        if (!required && sync.stepCount > this.gameEngine.world.stepCount) {\n            return null;\n        }\n\n        this.gameEngine.trace.debug(() => 'extrapolate applying sync');\n\n        //\n        //    scan all the objects in the sync\n        //\n        // 1. if the object has a local shadow, adopt the server object,\n        //    and destroy the shadow\n        //\n        // 2. if the object exists locally, sync to the server object,\n        //    later we will re-enact the missing steps and then bend to\n        //    the current position\n        //\n        // 3. if the object is new, just create it\n        //\n        this.needFirstSync = false;\n        let world = this.gameEngine.world;\n        let serverStep = sync.stepCount;\n        for (let ids of Object.keys(sync.syncObjects)) {\n\n            // TODO: we are currently taking only the first event out of\n            // the events that may have arrived for this object\n            let ev = sync.syncObjects[ids][0];\n            let curObj = world.objects[ev.objectInstance.id];\n\n            let localShadowObj = this.gameEngine.findLocalShadow(ev.objectInstance);\n            if (localShadowObj) {\n                // case 1: this object has a local shadow object on the client\n                this.gameEngine.trace.debug(() => `object ${ev.objectInstance.id} replacing local shadow ${localShadowObj.id}`);\n\n                if (!world.objects.hasOwnProperty(ev.objectInstance.id)) {\n                    let newObj = this.addNewObject(ev.objectInstance.id, ev.objectInstance, { visible: false });\n                    newObj.saveState(localShadowObj);\n                }\n                this.gameEngine.removeObjectFromWorld(localShadowObj.id);\n\n            } else if (curObj) {\n\n                // case 2: this object already exists locally\n                this.gameEngine.trace.trace(() => `object before syncTo: ${curObj.toString()}`);\n                curObj.saveState();\n                curObj.syncTo(ev.objectInstance);\n                this.gameEngine.trace.trace(() => `object after syncTo: ${curObj.toString()} synced to step[${ev.stepCount}]`);\n\n            } else {\n\n                // case 3: object does not exist.  create it now\n                this.addNewObject(ev.objectInstance.id, ev.objectInstance);\n            }\n        }\n\n        //\n        // reenact the steps that we want to extrapolate forwards\n        //\n        this.gameEngine.trace.debug(() => `extrapolate re-enacting steps from [${serverStep}] to [${world.stepCount}]`);\n        if (serverStep < world.stepCount - this.options.maxReEnactSteps) {\n            serverStep = world.stepCount - this.options.maxReEnactSteps;\n            this.gameEngine.trace.info(() => `too many steps to re-enact.  Starting from [${serverStep}] to [${world.stepCount}]`);\n        }\n\n        let clientStep = world.stepCount;\n        for (world.stepCount = serverStep; world.stepCount < clientStep;) {\n\n            if (this.recentInputs[world.stepCount]) {\n                this.recentInputs[world.stepCount].forEach(inputDesc => {\n\n                    // only movement inputs are re-enacted\n                    if (!inputDesc.options || !inputDesc.options.movement) return;\n\n                    this.gameEngine.trace.trace(() => `extrapolate re-enacting movement input[${inputDesc.messageIndex}]: ${inputDesc.input}`);\n                    this.gameEngine.processInput(inputDesc, this.gameEngine.playerId);\n                });\n            }\n\n            // run the game engine step in \"reenact\" mode\n            this.gameEngine.step(true);\n        }\n        this.cleanRecentInputs(serverStep);\n\n        //\n        // bend back to original state\n        //\n        for (let objId of Object.keys(world.objects)) {\n\n            // shadow objects are not bent\n            if (objId >= this.gameEngine.options.clientIDSpace)\n                continue;\n\n            // TODO: using == instead of === because of string/number mismatch\n            //       These values should always be strings (which contain a number)\n            //       Reminder: the reason we use a string is that these\n            //       values are sometimes used as object keys\n            let obj = world.objects[objId];\n            let isLocal = (obj.playerId == this.gameEngine.playerId); // eslint-disable-line eqeqeq\n            let bending = isLocal ? this.options.localObjBending : this.options.remoteObjBending;\n            obj.bendToCurrentState(bending, this.gameEngine.worldSettings, isLocal, this.options.bendingIncrements);\n            if (typeof obj.refreshRenderObject === 'function')\n                obj.refreshRenderObject();\n            this.gameEngine.trace.trace(() => `object[${objId}] ${obj.bendingToString()}`);\n        }\n\n        // trace object state after sync\n        for (let objId of Object.keys(world.objects)) {\n            this.gameEngine.trace.trace(() => `object after extrapolate replay: ${world.objects[objId].toString()}`);\n        }\n\n        // destroy objects\n        // TODO: use world.forEachObject((id, ob) => {});\n        // TODO: identical code is in InterpolateStrategy\n        for (let objId of Object.keys(world.objects)) {\n\n            let objEvents = sync.syncObjects[objId];\n\n            // if this was a full sync, and we did not get a corresponding object,\n            // remove the local object\n            if (sync.fullUpdate && !objEvents && objId < this.gameEngine.options.clientIDSpace) {\n                this.gameEngine.removeObjectFromWorld(objId);\n                continue;\n            }\n\n            if (!objEvents || objId >= this.gameEngine.options.clientIDSpace)\n                continue;\n\n            // if we got an objectDestroy event, destroy the object\n            objEvents.forEach((e) => {\n                if (e.eventName === 'objectDestroy') this.gameEngine.removeObjectFromWorld(objId);\n            });\n        }\n\n        return this.SYNC_APPLIED;\n    }\n\n}\n","import SyncStrategy from './SyncStrategy'\n\nconst defaults = {\n    worldBufferLength: 60,\n    clientStepLag: 0\n};\n\nexport default class FrameSyncStrategy extends SyncStrategy {\n\n    constructor(clientEngine, inputOptions) {\n\n        const options = Object.assign({}, defaults, inputOptions);\n        super(clientEngine, options);\n\n        this.gameEngine = this.clientEngine.gameEngine;\n    }\n\n    // apply a new sync\n    applySync(sync, required) {\n\n        this.needFirstSync = false;\n        this.gameEngine.trace.debug(() => 'framySync applying sync');\n        let world = this.gameEngine.world;\n\n        for (let ids of Object.keys(sync.syncObjects)) {\n            let ev = sync.syncObjects[ids][0];\n            let curObj = world.objects[ev.objectInstance.id];\n            if (curObj) {\n                curObj.syncTo(ev.objectInstance);\n            } else {\n                this.addNewObject(ev.objectInstance.id, ev.objectInstance);\n            }\n        }\n\n        // destroy objects\n        for (let objId of Object.keys(world.objects)) {\n\n            let objEvents = sync.syncObjects[objId];\n\n            // if this was a full sync, and we did not get a corresponding object,\n            // remove the local object\n            if (sync.fullUpdate && !objEvents && objId < this.gameEngine.options.clientIDSpace) {\n                this.gameEngine.removeObjectFromWorld(objId);\n                continue;\n            }\n\n            if (!objEvents || objId >= this.gameEngine.options.clientIDSpace)\n                continue;\n\n            // if we got an objectDestroy event, destroy the object\n            objEvents.forEach((e) => {\n                if (e.eventName === 'objectDestroy') this.gameEngine.removeObjectFromWorld(objId);\n            });\n        }\n\n        return this.SYNC_APPLIED;\n    }\n\n}\n","import InterpolateStrategy from './syncStrategies/InterpolateStrategy';\nimport ExtrapolateStrategy from './syncStrategies/ExtrapolateStrategy';\nimport FrameSyncStrategy from './syncStrategies/FrameSyncStrategy';\n\nconst strategies = {\n    extrapolate: ExtrapolateStrategy,\n    interpolate: InterpolateStrategy,\n    frameSync: FrameSyncStrategy\n};\n\nexport default class Synchronizer {\n    // create a synchronizer instance\n    constructor(clientEngine, options) {\n        this.clientEngine = clientEngine;\n        this.options = options || {};\n        if (!strategies.hasOwnProperty(this.options.sync)) {\n            throw new Error(`ERROR: unknown synchronzation strategy ${this.options.sync}`);\n        }\n        this.syncStrategy = new strategies[this.options.sync](this.clientEngine, this.options);\n    }\n}\n","import Utils from './../lib/Utils';\nimport TwoVector from './TwoVector';\nimport ThreeVector from './ThreeVector';\nimport Quaternion from './Quaternion';\nimport BaseTypes from './BaseTypes';\n\nconst MAX_UINT_16 = 0xFFFF;\n\n/**\n * The Serializer is responsible for serializing the game world and its\n * objects on the server, before they are sent to each client.  On the client side the\n * Serializer deserializes these objects.\n *\n */\nclass Serializer {\n\n    constructor() {\n        this.registeredClasses = {};\n        this.customTypes = {};\n        this.registerClass(TwoVector);\n        this.registerClass(ThreeVector);\n        this.registerClass(Quaternion);\n    }\n\n    /**\n     * Adds a custom primitive to the serializer instance.\n     * This will enable you to use it in an object's netScheme\n     * @param customType\n     */\n    // TODO: the function below is not used, and it is not clear what that\n    // first argument is supposed to be\n    addCustomType(customType) {\n        this.customTypes[customType.type] = customType;\n    }\n\n    /**\n     * Checks if type can be assigned by value.\n     * @param {String} type Type to Checks\n     * @return {Boolean} True if type can be assigned\n     */\n    static typeCanAssign(type) {\n        return type !== BaseTypes.TYPES.CLASSINSTANCE && type !== BaseTypes.TYPES.LIST;\n    }\n\n    /**\n     * Registers a new class with the serializer, so it may be deserialized later\n     * @param {Function} classObj reference to the class (not an instance!)\n     * @param {String} classId Unit specifying a class ID\n     */\n    registerClass(classObj, classId) {\n        // if no classId is specified, hash one from the class name\n        classId = classId ? classId : Utils.hashStr(classObj.name);\n        if (this.registeredClasses[classId]) {\n            console.error(`Serializer: accidental override of classId ${classId} when registering class`, classObj);\n        }\n\n        this.registeredClasses[classId] = classObj;\n    }\n\n    deserialize(dataBuffer, byteOffset) {\n        byteOffset = byteOffset ? byteOffset : 0;\n        let localByteOffset = 0;\n\n        let dataView = new DataView(dataBuffer);\n\n        let objectClassId = dataView.getUint8(byteOffset + localByteOffset);\n\n        // todo if classId is 0 - take care of dynamic serialization.\n        let objectClass = this.registeredClasses[objectClassId];\n        if (objectClass == null) {\n            console.error('Serializer: Found a class which was not registered.  Please use serializer.registerClass() to register all serialized classes.');\n        }\n\n        localByteOffset += Uint8Array.BYTES_PER_ELEMENT; // advance the byteOffset after the classId\n\n        // create de-referenced instance of the class. gameEngine and id will be 'tacked on' later at the sync strategies\n        let obj = new objectClass(null, { id: null });\n        for (let property of Object.keys(objectClass.netScheme).sort()) {\n            let read = this.readDataView(dataView, byteOffset + localByteOffset, objectClass.netScheme[property]);\n            obj[property] = read.data;\n            localByteOffset += read.bufferSize;\n        }\n\n        return { obj, byteOffset: localByteOffset };\n    }\n\n    writeDataView(dataView, value, bufferOffset, netSchemProp) {\n        if (netSchemProp.type === BaseTypes.TYPES.FLOAT32) {\n            dataView.setFloat32(bufferOffset, value);\n        } else if (netSchemProp.type === BaseTypes.TYPES.INT32) {\n            dataView.setInt32(bufferOffset, value);\n        } else if (netSchemProp.type === BaseTypes.TYPES.INT16) {\n            dataView.setInt16(bufferOffset, value);\n        } else if (netSchemProp.type === BaseTypes.TYPES.INT8) {\n            dataView.setInt8(bufferOffset, value);\n        } else if (netSchemProp.type === BaseTypes.TYPES.UINT8) {\n            dataView.setUint8(bufferOffset, value);\n        } else if (netSchemProp.type === BaseTypes.TYPES.STRING) {\n\n            //   MAX_UINT_16 is a reserved (length) value which indicates string hasn't changed\n            if (value === null) {\n                dataView.setUint16(bufferOffset, MAX_UINT_16);\n            } else {\n                let strLen = value.length;\n                dataView.setUint16(bufferOffset, strLen);\n                let localBufferOffset = 2;\n                for (let i = 0; i < strLen; i++)\n                    dataView.setUint16(bufferOffset + localBufferOffset + i * 2, value.charCodeAt(i));\n            }\n        } else if (netSchemProp.type === BaseTypes.TYPES.CLASSINSTANCE) {\n            value.serialize(this, {\n                dataBuffer: dataView.buffer,\n                bufferOffset: bufferOffset\n            });\n        } else if (netSchemProp.type === BaseTypes.TYPES.LIST) {\n            let localBufferOffset = 0;\n\n            // a list is comprised of the number of items followed by the items\n            dataView.setUint16(bufferOffset + localBufferOffset, value.length);\n            localBufferOffset += Uint16Array.BYTES_PER_ELEMENT;\n\n            for (let item of value) {\n                // TODO: inelegant, currently doesn't support list of lists\n                if (netSchemProp.itemType === BaseTypes.TYPES.CLASSINSTANCE) {\n                    let serializedObj = item.serialize(this, {\n                        dataBuffer: dataView.buffer,\n                        bufferOffset: bufferOffset + localBufferOffset\n                    });\n                    localBufferOffset += serializedObj.bufferOffset;\n                } else if (netSchemProp.itemType === BaseTypes.TYPES.STRING) {\n                    //   MAX_UINT_16 is a reserved (length) value which indicates string hasn't changed\n                    if (item === null) {\n                        dataView.setUint16(bufferOffset + localBufferOffset, MAX_UINT_16);\n                        localBufferOffset += Uint16Array.BYTES_PER_ELEMENT;\n                    } else {\n                        let strLen = item.length;\n                        dataView.setUint16(bufferOffset + localBufferOffset, strLen);\n                        localBufferOffset += Uint16Array.BYTES_PER_ELEMENT;\n                        for (let i = 0; i < strLen; i++)\n                            dataView.setUint16(bufferOffset + localBufferOffset + i * 2, item.charCodeAt(i));\n                        localBufferOffset += Uint16Array.BYTES_PER_ELEMENT * strLen;\n                    }\n                } else {\n                    this.writeDataView(dataView, item, bufferOffset + localBufferOffset, { type: netSchemProp.itemType });\n                    localBufferOffset += this.getTypeByteSize(netSchemProp.itemType);\n                }\n            }\n        } else if (this.customTypes[netSchemProp.type]) {\n            // this is a custom data property which needs to define its own write method\n            this.customTypes[netSchemProp.type].writeDataView(dataView, value, bufferOffset);\n        } else {\n            console.error(`No custom property ${netSchemProp.type} found!`);\n        }\n\n    }\n\n    readDataView(dataView, bufferOffset, netSchemProp) {\n        let data, bufferSize;\n\n        if (netSchemProp.type === BaseTypes.TYPES.FLOAT32) {\n            data = dataView.getFloat32(bufferOffset);\n            bufferSize = this.getTypeByteSize(netSchemProp.type);\n        } else if (netSchemProp.type === BaseTypes.TYPES.INT32) {\n            data = dataView.getInt32(bufferOffset);\n            bufferSize = this.getTypeByteSize(netSchemProp.type);\n        } else if (netSchemProp.type === BaseTypes.TYPES.INT16) {\n            data = dataView.getInt16(bufferOffset);\n            bufferSize = this.getTypeByteSize(netSchemProp.type);\n        } else if (netSchemProp.type === BaseTypes.TYPES.INT8) {\n            data = dataView.getInt8(bufferOffset);\n            bufferSize = this.getTypeByteSize(netSchemProp.type);\n        } else if (netSchemProp.type === BaseTypes.TYPES.UINT8) {\n            data = dataView.getUint8(bufferOffset);\n            bufferSize = this.getTypeByteSize(netSchemProp.type);\n        } else if (netSchemProp.type === BaseTypes.TYPES.STRING) {\n            let length = dataView.getUint16(bufferOffset);\n            let localBufferOffset = Uint16Array.BYTES_PER_ELEMENT;\n            bufferSize = localBufferOffset;\n            if (length === MAX_UINT_16) {\n                data = null;\n            } else {\n                let a = [];\n                for (let i = 0; i < length; i++)\n                    a[i] = dataView.getUint16(bufferOffset + localBufferOffset + i * 2);\n                data = String.fromCharCode.apply(null, a);\n                bufferSize += length * Uint16Array.BYTES_PER_ELEMENT;\n            }\n        } else if (netSchemProp.type === BaseTypes.TYPES.CLASSINSTANCE) {\n            var deserializeData = this.deserialize(dataView.buffer, bufferOffset);\n            data = deserializeData.obj;\n            bufferSize = deserializeData.byteOffset;\n        } else if (netSchemProp.type === BaseTypes.TYPES.LIST) {\n            let localBufferOffset = 0;\n\n            let items = [];\n            let itemCount = dataView.getUint16(bufferOffset + localBufferOffset);\n            localBufferOffset += Uint16Array.BYTES_PER_ELEMENT;\n\n            for (let x = 0; x < itemCount; x++) {\n                let read = this.readDataView(dataView, bufferOffset + localBufferOffset, { type: netSchemProp.itemType });\n                items.push(read.data);\n                localBufferOffset += read.bufferSize;\n            }\n\n            data = items;\n            bufferSize = localBufferOffset;\n        } else if (this.customTypes[netSchemProp.type] != null) {\n            // this is a custom data property which needs to define its own read method\n            data = this.customTypes[netSchemProp.type].readDataView(dataView, bufferOffset);\n        } else {\n            console.error(`No custom property ${netSchemProp.type} found!`);\n        }\n\n        return { data: data, bufferSize: bufferSize };\n    }\n\n    getTypeByteSize(type) {\n\n        switch (type) {\n        case BaseTypes.TYPES.FLOAT32: {\n            return Float32Array.BYTES_PER_ELEMENT;\n        }\n        case BaseTypes.TYPES.INT32: {\n            return Int32Array.BYTES_PER_ELEMENT;\n        }\n        case BaseTypes.TYPES.INT16: {\n            return Int16Array.BYTES_PER_ELEMENT;\n        }\n        case BaseTypes.TYPES.INT8: {\n            return Int8Array.BYTES_PER_ELEMENT;\n        }\n        case BaseTypes.TYPES.UINT8: {\n            return Uint8Array.BYTES_PER_ELEMENT;\n        }\n\n        // not one of the basic properties\n        default: {\n            if (type === undefined) {\n                throw 'netScheme property declared without type attribute!';\n            } else if (this.customTypes[type] === null) {\n                throw `netScheme property ${type} undefined! Did you forget to add it to the serializer?`;\n            } else {\n                return this.customTypes[type].BYTES_PER_ELEMENT;\n            }\n        }\n\n        }\n\n    }\n}\n\nexport default Serializer;\n","import EventEmitter from 'event-emitter';\nimport http from 'http';\n\n/**\n * Measures network performance between the client and the server\n * Represents both the client and server portions of NetworkMonitor\n */\nexport default class NetworkMonitor {\n\n    constructor(server) {\n\n        // server-side keep game name\n        if (server) {\n            this.server = server;\n            this.gameName = Object.getPrototypeOf(server.gameEngine).constructor.name;\n        }\n\n        // mixin for EventEmitter\n        let eventEmitter = new EventEmitter();\n        this.on = eventEmitter.on;\n        this.once = eventEmitter.once;\n        this.removeListener = eventEmitter.removeListener;\n        this.emit = eventEmitter.emit;\n    }\n\n    // client\n    registerClient(clientEngine) {\n        this.queryIdCounter = 0;\n        this.RTTQueries = {};\n\n        this.movingRTTAverage = 0;\n        this.movingRTTAverageFrame = [];\n        this.movingFPSAverageSize = clientEngine.options.healthCheckRTTSample;\n        this.clientEngine = clientEngine;\n        clientEngine.socket.on('RTTResponse', this.onReceivedRTTQuery.bind(this));\n        setInterval(this.sendRTTQuery.bind(this), clientEngine.options.healthCheckInterval);\n    }\n\n    sendRTTQuery() {\n        // todo implement cleanup of older timestamp\n        this.RTTQueries[this.queryIdCounter] = new Date().getTime();\n        this.clientEngine.socket.emit('RTTQuery', this.queryIdCounter);\n        this.queryIdCounter++;\n    }\n\n    onReceivedRTTQuery(queryId) {\n        let RTT = (new Date().getTime()) - this.RTTQueries[queryId];\n\n        this.movingRTTAverageFrame.push(RTT);\n        if (this.movingRTTAverageFrame.length > this.movingFPSAverageSize) {\n            this.movingRTTAverageFrame.shift();\n        }\n        this.movingRTTAverage = this.movingRTTAverageFrame.reduce((a, b) => a + b) / this.movingRTTAverageFrame.length;\n        this.emit('RTTUpdate', {\n            RTT: RTT,\n            RTTAverage: this.movingRTTAverage\n        });\n    }\n\n    // server\n    registerPlayerOnServer(socket) {\n        socket.on('RTTQuery', this.respondToRTTQuery.bind(this, socket));\n        if (this.server && this.server.options.countConnections) {\n            http.get(`http://ping.games-eu.lance.gg:2000/${this.gameName}`).on('error', () => {});\n        }\n    }\n\n    respondToRTTQuery(socket, queryId) {\n        socket.emit('RTTResponse', queryId);\n    }\n\n}\n","import Serializable from './../serialize/Serializable';\nimport Utils from './../lib/Utils';\n\nexport default class NetworkedEventFactory {\n\n    constructor(serializer, eventName, options) {\n        options = Object.assign({}, options);\n\n        this.seriazlier = serializer;\n        this.options = options;\n\n        this.eventName = eventName;\n        this.netScheme = options.netScheme;\n\n    }\n\n    /**\n     * Creates a new networkedEvent\n     * @param {Object} payload an object representing the payload to be transferred over the wire\n     * @return {Serializable} the new networkedEvent object\n     */\n    create(payload) {\n        let networkedEvent = new Serializable();\n        networkedEvent.classId = Utils.hashStr(this.eventName);\n        networkedEvent.eventName = this.eventName\n\n        if (this.netScheme) {\n            networkedEvent.netScheme = Object.assign({}, this.netScheme);\n\n            // copy properties from the networkedEvent instance to its ad-hoc netsScheme\n            for (let property of Object.keys(this.netScheme)) {\n                networkedEvent[property] = payload[property];\n            }\n\n        } else {\n            // todo take care of the event where no netScheme is defined\n        }\n\n        return networkedEvent;\n    }\n\n}\n","import BaseTypes from '../serialize/BaseTypes';\nimport Serializable from '../serialize/Serializable';\n\n/**\n * Defines a collection of NetworkEvents to be transmitted over the wire\n */\nexport default class NetworkedEventCollection extends Serializable {\n\n    static get netScheme() {\n        return {\n            events: {\n                type: BaseTypes.TYPES.LIST,\n                itemType: BaseTypes.TYPES.CLASSINSTANCE\n            },\n        };\n    }\n\n    constructor(events) {\n        super();\n        this.events = events || [];\n    }\n\n}\n","import BaseTypes from '../serialize/BaseTypes';\n\nimport NetworkedEventFactory from './NetworkedEventFactory';\nimport NetworkedEventCollection from './NetworkedEventCollection';\nimport Utils from './../lib/Utils';\n\nexport default class NetworkTransmitter {\n\n    constructor(serializer, world) {\n        this.serializer = serializer;\n        this.world = world\n\n        this.registeredEvents = [];\n        this.networkedEventCollection = {}\n\n        this.serializer.registerClass(NetworkedEventCollection);\n\n        this.registerNetworkedEventFactory('objectUpdate', {\n            netScheme: {\n                stepCount: { type: BaseTypes.TYPES.INT32 },\n                objectInstance: { type: BaseTypes.TYPES.CLASSINSTANCE }\n            }\n        });\n\n        this.registerNetworkedEventFactory('objectCreate', {\n            netScheme: {\n                stepCount: { type: BaseTypes.TYPES.INT32 },\n                objectInstance: { type: BaseTypes.TYPES.CLASSINSTANCE }\n            }\n        });\n\n        this.registerNetworkedEventFactory('objectDestroy', {\n            netScheme: {\n                stepCount: { type: BaseTypes.TYPES.INT32 },\n                objectInstance: { type: BaseTypes.TYPES.CLASSINSTANCE }\n            }\n        });\n\n        this.registerNetworkedEventFactory('syncHeader', {\n            netScheme: {\n                stepCount: { type: BaseTypes.TYPES.INT32 },\n                fullUpdate: { type: BaseTypes.TYPES.UINT8 }\n            }\n        });\n\n        world.onAddGroup = (name) => {\n            this.networkedEventCollection[name] = new NetworkedEventCollection()\n        }\n\n        world.onRemoveGroup = (name) => {\n            delete this.networkedEventCollection[name]\n        }\n    }\n\n    registerNetworkedEventFactory(eventName, options) {\n        options = Object.assign({}, options);\n\n        let classHash = Utils.hashStr(eventName);\n\n        let networkedEventPrototype = function() {};\n        networkedEventPrototype.prototype.classId = classHash;\n        networkedEventPrototype.prototype.eventName = eventName;\n        networkedEventPrototype.netScheme = options.netScheme;\n\n        this.serializer.registerClass(networkedEventPrototype, classHash);\n\n        this.registeredEvents[eventName] = new NetworkedEventFactory(this.serializer, eventName, options);\n    }\n\n    addNetworkedEvent(roomName, eventName, payload) {\n        if (!this.registeredEvents[eventName]) {\n            console.error(`NetworkTransmitter: no such event ${eventName}`);\n            return null;\n        }\n        if (!this.networkedEventCollection[roomName]) {\n            return null\n        }\n\n        let stagedNetworkedEvent = this.registeredEvents[eventName].create(payload);\n        this.networkedEventCollection[roomName].events.push(stagedNetworkedEvent);\n        return stagedNetworkedEvent;\n    }\n\n    serializePayload(roomName) {\n        if (!this.networkedEventCollection[roomName]) {\n            return null\n        }\n        if (this.networkedEventCollection[roomName].events.length === 0)\n            return null;\n\n        let dataBuffer = this.networkedEventCollection[roomName].serialize(this.serializer);\n\n        return dataBuffer;\n    }\n\n    deserializePayload(payload) {\n        return this.serializer.deserialize(payload.dataBuffer).obj;\n    }\n\n    clearPayload(roomName) {\n        this.networkedEventCollection[roomName].events = []\n    }\n\n}\n","import ioClient from 'socket.io-client'\nimport Utils from './lib/Utils';\nimport Scheduler from './lib/Scheduler';\nimport Synchronizer from './Synchronizer';\nimport Serializer from './serialize/Serializer';\nimport NetworkMonitor from './network/NetworkMonitor';\nimport NetworkTransmitter from './network/NetworkTransmitter';\n\n// TODO: the GAME_UPS below should be common to the value implemented in the server engine,\n// or better yet, it should be configurable in the GameEngine instead of ServerEngine+ClientEngine\nconst GAME_UPS = 60; // default number of game steps per second\nconst STEP_DELAY_MSEC = 12; // if forward drift detected, delay next execution by this amount\nconst STEP_HURRY_MSEC = 8; // if backward drift detected, hurry next execution by this amount\n\n/**\n * The client engine is the singleton which manages the client-side\n * process, starting the game engine, listening to network messages,\n * starting client steps, and handling world updates which arrive from\n * the server.\n * Normally, a game will implement its own sub-class of ClientEngine, and may\n * override the constructor {@link ClientEngine#constructor} and the methods\n * {@link ClientEngine#start} and {@link ClientEngine#connect}\n */\nclass ClientEngine {\n\n    /**\n      * Create a client engine instance.\n      *\n      * @param {GameEngine} gameEngine - a game engine\n      * @param {Object} inputOptions - options object\n      * @param {Boolean} inputOptions.verbose - print logs to console\n      * @param {Boolean} inputOptions.autoConnect - if true, the client will automatically attempt connect to server.\n      * @param {Boolean} inputOptions.standaloneMode - if true, the client will never try to connect to a server\n      * @param {Number} inputOptions.delayInputCount - if set, inputs will be delayed by this many steps before they are actually applied on the client.\n      * @param {Number} inputOptions.healthCheckInterval - health check message interval (millisec). Default is 1000.\n      * @param {Number} inputOptions.healthCheckRTTSample - health check RTT calculation sample size. Default is 10.\n      * @param {String} inputOptions.scheduler - When set to \"render-schedule\" the game step scheduling is controlled by the renderer and step time is variable.  When set to \"fixed\" the game step is run independently with a fixed step time. Default is \"render-schedule\".\n      * @param {Object} inputOptions.syncOptions - an object describing the synchronization method. If not set, will be set to extrapolate, with local object bending set to 0.0 and remote object bending set to 0.6. If the query-string parameter \"sync\" is defined, then that value is passed to this object's sync attribute.\n      * @param {String} inputOptions.syncOptions.sync - chosen sync option, can be \"interpolate\", \"extrapolate\", or \"frameSync\"\n      * @param {Number} inputOptions.syncOptions.localObjBending - amount (0 to 1.0) of bending towards original client position, after each sync, for local objects\n      * @param {Number} inputOptions.syncOptions.remoteObjBending - amount (0 to 1.0) of bending towards original client position, after each sync, for remote objects\n      * @param {String} inputOptions.serverURL - Socket server url\n      * @param {Renderer} Renderer - the Renderer class constructor\n      */\n    constructor(gameEngine, io, inputOptions, Renderer) {\n\n        this.options = Object.assign({\n            autoConnect: true,\n            healthCheckInterval: 1000,\n            healthCheckRTTSample: 10,\n            stepPeriod: 1000 / GAME_UPS,\n            scheduler: 'render-schedule',\n            serverURL: null,\n            showLatency: false\n        }, inputOptions);\n\n        this.io = io || ioClient\n\n        /**\n         * reference to serializer\n         * @member {Serializer}\n         */\n        this.serializer = new Serializer();\n\n        /**\n         * reference to game engine\n         * @member {GameEngine}\n         */\n        this.gameEngine = gameEngine;\n        this.gameEngine.registerClasses(this.serializer);\n        this.networkMonitor = new NetworkMonitor();\n\n        this.inboundMessages = [];\n        this.outboundMessages = [];\n\n        // create the renderer\n        this.renderer = this.gameEngine.renderer = new Renderer(gameEngine, this);\n\n        // step scheduler\n        this.scheduler = null;\n        this.lastStepTime = 0;\n        this.correction = 0;\n\n        if (this.options.standaloneMode !== true) {\n            this.configureSynchronization();\n        }\n\n        // create a buffer of delayed inputs (fifo)\n        if (inputOptions && inputOptions.delayInputCount) {\n            this.delayedInputs = [];\n            for (let i = 0; i < inputOptions.delayInputCount; i++)\n                this.delayedInputs[i] = [];\n        }\n\n        this.gameEngine.emit('client__init');\n    }\n\n    // configure the Synchronizer singleton\n    configureSynchronization() {\n\n        // the reflect syncronizer is just interpolate strategy,\n        // configured to show server syncs\n        let syncOptions = this.options.syncOptions;\n        if (syncOptions.sync === 'reflect') {\n            syncOptions.sync = 'interpolate';\n            syncOptions.reflect = true;\n        }\n\n        this.synchronizer = new Synchronizer(this, syncOptions);\n    }\n\n    /**\n     * Makes a connection to the game server.  Extend this method if you want to add additional\n     * logic on every connection. Call the super-class connect first, and return a promise which\n     * executes when the super-class promise completes.\n     *\n     * @param {Object} [options] additional socket.io options\n     * @return {Promise} Resolved when the connection is made to the server\n     */\n    connect(options = {}) {\n\n        if (this.gameEngine.standalone) {\n            this.socket = this.io\n        }\n        else {\n            this.socket = this.io(options)\n        }\n\n        this.networkMonitor.registerClient(this);\n\n        this.socket.on('playerJoined', (playerData) => {\n            this.gameEngine.playerId = playerData.playerId;\n            this.messageIndex = this.gameEngine.playerId;\n        });\n\n        this.socket.on('worldUpdate', (worldData) => {\n            this.inboundMessages.push(worldData);\n        });\n\n        this.socket.on('roomUpdate', (roomData) => {\n            this.gameEngine.emit('client__roomUpdate', roomData);\n        });\n\n        let startTime\n\n        if (this.options.showLatency) {\n            setInterval(() => {\n                startTime = Date.now()\n                this.socket.emit('_ping')\n            }, 2000)\n        }\n    \n        this.socket.on('_pong', () => {\n            const latency = Date.now() - startTime\n            if (this.onLatency) this.onLatency(latency)\n        })\n\n        if (this.gameEngine.standalone) {\n            this.io.connection()\n        }\n    }\n\n\n    updateObjectData(data) {\n        const logic = this.gameEngine.world.getObject(data)\n        if (logic) {\n            if (!logic) return null\n            if (!logic.data) logic.data = {}\n            for (let key in data) {\n                if (key == 'id') continue\n                logic.data[key] = data[key]\n            }\n            this.gameEngine.emit('client__objectUpdate', {\n                object: logic,\n                data\n            });\n        }\n        return !!logic\n    }\n\n    /**\n     * Start the client engine, setting up the game loop, rendering loop and renderer.\n     *\n     * @return {Promise} Resolves once the Renderer has been initialized, and the game is\n     * ready to connect\n     */\n    start() {\n        this.stopped = false;\n        this.resolved = false;\n        // initialize the renderer\n        // the render loop waits for next animation frame\n        if (!this.renderer) alert('ERROR: game has not defined a renderer');\n        let renderLoop = (timestamp) => {\n            if (this.stopped) {\n                this.renderer.stop();\n                return;\n            }\n            this.lastTimestamp = this.lastTimestamp || timestamp;\n            this.renderer.draw(timestamp, timestamp - this.lastTimestamp);\n            this.lastTimestamp = timestamp;\n            window.requestAnimationFrame(renderLoop);\n        };\n\n        return this.renderer.init().then(() => {\n            this.gameEngine.start();\n            this.networkTransmitter = new NetworkTransmitter(this.serializer, this.gameEngine.world);\n            if (this.options.scheduler === 'fixed') {\n                // schedule and start the game loop\n                this.scheduler = new Scheduler({\n                    period: this.options.stepPeriod,\n                    tick: this.step.bind(this),\n                    delay: STEP_DELAY_MSEC\n                });\n                this.scheduler.start();\n            }\n\n            if (typeof window !== 'undefined')\n                window.requestAnimationFrame(renderLoop);\n            if (this.options.autoConnect && this.options.standaloneMode !== true) {\n                return this.connect()\n                    .catch((error) => {\n                        this.stopped = true;\n                        throw error;\n                    });\n            }\n        }).then(() => {\n            return new Promise((resolve, reject) => {\n                this.resolveGame = resolve;\n                if (this.socket) {\n                    this.socket.on('disconnect', () => {\n                        if (!this.resolved && !this.stopped) {\n                            if (this.options.verbose)\n                                console.log('disconnected by server...');\n                            //this.stopped = true;\n                            reject();\n                        }\n                    });\n                }\n            });\n        });\n    }\n\n    /**\n     * Disconnect from game server\n     */\n    disconnect() {\n        if (!this.stopped) {\n            this.socket.disconnect();\n            this.stopped = true;\n        }\n    }\n\n    // check if client step is too far ahead (leading) or too far\n    // behing (lagging) the server step\n    checkDrift(checkType) {\n\n        if (!this.gameEngine.highestServerStep)\n            return;\n\n        let thresholds = this.synchronizer.syncStrategy.STEP_DRIFT_THRESHOLDS;\n        let maxLead = thresholds[checkType].MAX_LEAD;\n        let maxLag = thresholds[checkType].MAX_LAG;\n        let clientStep = this.gameEngine.world.stepCount;\n        let serverStep = this.gameEngine.highestServerStep;\n        if (clientStep > serverStep + maxLead) {\n            this.gameEngine.trace.warn(() => `step drift ${checkType}. [${clientStep} > ${serverStep} + ${maxLead}] Client is ahead of server.  Delaying next step.`);\n            if (this.scheduler) this.scheduler.delayTick();\n            this.lastStepTime += STEP_DELAY_MSEC;\n            this.correction += STEP_DELAY_MSEC;\n        } else if (serverStep > clientStep + maxLag) {\n            this.gameEngine.trace.warn(() => `step drift ${checkType}. [${serverStep} > ${clientStep} + ${maxLag}] Client is behind server.  Hurrying next step.`);\n            if (this.scheduler) this.scheduler.hurryTick();\n            this.lastStepTime -= STEP_HURRY_MSEC;\n            this.correction -= STEP_HURRY_MSEC;\n        }\n    }\n\n    // execute a single game step.  This is normally called by the Renderer\n    // at each draw event.\n    step(t, dt, physicsOnly) {\n\n        if (!this.resolved) {\n            const result = this.gameEngine.getPlayerGameOverResult();\n            if (result) {\n                this.resolved = true;\n                this.resolveGame(result);\n                // simulation can continue...\n                // call disconnect to quit\n            }\n        }\n\n        // physics only case\n        if (physicsOnly) {\n            this.gameEngine.step(false, t, dt, physicsOnly);\n            return;\n        }\n\n        // first update the trace state\n        this.gameEngine.trace.setStep(this.gameEngine.world.stepCount + 1);\n\n        // skip one step if requested\n        if (this.skipOneStep === true) {\n            this.skipOneStep = false;\n            return;\n        }\n\n        this.gameEngine.emit('client__preStep');\n\n        while (this.inboundMessages.length > 0) {\n            this.handleInboundMessage(this.inboundMessages.pop());\n            this.checkDrift('onServerSync');\n        }\n\n        // check for server/client step drift without update\n        this.checkDrift('onEveryStep');\n\n        // perform game engine step\n        if (this.options.standaloneMode !== true) {\n            this.handleOutboundInput();\n        }\n        this.applyDelayedInputs();\n        this.gameEngine.step(false, t, dt);\n        this.gameEngine.emit('client__postStep', { dt });\n\n        if (this.options.standaloneMode !== true && this.gameEngine.trace.length && this.socket) {\n            // socket might not have been initialized at this point\n            this.socket.emit('trace', JSON.stringify(this.gameEngine.trace.rotate()));\n        }\n    }\n\n    // apply a user input on the client side\n    doInputLocal(message) {\n\n        // some synchronization strategies (interpolate) ignore inputs on client side\n        if (this.gameEngine.ignoreInputs) {\n            return;\n        }\n\n        const inputEvent = { input: message.data, playerId: this.gameEngine.playerId };\n        this.gameEngine.emit('client__processInput', inputEvent);\n        this.gameEngine.emit('processInput', inputEvent);\n        this.gameEngine.processInput(message.data, this.gameEngine.playerId, false);\n    }\n\n    // apply user inputs which have been queued in order to create\n    // an artificial delay\n    applyDelayedInputs() {\n        if (!this.delayedInputs) {\n            return;\n        }\n        let that = this;\n        let delayed = this.delayedInputs.shift();\n        if (delayed && delayed.length) {\n            delayed.forEach(that.doInputLocal.bind(that));\n        }\n        this.delayedInputs.push([]);\n    }\n\n    /**\n     * This function should be called by the client whenever a user input\n     * occurs.  This function will emit the input event,\n     * forward the input to the client's game engine (with a delay if\n     * so configured) and will transmit the input to the server as well.\n     *\n     * This function can be called by the extended client engine class,\n     * typically at the beginning of client-side step processing {@see GameEngine#client__preStep}.\n     *\n     * @param {String} input - string representing the input\n     * @param {Object} inputOptions - options for the input\n     */\n    sendInput(input, inputOptions) {\n        let inputEvent = {\n            command: 'move',\n            data: {\n                messageIndex: this.messageIndex,\n                step: this.gameEngine.world.stepCount,\n                input: input,\n                options: inputOptions\n            }\n        };\n\n        this.gameEngine.trace.info(() => `USER INPUT[${this.messageIndex}]: ${input} ${inputOptions ? JSON.stringify(inputOptions) : '{}'}`);\n\n        // if we delay input application on client, then queue it\n        // otherwise apply it now\n        if (this.delayedInputs) {\n            this.delayedInputs[this.delayedInputs.length - 1].push(inputEvent);\n        } else {\n            this.doInputLocal(inputEvent);\n        }\n\n        if (this.options.standaloneMode !== true) {\n            this.outboundMessages.push(inputEvent);\n        }\n\n        this.messageIndex++;\n    }\n\n    // handle a message that has been received from the server\n    handleInboundMessage(syncData) {\n\n        let syncEvents = this.networkTransmitter.deserializePayload(syncData).events;\n        let syncHeader = syncEvents.find((e) => e.eventName === 'syncHeader');\n\n        // emit that a snapshot has been received\n        if (!this.gameEngine.highestServerStep || syncHeader.stepCount > this.gameEngine.highestServerStep)\n            this.gameEngine.highestServerStep = syncHeader.stepCount;\n        this.gameEngine.emit('client__syncReceived', {\n            syncEvents: syncEvents,\n            stepCount: syncHeader.stepCount,\n            fullUpdate: syncHeader.fullUpdate\n        });\n\n        this.gameEngine.trace.info(() => `========== inbound world update ${syncHeader.stepCount} ==========`);\n\n        // finally update the stepCount\n        if (syncHeader.stepCount > this.gameEngine.world.stepCount + this.synchronizer.syncStrategy.STEP_DRIFT_THRESHOLDS.clientReset) {\n            this.gameEngine.trace.info(() => `========== world step count updated from ${this.gameEngine.world.stepCount} to  ${syncHeader.stepCount} ==========`);\n            this.gameEngine.emit('client__stepReset', { oldStep: this.gameEngine.world.stepCount, newStep: syncHeader.stepCount });\n            this.gameEngine.world.stepCount = syncHeader.stepCount;\n        }\n    }\n\n    // emit an input to the authoritative server\n    handleOutboundInput() {\n        for (var x = 0; x < this.outboundMessages.length; x++) {\n            this.socket.emit(this.outboundMessages[x].command, this.outboundMessages[x].data);\n        }\n        this.outboundMessages = [];\n    }\n\n}\n\nexport default ClientEngine;\n","// based on http://keycode.info/\n\n// keyboard handling\nconst keyCodeTable = {\n    3: 'break',\n    8: 'backspace', // backspace / delete\n    9: 'tab',\n    12: 'clear',\n    13: 'enter',\n    16: 'shift',\n    17: 'ctrl',\n    18: 'alt',\n    19: 'pause/break',\n    20: 'caps lock',\n    27: 'escape',\n    28: 'conversion',\n    29: 'non-conversion',\n    32: 'space',\n    33: 'page up',\n    34: 'page down',\n    35: 'end',\n    36: 'home',\n    37: 'left',\n    38: 'up',\n    39: 'right',\n    40: 'down',\n    41: 'select',\n    42: 'print',\n    43: 'execute',\n    44: 'Print Screen',\n    45: 'insert',\n    46: 'delete',\n    48: '0',\n    49: '1',\n    50: '2',\n    51: '3',\n    52: '4',\n    53: '5',\n    54: '6',\n    55: '7',\n    56: '8',\n    57: '9',\n    58: ':',\n    59: 'semicolon (firefox), equals',\n    60: '<',\n    61: 'equals (firefox)',\n    63: 'ß',\n    64: '@',\n    65: 'a',\n    66: 'b',\n    67: 'c',\n    68: 'd',\n    69: 'e',\n    70: 'f',\n    71: 'g',\n    72: 'h',\n    73: 'i',\n    74: 'j',\n    75: 'k',\n    76: 'l',\n    77: 'm',\n    78: 'n',\n    79: 'o',\n    80: 'p',\n    81: 'q',\n    82: 'r',\n    83: 's',\n    84: 't',\n    85: 'u',\n    86: 'v',\n    87: 'w',\n    88: 'x',\n    89: 'y',\n    90: 'z',\n    91: 'Windows Key / Left ⌘ / Chromebook Search key',\n    92: 'right window key',\n    93: 'Windows Menu / Right ⌘',\n    96: 'numpad 0',\n    97: 'numpad 1',\n    98: 'numpad 2',\n    99: 'numpad 3',\n    100: 'numpad 4',\n    101: 'numpad 5',\n    102: 'numpad 6',\n    103: 'numpad 7',\n    104: 'numpad 8',\n    105: 'numpad 9',\n    106: 'multiply',\n    107: 'add',\n    108: 'numpad period (firefox)',\n    109: 'subtract',\n    110: 'decimal point',\n    111: 'divide',\n    112: 'f1',\n    113: 'f2',\n    114: 'f3',\n    115: 'f4',\n    116: 'f5',\n    117: 'f6',\n    118: 'f7',\n    119: 'f8',\n    120: 'f9',\n    121: 'f10',\n    122: 'f11',\n    123: 'f12',\n    124: 'f13',\n    125: 'f14',\n    126: 'f15',\n    127: 'f16',\n    128: 'f17',\n    129: 'f18',\n    130: 'f19',\n    131: 'f20',\n    132: 'f21',\n    133: 'f22',\n    134: 'f23',\n    135: 'f24',\n    144: 'num lock',\n    145: 'scroll lock',\n    160: '^',\n    161: '!',\n    163: '#',\n    164: '$',\n    165: 'ù',\n    166: 'page backward',\n    167: 'page forward',\n    169: 'closing paren (AZERTY)',\n    170: '*',\n    171: '~ + * key',\n    173: 'minus (firefox), mute/unmute',\n    174: 'decrease volume level',\n    175: 'increase volume level',\n    176: 'next',\n    177: 'previous',\n    178: 'stop',\n    179: 'play/pause',\n    180: 'e-mail',\n    181: 'mute/unmute (firefox)',\n    182: 'decrease volume level (firefox)',\n    183: 'increase volume level (firefox)',\n    186: 'semi-colon / ñ',\n    187: 'equal sign',\n    188: 'comma',\n    189: 'dash',\n    190: 'period',\n    191: 'forward slash / ç',\n    192: 'grave accent / ñ / æ',\n    193: '?, / or °',\n    194: 'numpad period (chrome)',\n    219: 'open bracket',\n    220: 'back slash',\n    221: 'close bracket / å',\n    222: 'single quote / ø',\n    223: '`',\n    224: 'left or right ⌘ key (firefox)',\n    225: 'altgr',\n    226: '< /git >',\n    230: 'GNOME Compose Key',\n    231: 'ç',\n    233: 'XF86Forward',\n    234: 'XF86Back',\n    240: 'alphanumeric',\n    242: 'hiragana/katakana',\n    243: 'half-width/full-width',\n    244: 'kanji',\n    255: 'toggle touchpad'\n};\n\nconst inverse = (obj) => {\n    const newObj = {}\n    for (let key in obj) {\n        const val = obj[key]\n        newObj[val] = key\n    }\n    return newObj\n}\n\nconst inverseKeyCodeTable = inverse(keyCodeTable)\n\n/**\n * This class allows easy usage of device keyboard controls.  Use the method {@link KeyboardControls#bindKey} to\n * generate events whenever a key is pressed.\n *\n * @example\n *    // in the ClientEngine constructor\n *    this.controls = new KeyboardControls(this);\n *    this.controls.bindKey('left', 'left', { repeat: true } );\n *    this.controls.bindKey('right', 'right', { repeat: true } );\n *    this.controls.bindKey('space', 'space');\n *\n */\nclass KeyboardControls {\n\n    constructor(clientEngine, eventEmitter) {\n\n        this.clientEngine = clientEngine;\n        this.gameEngine = clientEngine.gameEngine;\n\n        this.setupListeners();\n\n        // keep a reference for key press state\n        this.keyState = {};\n\n        // a list of bound keys and their corresponding actions\n        this.boundKeys = {};\n\n        this.stop = false\n        this.eventEmitter = eventEmitter\n\n        this.gameEngine.on('client__preStep', () => {\n            for (let keyName of Object.keys(this.boundKeys)) {\n                if (this.keyState[keyName] && this.keyState[keyName].isDown) {\n\n                    const { repeat, method } = this.boundKeys[keyName].options\n\n                    // handle repeat press\n                    if (repeat || this.keyState[keyName].count == 0) {\n\n                        // callback to get live parameters if function\n                        let parameters = this.boundKeys[keyName].parameters;\n                        if (typeof parameters === \"function\") {\n                            parameters = parameters();\n                        }\n\n                        // todo movement is probably redundant\n                        let inputOptions = Object.assign({\n                            movement: true\n                        }, parameters || {});\n\n                        if (method) {\n                            method(this.boundKeys[keyName])\n                        }\n                        else {\n                            this.clientEngine.sendInput(this.boundKeys[keyName].actionName, inputOptions);\n                        }\n            \n                        this.keyState[keyName].count++;\n                    }\n                }\n            }\n        });\n    }\n\n    setupListeners() {\n        document.addEventListener('keydown', (e) => { this.onKeyChange(e, true);});\n        document.addEventListener('keyup', (e) => { this.onKeyChange(e, false);});\n    }\n\n    /**\n     * Bind a keyboard key to a Lance client event.  Each time the key is pressed,\n     * an event will be transmitted by the client engine, using {@link ClientEngine#sendInput},\n     * and the specified event name.\n     *\n     * Common key names: up, down, left, right, enter, shift, ctrl, alt,\n     * escape, space, page up, page down, end, home, 0..9, a..z, A..Z.\n     * For a full list, please check the source link above.\n     *\n     * @param {String} keys - keyboard key (or array of keys) which will cause the event.\n     * @param {String} actionName - the event name\n     * @param {Object} options - options object\n     * @param {Boolean} options.repeat - if set to true, an event continues to be sent on each game step, while the key is pressed\n     * @param {Object/Function} parameters - parameters (or function to get parameters) to be sent to\n     *                                       the server with sendInput as the inputOptions\n     */\n    bindKey(keys, actionName, options, parameters) {\n        if (!Array.isArray(keys)) keys = [keys];\n\n        let keyOptions = Object.assign({\n            repeat: false\n        }, options);\n\n        keys.forEach(keyName => {\n            this.boundKeys[keyName] = { actionName, options: keyOptions, parameters: parameters };\n        });\n    }\n\n    applyKeyDown(name) {\n        const code = inverseKeyCodeTable[name]\n        const e = new Event('keydown')\n        e.keyCode = code\n        this.onKeyChange(e, true)\n    }\n\n    applyKeyUp(name) {\n        const code = inverseKeyCodeTable[name]\n        const e = new Event('keyup')\n        e.keyCode = code\n        this.onKeyChange(e, false)\n    }\n\n    applyKeyPress(name) {\n        this.applyKeyDown(name)\n        setTimeout(() => {\n            this.applyKeyUp(name)\n        }, 200)\n    }\n\n    // todo implement unbindKey\n\n    onKeyChange(e, isDown) {\n        e = e || window.event;\n\n        let keyName = keyCodeTable[e.keyCode];\n        const isStopped = this.stop\n\n        if (isDown) this.clientEngine.keyChange.next(keyName)\n        \n        if (isStopped) return\n        \n        if (keyName && this.boundKeys[keyName]) {\n            if (this.keyState[keyName] == null) {\n                this.keyState[keyName] = {\n                    count: 0\n                };\n            }\n            this.keyState[keyName].isDown = isDown;\n\n            // key up, reset press count\n            if (!isDown) this.keyState[keyName].count = 0;\n\n            // keep reference to the last key pressed to avoid duplicates\n            this.lastKeyPressed = isDown ? e.keyCode : null;\n            // this.renderer.onKeyChange({ keyName, isDown });\n            e.preventDefault();\n        }\n    }\n}\n\nexport default KeyboardControls;\n","let singleton = null;\n\nconst TIME_RESET_THRESHOLD = 100;\n\n/**\n * The Renderer is the component which must *draw* the game on the client.\n * It will be instantiated once on each client, and must implement the draw\n * method.  The draw method will be invoked on every iteration of the browser's\n * render loop.\n */\nclass Renderer {\n\n    static getInstance() {\n        return singleton;\n    }\n\n    /**\n    * Constructor of the Renderer singleton.\n    * @param {GameEngine} gameEngine - Reference to the GameEngine instance.\n    * @param {ClientEngine} clientEngine - Reference to the ClientEngine instance.\n    */\n    constructor(gameEngine, clientEngine) {\n        this.gameEngine = gameEngine;\n        this.clientEngine = clientEngine;\n        this.gameEngine.on('client__stepReset', () => { this.doReset = true; });\n        gameEngine.on('objectAdded', this.addObject.bind(this));\n        gameEngine.on('objectDestroyed', this.removeObject.bind(this));\n\n        // the singleton renderer has been created\n        singleton = this;\n    }\n\n    /**\n     * Initialize the renderer.\n     * @return {Promise} Resolves when renderer is ready.\n    */\n    init() {\n        if ((typeof window === 'undefined') || !document) {\n            console.log('renderer invoked on server side.');\n        }\n        this.gameEngine.emit('client__rendererReady');\n        return Promise.resolve(); // eslint-disable-line new-cap\n    }\n\n    reportSlowFrameRate() {\n        this.gameEngine.emit('client__slowFrameRate');\n    }\n\n    /**\n     * The main draw function.  This method is called at high frequency,\n     * at the rate of the render loop.  Typically this is 60Hz, in WebVR 90Hz.\n     * If the client engine has been configured to render-schedule, then this\n     * method must call the clientEngine's step method.\n     *\n     * @param {Number} t - current time (only required in render-schedule mode)\n     * @param {Number} dt - time elapsed since last draw\n     */\n    draw(t, dt) {\n        this.gameEngine.emit('client__draw');\n\n        if (this.clientEngine.options.scheduler === 'render-schedule')\n            this.runClientStep(t);\n    }\n\n    /**\n     * The main draw function.  This method is called at high frequency,\n     * at the rate of the render loop.  Typically this is 60Hz, in WebVR 90Hz.\n     *\n     * @param {Number} t - current time\n     * @param {Number} dt - time elapsed since last draw\n     */\n    runClientStep(t) {\n        let p = this.clientEngine.options.stepPeriod;\n        let dt = 0;\n\n        // reset step time if we passed a threshold\n        if (this.doReset || t > this.clientEngine.lastStepTime + TIME_RESET_THRESHOLD) {\n            this.doReset = false;\n            this.clientEngine.lastStepTime = t - p / 2;\n            this.clientEngine.correction = p / 2;\n        }\n\n        // catch-up missed steps\n        while (t > this.clientEngine.lastStepTime + p) {\n            this.clientEngine.step(this.clientEngine.lastStepTime + p, p + this.clientEngine.correction);\n            this.clientEngine.lastStepTime += p;\n            this.clientEngine.correction = 0;\n        }\n\n        // if not ready for a real step yet, return\n        // this might happen after catch up above\n        if (t < this.clientEngine.lastStepTime) {\n            dt = t - this.clientEngine.lastStepTime + this.clientEngine.correction;\n            if (dt < 0) dt = 0;\n            this.clientEngine.correction = this.clientEngine.lastStepTime - t;\n            this.clientEngine.step(t, dt, true);\n            return;\n        }\n\n        // render-controlled step\n        dt = t - this.clientEngine.lastStepTime + this.clientEngine.correction;\n        this.clientEngine.lastStepTime += p;\n        this.clientEngine.correction = this.clientEngine.lastStepTime - t;\n        this.clientEngine.step(t, dt);\n    }\n\n    /**\n     * Handle the addition of a new object to the world.\n     * @param {Object} obj - The object to be added.\n     */\n    addObject(obj) {}\n\n    /**\n     * Handle the removal of an old object from the world.\n     * @param {Object} obj - The object to be removed.\n     */\n    removeObject(obj) {}\n\n    /**\n     * Called when clientEngine has stopped, time to clean up\n     */\n    stop() {}\n}\n\nexport default Renderer;\n","/* global THREE */\nconst FRAME_HISTORY_SIZE = 20;\nconst MAX_SLOW_FRAMES = 10;\n\nexport default {\n    schema: {\n        traceLevel: { default: 4 }\n    },\n\n    init: function() {\n\n        // TODO: Sometimes an object is \"simple\".  For example it uses\n        //       existing AFrame assets (an OBJ file and a material)\n        //       in this case, we can auto-generate the DOM element,\n        //       setting the quaternion, position, material, game-object-id\n        //       and obj-model.  Same goes for objects which use primitive\n        //       geometric objects.  Remember to also remove them.\n        this.CAMERA_OFFSET_VEC = new THREE.Vector3(0, 5, -10);\n        this.frameRateHistory = [];\n        for (let i = 0; i < FRAME_HISTORY_SIZE; i++)\n            this.frameRateHistory.push(false);\n        this.frameRateTest = (1000 / 60) * 1.2;\n\n        // capture the chase camera if available\n        let chaseCameras = document.getElementsByClassName('chaseCamera');\n        if (chaseCameras)\n            this.cameraEl = chaseCameras[0];\n    },\n\n    tick: function(t, dt) {\n        if (!this.gameEngine)\n            return;\n        this.renderer.tick(t, dt);\n\n        let frh = this.frameRateHistory;\n        frh.push(dt > this.frameRateTest);\n        frh.shift();\n        const slowFrames = frh.filter(x => x);\n        if (slowFrames.length > MAX_SLOW_FRAMES) {\n            this.frameRateHistory = frh.map(x => false);\n            this.renderer.reportSlowFrameRate();\n        }\n\n        // for each object in the world, update the a-frame element\n        this.gameEngine.world.forEachObject((id, o) => {\n            let el = o.renderEl;\n            if (el) {\n                let q = o.quaternion;\n                let p = o.position;\n                el.setAttribute('position', `${p.x} ${p.y} ${p.z}`);\n                el.object3D.quaternion.set(q.x, q.y, q.z, q.w);\n\n                // if a chase camera is configured, update it\n                if (this.cameraEl && this.gameEngine.playerId === o.playerId) {\n                    let camera = this.cameraEl.object3D.children[0];\n                    let relativeCameraOffset = this.CAMERA_OFFSET_VEC.clone();\n                    let cameraOffset = relativeCameraOffset.applyMatrix4(o.renderEl.object3D.matrixWorld);\n                    camera.position.copy(cameraOffset);\n                    camera.lookAt(o.renderEl.object3D.position);\n                }\n\n            }\n        });\n    },\n\n    // NOTE: webpack generated incorrect code if you use arrow notation below\n    //       it sets \"this\" to \"undefined\"\n    setGlobals: function(gameEngine, renderer) {\n        this.gameEngine = gameEngine;\n        this.renderer = renderer;\n    }\n};\n","/* globals AFRAME */\n\nimport Renderer from './Renderer';\nimport networkedPhysics from './aframe/system';\n\n/**\n * The A-Frame Renderer\n */\nclass AFrameRenderer extends Renderer {\n\n    /**\n    * Constructor of the Renderer singleton.\n    * @param {GameEngine} gameEngine - Reference to the GameEngine instance.\n    * @param {ClientEngine} clientEngine - Reference to the ClientEngine instance.\n    */\n    constructor(gameEngine, clientEngine) {\n        super(gameEngine, clientEngine);\n\n        // set up the networkedPhysics as an A-Frame system\n        networkedPhysics.setGlobals(gameEngine, this);\n        AFRAME.registerSystem('networked-physics', networkedPhysics);\n    }\n\n    reportSlowFrameRate() {\n        this.gameEngine.emit('client__slowFrameRate');\n    }\n\n    /**\n     * Initialize the renderer.\n     * @return {Promise} Resolves when renderer is ready.\n    */\n    init() {\n\n        let p = super.init();\n\n        let sceneElArray = document.getElementsByTagName('a-scene');\n        if (sceneElArray.length !== 1) {\n            throw new Error('A-Frame scene element not found');\n        }\n        this.scene = sceneElArray[0];\n\n        this.gameEngine.on('objectRemoved', (o) => {\n            o.renderObj.remove();\n        });\n\n        return p; // eslint-disable-line new-cap\n    }\n\n    /**\n     * In AFrame, we set the draw method (which is called at requestAnimationFrame)\n     * to a NO-OP. See tick() instead\n     */\n    draw() {}\n\n    tick(t, dt) {\n        super.draw(t, dt);\n    }\n\n}\n\nexport default AFrameRenderer;\n","var path = require('path');\nvar fs = require('fs');\nvar _0777 = parseInt('0777', 8);\n\nmodule.exports = mkdirP.mkdirp = mkdirP.mkdirP = mkdirP;\n\nfunction mkdirP (p, opts, f, made) {\n    if (typeof opts === 'function') {\n        f = opts;\n        opts = {};\n    }\n    else if (!opts || typeof opts !== 'object') {\n        opts = { mode: opts };\n    }\n    \n    var mode = opts.mode;\n    var xfs = opts.fs || fs;\n    \n    if (mode === undefined) {\n        mode = _0777 & (~process.umask());\n    }\n    if (!made) made = null;\n    \n    var cb = f || function () {};\n    p = path.resolve(p);\n    \n    xfs.mkdir(p, mode, function (er) {\n        if (!er) {\n            made = made || p;\n            return cb(null, made);\n        }\n        switch (er.code) {\n            case 'ENOENT':\n                if (path.dirname(p) === p) return cb(er);\n                mkdirP(path.dirname(p), opts, function (er, made) {\n                    if (er) cb(er, made);\n                    else mkdirP(p, opts, cb, made);\n                });\n                break;\n\n            // In the case of any other error, just see if there's a dir\n            // there already.  If so, then hooray!  If not, then something\n            // is borked.\n            default:\n                xfs.stat(p, function (er2, stat) {\n                    // if the stat fails, then that's super weird.\n                    // let the original error be the failure reason.\n                    if (er2 || !stat.isDirectory()) cb(er, made)\n                    else cb(null, made);\n                });\n                break;\n        }\n    });\n}\n\nmkdirP.sync = function sync (p, opts, made) {\n    if (!opts || typeof opts !== 'object') {\n        opts = { mode: opts };\n    }\n    \n    var mode = opts.mode;\n    var xfs = opts.fs || fs;\n    \n    if (mode === undefined) {\n        mode = _0777 & (~process.umask());\n    }\n    if (!made) made = null;\n\n    p = path.resolve(p);\n\n    try {\n        xfs.mkdirSync(p, mode);\n        made = made || p;\n    }\n    catch (err0) {\n        switch (err0.code) {\n            case 'ENOENT' :\n                made = sync(path.dirname(p), opts, made);\n                sync(p, opts, made);\n                break;\n\n            // In the case of any other error, just see if there's a dir\n            // there already.  If so, then hooray!  If not, then something\n            // is borked.\n            default:\n                var stat;\n                try {\n                    stat = xfs.statSync(p);\n                }\n                catch (err1) {\n                    throw err0;\n                }\n                if (!stat.isDirectory()) throw err0;\n                break;\n        }\n    }\n\n    return made;\n};\n","import fs from 'fs';\nimport mkdirp from 'mkdirp';\nimport Utils from './lib/Utils';\nimport Scheduler from './lib/Scheduler';\nimport Serializer from './serialize/Serializer';\nimport NetworkTransmitter from './network/NetworkTransmitter';\nimport NetworkMonitor from './network/NetworkMonitor'\n\n/**\n * ServerEngine is the main server-side singleton code.\n * Extend this class with your own server-side logic, and\n * start a single instance.\n *\n * This class should not be used to contain the actual\n * game logic.  That belongs in the GameEngine class, where the mechanics\n * of the gameplay are actually implemented.\n * The ServerEngine singleton is typically a lightweight\n * implementation, logging gameplay statistics and registering\n * user activity and user data.\n *\n * The base class implementation is responsible for starting\n * the server, initiating each game step, accepting new\n * connections and dis-connections, emitting periodic game-state\n * updates, and capturing remote user inputs.\n */\nclass ServerEngine {\n\n    /**\n     * create a ServerEngine instance\n     *\n     * @param {SocketIO} io - the SocketIO server\n     * @param {GameEngine} gameEngine - instance of GameEngine\n     * @param {Object} options - server options\n     * @param {Number} options.stepRate - number of steps per second\n     * @param {Number} options.updateRate - number of steps in each update (sync)\n     * @param {Number} options.fullSyncRate - rate at which full-syncs are sent, in step count\n     * @param {String} options.tracesPath - path where traces should go\n     * @param {Boolean} options.countConnections - should ping player connections to lance.gg\n     * @param {Boolean} options.updateOnObjectCreation - should send update immediately when new object is created\n     * @param {Number} options.timeoutInterval=180 - number of seconds after which a player is automatically disconnected if no input is received. Set to 0 for no timeout\n     * @return {ServerEngine} serverEngine - self\n     */\n    constructor(io, gameEngine, world, options) {\n        this.World = world\n        this.options = Object.assign({\n            updateRate: 6,\n            stepRate: 60,\n            fullSyncRate: 20,\n            timeoutInterval: 180,\n            updateOnObjectCreation: true,\n            tracesPath: '',\n            countConnections: true,\n            debug: {\n                serverSendLag: false\n            }\n        }, options);\n        if (this.options.tracesPath !== '') {\n            this.options.tracesPath += '/';\n            mkdirp.sync(this.options.tracesPath);\n        }\n\n        this.io = io;\n\n        /**\n         * reference to game engine\n         * @member {GameEngine}\n         */\n        this.serializer = new Serializer();\n        this.gameEngine = gameEngine;\n        this.gameEngine.registerClasses(this.serializer);\n        this.networkMonitor = new NetworkMonitor(this);\n\n        /**\n         * Default room name\n         * @member {String} DEFAULT_ROOM_NAME\n         */\n        this.DEFAULT_ROOM_NAME = '/lobby';\n        this.rooms = {};\n        this.connectedPlayers = {};\n        this.playerInputQueues = {};\n        this.objMemory = {};\n\n        io.on('connection', this.onPlayerConnected.bind(this));\n        this.gameEngine.on('objectAdded', this.onObjectAdded.bind(this));\n        this.gameEngine.on('objectDestroyed', this.onObjectDestroyed.bind(this));\n\n        return this;\n    }\n\n    // start the ServerEngine\n    start() {\n        this.gameEngine.start();\n        this.networkTransmitter = new NetworkTransmitter(this.serializer, this.gameEngine.world);\n        this.gameEngine.emit('server__init');\n\n        let schedulerConfig = {\n            tick: this.step.bind(this),\n            period: 1000 / this.options.stepRate,\n            delay: 4\n        };\n        this.scheduler = new Scheduler(schedulerConfig).start();\n    }\n\n    // every server step starts here\n    step() {\n\n        // first update the trace state\n        this.gameEngine.trace.setStep(this.gameEngine.world.stepCount + 1);\n        this.gameEngine.emit('server__preStep', this.gameEngine.world.stepCount + 1);\n\n        this.serverTime = (new Date().getTime());\n\n        this.World.send()\n\n        // for each player, replay all the inputs in the oldest step\n        for (let playerId of Object.keys(this.playerInputQueues)) {\n            let inputQueue = this.playerInputQueues[playerId];\n            let queueSteps = Object.keys(inputQueue);\n            let minStep = Math.min.apply(null, queueSteps);\n\n            // check that there are inputs for this step,\n            // and that we have reached/passed this step\n            if (queueSteps.length > 0 && minStep <= this.gameEngine.world.stepCount) {\n                inputQueue[minStep].forEach(input => {\n                    this.gameEngine.emit('server__processInput', { input, playerId });\n                    this.gameEngine.emit('processInput', { input, playerId });\n                    this.gameEngine.processInput(input, playerId, true);\n                });\n                delete inputQueue[minStep];\n            }\n        }\n\n        // run the game engine step\n        this.gameEngine.step(false, this.serverTime / 1000);\n\n        // synchronize the state to all clients\n        //Object.keys(this.rooms).map(this.syncStateToClients.bind(this));\n\n        this.gameEngine.world.groups.forEach((group) => {\n            this.syncStateToClients(group)\n        })\n\n        // remove memory-objects which no longer exist\n        for (let objId of Object.keys(this.objMemory)) {\n            if (!(objId in this.gameEngine.world.objects)) {\n                delete this.objMemory[objId];\n            }\n        }\n\n        // step is done on the server side\n        this.gameEngine.emit('server__postStep', this.gameEngine.world.stepCount);\n\n        if (this.gameEngine.trace.length) {\n            let traceData = this.gameEngine.trace.rotate();\n            let traceString = '';\n            traceData.forEach(t => { traceString += `[${t.time.toISOString()}]${t.step}>${t.data}\\n`; });\n            fs.appendFile(`${this.options.tracesPath}server.trace`, traceString, err => { if (err) throw err; });\n        }\n    }\n\n    syncStateToClients(room) {\n\n        let world = this.gameEngine.world;\n\n        // update clients only at the specified step interval, as defined in options\n        // or if this room needs to sync\n        //const room = this.rooms[roomName];\n        const roomName = room.groupName\n        if (room.requestImmediateSync ||\n            this.gameEngine.world.stepCount % this.options.updateRate === 0) {\n\n            //const roomPlayers = Object.keys(this.connectedPlayers)\n             //   .filter(p => this.connectedPlayers[p].roomName === roomName);\n            // if at least one player is new, we should send a full payload\n            const roomPlayers = world.getObjectsOfGroup(roomName)\n            let diffUpdate = true;\n\n            for (const player of roomPlayers) {\n                if (player._roomName != roomName) continue\n                if (player.state === 'new') {\n                    player.state = 'synced';\n                    diffUpdate = false;\n                }\n            }\n\n            // also, one in N syncs is a full update, or a special request\n            if ((room.syncCounter++ % this.options.fullSyncRate === 0) || room.requestFullSync)\n                diffUpdate = false;\n\n            this.networkTransmitter.addNetworkedEvent(roomName, 'syncHeader', {\n                stepCount: world.stepCount,\n                fullUpdate: Number(!diffUpdate)\n            })\n\n            let dataObjects = {\n                all: {},\n                update: {}\n            }\n            \n            for (const player of roomPlayers) {\n                if (player._roomName != roomName) continue\n                if (player.tick) player.tick()\n                this.serializeUpdate(roomName, player, { diffUpdate });\n            }\n\n            const payload = this.networkTransmitter.serializePayload(roomName);\n\n            if (payload) {\n                for (const player of roomPlayers) { \n                    if (player._socket && player._roomName == roomName) {\n                        player._socket.emit('worldUpdate', payload)\n                    }\n                }\n            }\n            this.networkTransmitter.clearPayload(roomName); \n            room.requestImmediateSync = false;\n            room.requestFullSync = false;\n        }\n    }\n\n    serializeObject(player, schemeRules) {\n        const deepSerialize = (val, schemeParams, schemeQuery) => {\n            if (val == undefined) return\n            const groups = {\n                update: {},\n                all: {}\n            }\n            for (let prop of schemeParams) {\n                const value = val[prop]\n                const originVal = val.getPrev(prop)\n                if (value == undefined || typeof value == 'number' ||  typeof value == 'string') {\n                    if (originVal != val[prop]) {\n                        groups['update'][prop] = value\n                    }\n                    groups['all'][prop] = value\n                    val.setPrev(prop, value)\n                }\n                else if (prop.broadcast) {\n                    const newVal = deepSerialize(val[prop], prop.broadcast, schemeQuery)\n                    for (let keyGroup in newVal.groups) {\n                        groups[keyGroup][prop] = newVal.groups[keyGroup]\n                    }\n                    val[prop] = newVal.origin\n                }\n            }\n            return { groups, origin: val }\n        }\n        let update = {}\n        let all = {}\n        for (let rule of schemeRules) {\n            const { groups } = deepSerialize(player, rule.params, rule.query)\n            update = {\n                ...update,\n                ...groups.update\n            }\n            all = {\n                ...all,\n                ...groups.all\n            }\n        }\n        return { update, all }\n    }\n\n    // create a serialized package of the game world\n    // TODO: this process could be made much much faster if the buffer creation and\n    //       size calculation are done in a single phase, along with string pruning.\n    serializeUpdate(roomName, object, options) {\n        let world = this.gameEngine.world;\n        let diffUpdate = Boolean(options && options.diffUpdate);\n        let objId = object.id\n        let obj = world.objects[objId];\n        let prevObject = this.objMemory[objId];\n\n        // if the object (in serialized form) hasn't changed, move on\n        if (diffUpdate) {\n            let s = obj.serialize(this.serializer);\n            if (prevObject && Utils.arrayBuffersEqual(s.dataBuffer, prevObject))\n                return;\n            else\n                this.objMemory[objId] = s.dataBuffer;\n\n            // prune strings which haven't changed\n            obj = obj.prunedStringsClone(this.serializer, prevObject);\n        }\n\n        this.networkTransmitter.addNetworkedEvent(roomName, 'objectUpdate', {\n            stepCount: world.stepCount,\n            objectInstance: obj\n        });\n    }\n\n    /**\n     * Create a room\n     *\n     * There is a default room called \"/lobby\".  All newly created players\n     * and objects are assigned to the default room.  When the server sends\n     * periodic syncs to the players, each player is only sent those objects\n     * which are present in his room.\n     *\n     * @param {String} roomName - the new room name\n     */\n    createRoom(roomName, options) {\n        this.gameEngine.world.addGroup(roomName, options)\n    }\n\n    /**\n     * Assign an object to a room\n     *\n     * @param {Object} obj - the object to move\n     * @param {String} roomName - the target room\n     */\n    assignObjectToRoom(obj, roomName) {\n        obj._roomName = roomName;\n        obj.$state = 'newInRoom'\n        this.gameEngine.world.addObjectInGroup(obj, roomName)\n    }\n\n    /**\n     * Assign a player to a room\n     *\n     * @param {Number} playerId - the playerId\n     * @param {String} roomName - the target room\n     */\n    assignPlayerToRoom(playerId, roomName) {\n       /* const room = this.rooms[roomName];\n        let player = null;\n        if (!room) {\n            this.gameEngine.trace.error(() => `cannot assign player to non-existant room ${roomName}`);\n            console.error(`player ${playerId} assigned to room [${roomName}] which isn't defined`);\n            return;\n        }\n        for (const p of Object.keys(this.connectedPlayers)) {\n            if (this.connectedPlayers[p].socket.playerId === playerId)\n                player = this.connectedPlayers[p];\n        }\n        if (!player) {\n            this.gameEngine.trace.error(() => `cannot assign non-existant playerId ${playerId} to room ${roomName}`);\n        }\n        const roomUpdate = { playerId: playerId, from: player.roomName, to: roomName };\n        player.socket.emit('roomUpdate', roomUpdate);\n        this.gameEngine.emit('server__roomUpdate', roomUpdate);\n        this.gameEngine.trace.info(() => `ROOM UPDATE: playerId ${playerId} from room ${player.roomName} to room ${roomName}`);\n        player.roomName = roomName;\n        room.requestImmediateSync = true;\n        room.requestFullSync = true;\n        */\n\n    }\n\n    // handle the object creation\n    onObjectAdded(obj) {\n       // obj._roomName = obj._roomName || this.DEFAULT_ROOM_NAME;\n       /* this.networkTransmitter.addNetworkedEvent('objectCreate', {\n            stepCount: this.gameEngine.world.stepCount,\n            objectInstance: obj\n        });*/\n\n        if (this.options.updateOnObjectCreation) {\n           // this.rooms[obj._roomName].requestImmediateSync = true;\n        }\n    }\n\n    // handle the object creation\n    onObjectDestroyed({ object, groups }) {\n        for (let room of groups) {\n            this.networkTransmitter.addNetworkedEvent(room, 'objectDestroy', {\n                stepCount: this.gameEngine.world.stepCount,\n                objectInstance: object\n            });\n        }\n    }\n\n    getPlayerId(socket) {\n    }\n\n    // handle new player connection\n    onPlayerConnected(socket) {\n        let that = this;\n\n        // save player\n        /*this.connectedPlayers[socket.id] = {\n            socket: socket,\n            state: 'new',\n            roomName: this.DEFAULT_ROOM_NAME\n        };*/\n        \n\n        let playerId = this.getPlayerId(socket);\n        if (!playerId) {\n            playerId = Utils.generateUID()\n        }\n        socket.playerId = playerId;\n        socket.lastHandledInput = null;\n        socket.joinTime = (new Date()).getTime();\n        this.resetIdleTimeout(socket);\n        \n        let playerEvent = { id: socket.id, playerId, joinTime: socket.joinTime, disconnectTime: 0 };\n        this.gameEngine.emit('server__playerJoined', playerEvent);\n        this.gameEngine.emit('playerJoined', playerEvent);\n        socket.emit('playerJoined', playerEvent);\n\n        socket.on('disconnect', function() {\n            playerEvent.disconnectTime = (new Date()).getTime();\n            that.onPlayerDisconnected(socket.id, playerId);\n            that.gameEngine.emit('server__playerDisconnected', playerEvent);\n            that.gameEngine.emit('playerDisconnected', playerEvent);\n        });\n\n        // todo rename, use number instead of name\n        socket.on('move', function(data) {\n            that.onReceivedInput(data, socket);\n        });\n\n        socket.on('_ping', function() {\n            socket.emit('_pong')\n        })\n\n        // we got a packet of trace data, write it out to a side-file\n        socket.on('trace', function(traceData) {\n            traceData = JSON.parse(traceData);\n            let traceString = '';\n            traceData.forEach(t => { traceString += `[${t.time}]${t.step}>${t.data}\\n`; });\n            fs.appendFile(`${that.options.tracesPath}client.${playerId}.trace`, traceString, err => { if (err) throw err; });\n        });\n\n        this.networkMonitor.registerPlayerOnServer(socket);\n\n        return playerId\n    }\n\n    // handle player timeout\n    onPlayerTimeout(socket) {\n        console.log(`Client timed out after ${this.options.timeoutInterval} seconds`, socket.id);\n        socket.disconnect();\n    }\n\n    // handle player dis-connection\n    onPlayerDisconnected(socketId, playerId) {\n        //delete this.connectedPlayers[socketId];\n        this.World.disconnectUser(playerId)\n        //console.log('Client disconnected');\n    }\n\n    // resets the idle timeout for a given player\n    resetIdleTimeout(socket) {\n        if (socket.idleTimeout) clearTimeout(socket.idleTimeout);\n        if (this.options.timeoutInterval > 0) {\n            socket.idleTimeout = setTimeout(() => {\n                this.onPlayerTimeout(socket);\n            }, this.options.timeoutInterval * 1000);\n        }\n    }\n\n    // add an input to the input-queue for the specific player\n    // each queue is key'd by step, because there may be multiple inputs\n    // per step\n    queueInputForPlayer(data, playerId) {\n\n        // create an input queue for this player, if one doesn't already exist\n        if (!this.playerInputQueues.hasOwnProperty(playerId))\n            this.playerInputQueues[playerId] = {};\n        let queue = this.playerInputQueues[playerId];\n\n        // create an array of inputs for this step, if one doesn't already exist\n        if (!queue[data.step]) queue[data.step] = [];\n\n        // add the input to the player's queue\n        queue[data.step].push(data);\n    }\n\n    // an input has been received from a client, queue it for next step\n    onReceivedInput(data, socket) {\n        \n        if (this.connectedPlayers[socket.id]) {\n            this.connectedPlayers[socket.id].socket.lastHandledInput = data.messageIndex;\n        }\n\n        this.resetIdleTimeout(socket);\n\n        this.queueInputForPlayer(data, socket.playerId);\n    }\n\n    /**\n     * Report game status\n     * This method is only relevant if the game uses MatchMaker functionality.\n     * This method must return the game status.\n     *\n     * @return {String} Stringified game status object.\n     */\n    gameStatus() {\n        let gameStatus = {\n            numPlayers: Object.keys(this.connectedPlayers).length,\n            upTime: 0,\n            cpuLoad: 0,\n            memoryLoad: 0,\n            players: {}\n        };\n\n        for (let p of Object.keys(this.connectedPlayers)) {\n            gameStatus.players[p] = {\n                frameRate: 0,\n            };\n        }\n\n        return JSON.stringify(gameStatus);\n    }\n\n}\n\nexport default ServerEngine;\n"],"names":["GameWorld","stepCount","objects","playerCount","idCount","groups","Map","uuidv4","query","queriedObjects","forEachObject","id","object","conditions","push","playerId","instanceType","components","forEach","componentClass","hasComponent","every","value","returnSingle","length","queryObjects","Object","assign","groupName","get","collections","map","getObject","has","addGroup","groupsDeleted","group","isDeleted","removeObjectOfGroup","callback","keys","returnValue","options","meta","set","requestImmediateSync","requestFullSync","syncCounter","onAddGroup","delete","onRemoveGroup","filter","objId","removeGroup","isValue","isObject","isPrototype","isFunction","_undefined","require$$0","require$$1","process","normalizeOpts","isPlainFunction","callable","d","Timer","currentTime","isActive","idCounter","events","event","eventId","type","startOffset","time","apply","thisContext","args","destroy","timerEvent","TimerEvent","TYPES","repeat","single","timer","Trace","traceLevel","TRACE_DEBUG","traceBuffer","step","error","trace","bind","TRACE_ERROR","warn","TRACE_WARN","info","TRACE_INFO","debug","TRACE_ALL","level","dataCB","Error","data","Date","buffer","s","GameEngine","isServerSide","window","glob","global","LANCE","gameEngine","defaultOpts","TRACE_NONE","clientIDSpace","NaN","eventEmitter","EventEmitter","on","once","removeListener","off","emit","serverObj","world","localId","localObj","hasOwnProperty","inputId","worldSettings","initWorld","play","isReenact","tick","timestamp","getTime","t","dt","physicsOnly","physicsEngine","objectFilter","undefined","Boolean","o","ignorePhysics","refreshFromPhysics","toString","serverCopyArrived","addObject","onAddToWorld","inputDesc","isServer","messageIndex","input","objectId","serializer","PhysicsEngine","console","Utils","str","bits","hash","i","charCodeAt","Math","pow","buf1","buf2","byteLength","dv1","Int8Array","dv2","url","Promise","resolve","reject","req","XMLHttpRequest","open","onload","status","JSON","parse","responseText","onerror","send","firstPart","random","secondPart","slice","BaseTypes","FLOAT32","INT32","INT16","INT8","UINT8","STRING","CLASSINSTANCE","LIST","Serializable","bufferOffset","netScheme","dataBuffer","dataView","classId","localBufferOffset","hashStr","constructor","name","dry","bufferSize","serialize","ArrayBuffer","DataView","setUint8","Uint8Array","BYTES_PER_ELEMENT","sort","property","writeDataView","Uint16Array","objectInstanceBufferOffset","item","itemType","listBufferOffset","getTypeByteSize","prevObject","deserialize","obj","isString","p","hasChanged","changedStrings","prunedCopy","indexOf","other","TwoVector","x","y","round3","round","sqrt","multiplyScalar","sourceObj","target","increment","clone","subtract","percent","max","min","increments","update_RECOMPUTE","grid","objAABB","newObjHash","_globalObjects","HSHG","getAABB","toHash","removeObject","update_REMOVEALL","testAABBOverlap","objA","objB","a","b","getLongestAABBEdge","abs","MAX_OBJECT_CELL_DENSITY","INITIAL_GRID_LENGTH","HIERARCHY_FACTOR","HIERARCHY_FACTOR_SQRT","SQRT2","UPDATE_METHOD","_grids","prototype","cellSize","objSize","oneGrid","newGrid","globalObjectsIndex","Grid","initCells","splice","replacementObj","pop","update","call","queryForCollisionPairs","broadOverlapTestCallback","j","k","l","c","cell","offset","adjacentCell","biggerGrid","objAAABB","objAHashInBiggerGrid","possibleCollisions","broadOverlapTest","occupiedCells","objectContainer","neighborOffsetArray","allCells","allCellsIndex","allObjects","cellCount","parentHierarchy","inverseCellSize","rowColumnCount","xyHashMask","Array","sharedInnerOffsets","_parentHierarchy","gridLength","wh","isOnRightEdge","isOnLeftEdge","isOnTopEdge","isOnBottomEdge","innerOffsets","leftOffset","rightOffset","topOffset","bottomOffset","uniqueOffsets","Cell","z","xHash","yHash","objHash","targetCell","occupiedCellsIndex","objectContainerIndex","allGridObjectsIndex","expandGrid","containerIndex","replacementCell","currentCellCount","currentRowColumnCount","currentXYHashMask","newCellCount","newRowColumnCount","newXYHashMask","_private","HSHGCollisionDetection","COLLISION_DISTANCE","previousCollisionPairs","stepCollidingPairs","reduce","accumulator","currentValue","pairId","getArrayPairId","o1","o2","pairObj","arrayPair","sortedArrayPair","differenceVector","BruteForceCollisionDetection","autoResolve","collisionPairs","isStatic","collidesWith","collisionDistance","copy","position","o1Box","getBox","o2Box","xMin","xMax","yMin","yMax","shiftY1","shiftY2","shiftX1","shiftX2","smallestYShift","smallestXShift","velocity","id1","id2","join","findCollision","split","k1","k2","checkPair","width","height","dv","dx","SimplePhysicsEngine","collisions","collisionDetection","gravity","collisionOptions","init","isRotatingRight","angle","rotationSpeed","isRotatingLeft","isAccelerating","rad","PI","cos","sin","acceleration","add","velMagnitude","maxSpeed","multiply","friction","worldWrap","ob","objectStep","detect","CANNON","require","CannonPhysicsEngine","World","quatNormalizeSkip","quatNormalizeFast","broadphase","NaiveBroadphase","radius","mass","shape","Sphere","body","Body","addBody","Box","Vec3","material","Material","radiusTop","radiusBottom","numSegments","Cylinder","removeBody","ThreeVector","MAX_DEL_THETA","Quaternion","w","axisAngle","toAxisAngle","axis","normalize","acos","divS","halfAngle","aw","ax","ay","az","bw","bx","by","bz","bending","cosHalfTheta","sqrSinHalfTheta","Number","EPSILON","sinHalfTheta","halfTheta","atan2","delTheta","sign","ratioA","ratioB","GameObject","props","getNewId","savedCopy","syncTo","isLocal","bendingIncrements","bendToCurrent","original","componentInstance","parentObject","componentName","angularVelocity","angleLocal","MathUtils","start","end","wrapMin","wrapMax","wrapTest","log","interpolatedVal","interpolateDeltaWithWrapping","wrapLength","DynamicObject","deceleration","deltaAngle","turnRight","bendingPositionDelta","bendingVelocityDelta","bendingAngleDelta","bendingAngle","positionBending","velocityBending","angleBending","positionLocal","velocityLocal","incrementScale","getBendingDelta","bendingTarget","bendingOptions","stepDesc","timeFactor","posDelta","velDelta","PhysicalObject2D","class","v","av","avBending","angularVelocityLocal","bendingAVDelta","refreshToPhysics","keepVelocity","physicsObj","copyVector","source","sourceVec","Float32Array","nextObj","lerp","PhysicalObject3D","quaternion","q","bendingQuaternionDelta","conjugate","setFromAxisAngle","avDelta","slerp","hasCORS","globalThis","PACKET_TYPES","PACKET_TYPES_REVERSE","ERROR_PACKET","withNativeArrayBuffer","encodePacket","decodePacket","Emitter","parser","encode","decode","Transport","yeast","pick","Polling","empty","require$$2","polling","XHR","JSONP","Socket","is_binary_1","binary_1","socket_io_parser_1","Backoff","eio","socket_1","manager_1","SIXTY_PER_SEC","LOOP_SLOW_THRESH","LOOP_SLOW_COUNT","Scheduler","period","delay","nextExecTime","requestedDelay","delayCounter","callTick","stepPeriod","requestAnimationFrame","nextTickChecker","stepStartTime","setTimeout","nextTick","SyncStrategy","clientEngine","inputOptions","needFirstSync","syncStep","collectSync","requiredSyncs","SYNC_APPLIED","STEP_DRIFT_THRESHOLDS","onServerSync","MAX_LEAD","MAX_LAG","onEveryStep","clientReset","e","fullUpdate","lastSync","required","syncObjects","syncSteps","syncEvents","sEvent","objectInstance","eventName","eventCount","objCount","newObj","curObj","__proto__","verbose","applyIncrementalBending","requiredStep","applySync","shift","rc","defaults","clientStepHold","localObjBending","remoteObjBending","reflect","InterpolateStrategy","ignoreInputs","sync","ids","ev","saveState","addNewObject","bendToCurrentState","refreshRenderObject","bendingToString","objEvents","removeObjectFromWorld","syncsBufferLength","maxReEnactSteps","RTTEstimate","extrapolate","ExtrapolateStrategy","recentInputs","clientInputSave","inputEvent","lastServerStep","serverStep","localShadowObj","findLocalShadow","visible","clientStep","movement","processInput","cleanRecentInputs","worldBufferLength","clientStepLag","FrameSyncStrategy","strategies","interpolate","frameSync","Synchronizer","syncStrategy","MAX_UINT_16","Serializer","registeredClasses","customTypes","registerClass","customType","classObj","byteOffset","localByteOffset","objectClassId","getUint8","objectClass","read","readDataView","netSchemProp","setFloat32","setInt32","setInt16","setInt8","setUint16","strLen","serializedObj","getFloat32","getInt32","getInt16","getInt8","getUint16","String","fromCharCode","deserializeData","items","itemCount","Int32Array","Int16Array","NetworkMonitor","server","gameName","getPrototypeOf","queryIdCounter","RTTQueries","movingRTTAverage","movingRTTAverageFrame","movingFPSAverageSize","healthCheckRTTSample","socket","onReceivedRTTQuery","setInterval","sendRTTQuery","healthCheckInterval","queryId","RTT","RTTAverage","respondToRTTQuery","countConnections","http","NetworkedEventFactory","seriazlier","payload","networkedEvent","NetworkedEventCollection","NetworkTransmitter","registeredEvents","networkedEventCollection","registerNetworkedEventFactory","classHash","networkedEventPrototype","roomName","stagedNetworkedEvent","create","GAME_UPS","STEP_DELAY_MSEC","STEP_HURRY_MSEC","ClientEngine","io","Renderer","autoConnect","scheduler","serverURL","showLatency","ioClient","registerClasses","networkMonitor","inboundMessages","outboundMessages","renderer","lastStepTime","correction","standaloneMode","configureSynchronization","delayInputCount","delayedInputs","syncOptions","synchronizer","standalone","registerClient","playerData","worldData","roomData","startTime","now","latency","onLatency","connection","logic","key","stopped","resolved","alert","renderLoop","stop","lastTimestamp","draw","then","networkTransmitter","connect","catch","resolveGame","disconnect","checkType","highestServerStep","thresholds","maxLead","maxLag","delayTick","hurryTick","result","getPlayerGameOverResult","setStep","skipOneStep","handleInboundMessage","checkDrift","handleOutboundInput","applyDelayedInputs","stringify","rotate","message","that","delayed","doInputLocal","command","syncData","deserializePayload","syncHeader","find","oldStep","newStep","keyCodeTable","inverse","val","inverseKeyCodeTable","KeyboardControls","setupListeners","keyState","boundKeys","keyName","isDown","method","count","parameters","sendInput","actionName","document","addEventListener","onKeyChange","isArray","keyOptions","code","Event","keyCode","applyKeyDown","applyKeyUp","isStopped","keyChange","next","lastKeyPressed","preventDefault","singleton","TIME_RESET_THRESHOLD","doReset","runClientStep","FRAME_HISTORY_SIZE","MAX_SLOW_FRAMES","schema","default","CAMERA_OFFSET_VEC","THREE","Vector3","frameRateHistory","frameRateTest","chaseCameras","getElementsByClassName","cameraEl","frh","slowFrames","reportSlowFrameRate","el","renderEl","setAttribute","object3D","camera","children","relativeCameraOffset","cameraOffset","applyMatrix4","matrixWorld","lookAt","setGlobals","AFrameRenderer","networkedPhysics","AFRAME","registerSystem","sceneElArray","getElementsByTagName","scene","renderObj","remove","ServerEngine","updateRate","stepRate","fullSyncRate","timeoutInterval","updateOnObjectCreation","tracesPath","serverSendLag","mkdirp","DEFAULT_ROOM_NAME","rooms","connectedPlayers","playerInputQueues","objMemory","onPlayerConnected","onObjectAdded","onObjectDestroyed","schedulerConfig","serverTime","inputQueue","queueSteps","minStep","syncStateToClients","traceData","traceString","toISOString","fs","appendFile","err","room","roomPlayers","getObjectsOfGroup","diffUpdate","player","_roomName","state","addNetworkedEvent","serializeUpdate","serializePayload","_socket","clearPayload","schemeRules","deepSerialize","schemeParams","schemeQuery","all","prop","originVal","getPrev","setPrev","broadcast","newVal","keyGroup","origin","rule","params","arrayBuffersEqual","prunedStringsClone","$state","addObjectInGroup","getPlayerId","generateUID","lastHandledInput","joinTime","resetIdleTimeout","playerEvent","disconnectTime","onPlayerDisconnected","onReceivedInput","registerPlayerOnServer","socketId","disconnectUser","idleTimeout","clearTimeout","onPlayerTimeout","queue","queueInputForPlayer","gameStatus","numPlayers","upTime","cpuLoad","memoryLoad","players","frameRate"],"mappings":"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"}